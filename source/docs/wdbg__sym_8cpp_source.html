<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Pyrogenesis: /home/sathyam/0ad.svn/source/lib/sysdep/os/win/wdbg_sym.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Pyrogenesis
   &#160;<span id="projectnumber">13997</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_e9f938b6a0a3145773b24039556c08b4.html">lib</a></li><li class="navelem"><a class="el" href="dir_1c4feb0861d62a8aa0e67a0f68730f09.html">sysdep</a></li><li class="navelem"><a class="el" href="dir_93baea0e8cd9f886dd86421ffb2f7beb.html">os</a></li><li class="navelem"><a class="el" href="dir_776c2d3a9d12f7a67698c08c3a6eb9f8.html">win</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">wdbg_sym.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="wdbg__sym_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Copyright (c) 2013 Wildfire Games</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * a copy of this software and associated documentation files (the</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * &quot;Software&quot;), to deal in the Software without restriction, including</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * without limitation the rights to use, copy, modify, merge, publish,</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * distribute, sublicense, and/or sell copies of the Software, and to</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * permit persons to whom the Software is furnished to do so, subject to</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the following conditions:</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * The above copyright notice and this permission notice shall be included</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * in all copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * Win32 stack trace and symbol engine.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;precompiled.h&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wdbg__sym_8h.html">lib/sysdep/os/win/wdbg_sym.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="byte__order_8h.html">lib/byte_order.h</a>&quot;</span> <span class="comment">// movzx_le64</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="module__init_8h.html">lib/module_init.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cpu_8h.html">lib/sysdep/cpu.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="debug__stl_8h.html">lib/debug_stl.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="app__hooks_8h.html">lib/app_hooks.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dbghelp_8h.html">lib/external_libraries/dbghelp.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wdbg_8h.html">lib/sysdep/os/win/wdbg.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wutil_8h.html">lib/sysdep/os/win/wutil.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="winit_8h.html">lib/sysdep/os/win/winit.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<a class="code" href="winit_8h.html#ae7c11fb727e567abb6dc5bfed7715f51">WINIT_REGISTER_CRITICAL_INIT</a>(<a class="code" href="wdbg__sym_8cpp.html#adead724c570fb0326b5f42075c81c382">wdbg_sym_Init</a>);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">static</span> <a class="code" href="wdbg__sym_8cpp.html#a9115e79d1b9fcd92904ac7cfa7d82f04">WUTIL_FUNC</a>(pRtlCaptureContext, <a class="code" href="wgl_8h.html#a7927e087749615dae3114cc27b91c86d">VOID</a>, (PCONTEXT));</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#adead724c570fb0326b5f42075c81c382">   48</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#adead724c570fb0326b5f42075c81c382">wdbg_sym_Init</a>()</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="wutil_8h.html#acdbb88f878fa68cfc03cedca3d988bf7">WUTIL_IMPORT_KERNEL32</a>(RtlCaptureContext, pRtlCaptureContext);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">//----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// dbghelp</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">//----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// global for convenience (we only support a single process)</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#aa3b10793a01a95be6cc327e4930ca85b">   60</a></span>&#160;<span class="keyword">static</span> <a class="code" href="wgl_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a> <a class="code" href="wdbg__sym_8cpp.html#aa3b10793a01a95be6cc327e4930ca85b">hProcess</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// for StackWalk64; taken from PE header by InitDbghelp.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ada8f84681eb7c984d7f7cb15d3f7cdac">   63</a></span>&#160;<span class="keyword">static</span> WORD <a class="code" href="wdbg__sym_8cpp.html#ada8f84681eb7c984d7f7cb15d3f7cdac">machine</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a37aba301aa1332a23061438a6752633d">   65</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a37aba301aa1332a23061438a6752633d">InitDbghelp</a>()</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    hProcess = GetCurrentProcess();</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="dbghelp_8h.html#a31770db1d6bbe3122e1c3f78470f3e5b">dbghelp_ImportFunctions</a>();</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">// set options</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// notes:</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// - can be done before SymInitialize; we do so in case</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">//   any of the options affect it.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">// - do not set directly - that would zero any existing flags.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> opts = pSymGetOptions();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">//opts |= SYMOPT_DEBUG; // lots of debug spew in output window</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    opts |= SYMOPT_DEFERRED_LOADS;  <span class="comment">// the &quot;fastest, most efficient way&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    opts |= SYMOPT_LOAD_LINES;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    opts |= SYMOPT_UNDNAME;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    pSymSetOptions(opts);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// initialize dbghelp.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// .. request symbols from all currently active modules be loaded.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keyword">const</span> <a class="code" href="wgl_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> fInvadeProcess = TRUE;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// .. use default *symbol* search path. we don&#39;t use this to locate</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">//    our PDB file because its absolute path is stored inside the EXE.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keyword">const</span> PWSTR UserSearchPath = 0;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="classWinScopedPreserveLastError.html">WinScopedPreserveLastError</a> s;   <span class="comment">// SymInitializeW</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keyword">const</span> <a class="code" href="wgl_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> ok = pSymInitializeW(hProcess, UserSearchPath, fInvadeProcess);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="status_8h.html#a04818077363c6001aa31db08b02dc3df">WARN_IF_FALSE</a>(ok);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    HMODULE hModule = GetModuleHandle(0);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    IMAGE_NT_HEADERS* <span class="keyword">const</span> header = pImageNtHeader(hModule);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    machine = header-&gt;FileHeader.Machine;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">// ensure dbghelp is initialized exactly once.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">// call every time before dbghelp functions are used.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">// (on-demand initialization allows handling exceptions raised before</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">// winit.cpp init functions are called)</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">// NB: this may take SECONDS if OS symbols are installed and</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// symserv wants to access the internet.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a48bed3427f3cee2013008e23d73bed8f">  107</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wdbg__sym_8cpp.html#a48bed3427f3cee2013008e23d73bed8f">sym_init</a>()</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keyword">static</span> <a class="code" href="module__init_8h.html#a0622302b481431be62f9460f2cf5260e">ModuleInitState</a> <a class="code" href="h__mgr_8cpp.html#a4688f25e9a88b40c4f52c69323d68c0f">initState</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="module__init_8cpp.html#ae682d0c308c233bfc98bac095d96fd3c">ModuleInit</a>(&amp;initState, <a class="code" href="wdbg__sym_8cpp.html#a37aba301aa1332a23061438a6752633d">InitDbghelp</a>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#aa30d585fb92afa388aa5a7fabd8382c0">  114</a></span>&#160;<span class="keyword">static</span> STACKFRAME64 <a class="code" href="wdbg__sym_8cpp.html#aa30d585fb92afa388aa5a7fabd8382c0">PopulateStackFrame</a>(CONTEXT&amp; context)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    STACKFRAME64 sf;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    memset(&amp;sf, 0, <span class="keyword">sizeof</span>(sf));</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    sf.AddrPC.Mode      = AddrModeFlat;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    sf.AddrFrame.Mode   = AddrModeFlat;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    sf.AddrStack.Mode   = AddrModeFlat;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#if ARCH_AMD64</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor"></span>    sf.AddrPC.Offset    = context.Rip;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    sf.AddrFrame.Offset = context.Rbp;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    sf.AddrStack.Offset = context.Rsp;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor"></span>    sf.AddrPC.Offset    = context.Eip;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    sf.AddrFrame.Offset = context.Ebp;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    sf.AddrStack.Offset = context.Esp;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">return</span> sf;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a5cf84adc578b2b5ab6460c135f481e58">  134</a></span>&#160;<span class="keyword">static</span> IMAGEHLP_STACK_FRAME <a class="code" href="wdbg__sym_8cpp.html#a5cf84adc578b2b5ab6460c135f481e58">PopulateImageStackFrame</a>(<span class="keyword">const</span> STACKFRAME64&amp; sf)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    IMAGEHLP_STACK_FRAME isf;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    memset(&amp;isf, 0, <span class="keyword">sizeof</span>(isf));</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// apparently only PC, FP and SP are necessary, but</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// we copy everything to be safe.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    isf.InstructionOffset  = sf.AddrPC.Offset;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    isf.ReturnOffset       = sf.AddrReturn.Offset;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    isf.FrameOffset        = sf.AddrFrame.Offset;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    isf.StackOffset        = sf.AddrStack.Offset;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    isf.BackingStoreOffset = sf.AddrBStore.Offset;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    isf.FuncTableEntry     = (ULONG64)sf.FuncTableEntry;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// (note: array of different types, can&#39;t copy directly)</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 4; i++)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        isf.Params[i] = sf.Params[i];</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// isf.Reserved - already zeroed</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    isf.Virtual = sf.Virtual;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// isf.Reserved2 - already zeroed</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">return</span> isf;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="structSYMBOL__INFO__PACKAGEW2.html">  156</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structSYMBOL__INFO__PACKAGEW2.html">SYMBOL_INFO_PACKAGEW2</a> : <span class="keyword">public</span> SYMBOL_INFO_PACKAGEW</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="structSYMBOL__INFO__PACKAGEW2.html#a0e7d92b6fdd7f2e810197158079d9415">  158</a></span>&#160;    <a class="code" href="structSYMBOL__INFO__PACKAGEW2.html#a0e7d92b6fdd7f2e810197158079d9415">SYMBOL_INFO_PACKAGEW2</a>()</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        si.SizeOfStruct = <span class="keyword">sizeof</span>(si);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        si.MaxNameLen = MAX_SYM_NAME;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;};</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#pragma pack(push, 1)</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">// note: we can&#39;t derive from TI_FINDCHILDREN_PARAMS because its members</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">// aren&#39;t guaranteed to precede ours (although they do in practice).</span></div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="structTI__FINDCHILDREN__PARAMS2.html">  169</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structTI__FINDCHILDREN__PARAMS2.html">TI_FINDCHILDREN_PARAMS2</a></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;{</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="structTI__FINDCHILDREN__PARAMS2.html#a634353e8c6967ba6d533aaf8f5406928">  171</a></span>&#160;    <a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#a634353e8c6967ba6d533aaf8f5406928">TI_FINDCHILDREN_PARAMS2</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> numChildren)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#ae4f6a0b25d35dd6c5520b494f441d6ed">p</a>.Start = 0;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#ae4f6a0b25d35dd6c5520b494f441d6ed">p</a>.Count = std::min(numChildren, <a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#a9114c0e997e6854c6a88482620b97ef6">maxChildren</a>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="structTI__FINDCHILDREN__PARAMS2.html#a9114c0e997e6854c6a88482620b97ef6">  177</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> <a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#a9114c0e997e6854c6a88482620b97ef6">maxChildren</a> = 300;</div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="structTI__FINDCHILDREN__PARAMS2.html#ae4f6a0b25d35dd6c5520b494f441d6ed">  178</a></span>&#160;    TI_FINDCHILDREN_PARAMS <a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#ae4f6a0b25d35dd6c5520b494f441d6ed">p</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="structTI__FINDCHILDREN__PARAMS2.html#adefc3494432f526f3981f878be0dde10">  179</a></span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> <a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#adefc3494432f526f3981f878be0dde10">childrenStorage</a>[<a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#a9114c0e997e6854c6a88482620b97ef6">maxChildren</a>-1];</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;};</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#pragma pack(pop)</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">// actual implementation; made available so that functions already under</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">// the lock don&#39;t have to unlock (slow) to avoid recursive locking.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a7d9afd213aa60dd94a1755ab4db6fd64">  187</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a7d9afd213aa60dd94a1755ab4db6fd64">ResolveSymbol_lk</a>(<span class="keywordtype">void</span>* ptr_of_interest, <span class="keywordtype">wchar_t</span>* sym_name, <span class="keywordtype">wchar_t</span>* file, <span class="keywordtype">int</span>* line)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;{</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#a48bed3427f3cee2013008e23d73bed8f">sym_init</a>();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keyword">const</span> DWORD64 addr = (DWORD64)ptr_of_interest;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">size_t</span> successes = 0;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="classWinScopedPreserveLastError.html">WinScopedPreserveLastError</a> s;   <span class="comment">// SymFromAddrW, SymGetLineFromAddrW64</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// get symbol name (if requested)</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span>(sym_name)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        sym_name[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="structSYMBOL__INFO__PACKAGEW2.html">SYMBOL_INFO_PACKAGEW2</a> sp;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        SYMBOL_INFOW* sym = &amp;sp.si;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">if</span>(pSymFromAddrW(hProcess, addr, 0, sym))</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <a class="code" href="secure__crt_8h.html#a69996e159a04a5106429a47c52739bab">wcscpy_s</a>(sym_name, <a class="code" href="debug_8h.html#a8812daf6c623bc504ef46793a87b03c4">DEBUG_SYMBOL_CHARS</a>, sym-&gt;Name);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            successes++;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// get source file and/or line number (if requested)</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span>(file || line)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        file[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        *line = 0;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        IMAGEHLP_LINEW64 line_info = { <span class="keyword">sizeof</span>(IMAGEHLP_LINEW64) };</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> displacement; <span class="comment">// unused but required by pSymGetLineFromAddr64!</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span>(pSymGetLineFromAddrW64(hProcess, addr, &amp;displacement, &amp;line_info))</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">if</span>(file)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                <span class="comment">// strip full path down to base name only.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <span class="comment">// this loses information, but that isn&#39;t expected to be a</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                <span class="comment">// problem and is balanced by not having to do this from every</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <span class="comment">// call site (full path is too long to display nicely).</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* basename = <a class="code" href="path_8cpp.html#a1328a51c51c4653410ef160d679247d1">path_name_only</a>(line_info.FileName);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <a class="code" href="secure__crt_8h.html#a69996e159a04a5106429a47c52739bab">wcscpy_s</a>(file, <a class="code" href="debug_8h.html#a5cedd52204506f8b491f5d9a7c8a2c34">DEBUG_FILE_CHARS</a>, basename);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                successes++;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keywordflow">if</span>(line)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                *line = line_info.LineNumber;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                successes++;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span>(addr == 0 &amp;&amp; GetLastError() == ERROR_MOD_NOT_FOUND)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        SetLastError(0);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span>(GetLastError() == ERROR_INVALID_ADDRESS)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        SetLastError(0);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> (successes != 0)? <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a> : <a class="code" href="namespaceERR.html#a61559cb9d273fe4bce52a390cf38bd90">ERR::FAIL</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">// file is the base name only, not path (see rationale in wdbg_sym).</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">// the PDB implementation is rather slow (~500µs).</span></div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#afed907a0c1084ffec7aec6f52b34ddf5">  249</a></span>&#160;<a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="debug_8h.html#ae2b6c180baa3eb86ed20bcb7cb7becee">debug_ResolveSymbol</a>(<span class="keywordtype">void</span>* ptr_of_interest, <span class="keywordtype">wchar_t</span>* sym_name, <span class="keywordtype">wchar_t</span>* file, <span class="keywordtype">int</span>* line)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="classWinScopedLock.html">WinScopedLock</a> lock(<a class="code" href="wutil_8h.html#a11b9726305d57b4edaac5a090d2fb759aae861369194f0e3bec3e32fa6da8bc0e">WDBG_SYM_CS</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a7d9afd213aa60dd94a1755ab4db6fd64">ResolveSymbol_lk</a>(ptr_of_interest, sym_name, file, line);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">//----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">// stack walk</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">//----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a19c3391dd25bba1ac3e7d2892832dde7">  260</a></span>&#160;<a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="debug_8h.html#a1aef1d3bf364aa378256cad076825548">debug_CaptureContext</a>(<span class="keywordtype">void</span>* pcontext)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// there are 4 ways to do so, in order of preference:</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// - RtlCaptureContext (only available on WinXP or above)</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// - assembly language subroutine (complicates the build system)</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// - intentionally raise an SEH exception and capture its context</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">//   (causes annoying &quot;first chance exception&quot; messages and</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">//   can&#39;t co-exist with WinScopedLock&#39;s destructor)</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// - GetThreadContext while suspended (a bit tricky + slow).</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">//   note: it used to be common practice to query the current thread</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">//   context, but WinXP SP2 and above require it be suspended.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span>(!pRtlCaptureContext)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceERR.html#a9d89eb5a3f5f9ea9cf642bae872c7476">ERR::NOT_SUPPORTED</a>;  <span class="comment">// NOWARN</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    CONTEXT* context = (CONTEXT*)pcontext;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="code__annotation_8h.html#a9c6e95e4137db09c2a6f8b69b32fd73f">cassert</a>(<span class="keyword">sizeof</span>(CONTEXT) &lt;= <a class="code" href="debug_8h.html#abf28d06b314fec40b16b0014fc0f18f8">DEBUG_CONTEXT_SIZE</a>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    memset(context, 0, <span class="keyword">sizeof</span>(CONTEXT));</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    context-&gt;ContextFlags = CONTEXT_FULL;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    pRtlCaptureContext(context);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#afd688fd7cefd4245d9015034d9bf3f19">  284</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#afd688fd7cefd4245d9015034d9bf3f19">CallStackWalk</a>(STACKFRAME64&amp; sf, CONTEXT&amp; context)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;{</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="classWinScopedLock.html">WinScopedLock</a> lock(<a class="code" href="wutil_8h.html#a11b9726305d57b4edaac5a090d2fb759aae861369194f0e3bec3e32fa6da8bc0e">WDBG_SYM_CS</a>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    SetLastError(0);    <span class="comment">// StackWalk64 doesn&#39;t always SetLastError</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keyword">const</span> <a class="code" href="wgl_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a> hThread = GetCurrentThread();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span>(!pStackWalk64(machine, hProcess, hThread, &amp;sf, &amp;context, 0, pSymFunctionTableAccess64, pSymGetModuleBase64, 0))</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceERR.html#a61559cb9d273fe4bce52a390cf38bd90">ERR::FAIL</a>; <span class="comment">// NOWARN (no stack frames left)</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">// (the frame pointer can be zero despite StackWalk64 returning TRUE.)</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span>(sf.AddrFrame.Offset == 0)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceERR.html#a61559cb9d273fe4bce52a390cf38bd90">ERR::FAIL</a>;   <span class="comment">// NOWARN (no stack frames left)</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// huge WTF in x64 debug builds (dbghelp 6.12.0002.633):</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// AddrFrame.Offset doesn&#39;t match the correct RBP value.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// StackWalk64 updates the context [http://bit.ly/lo1aqZ] and</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// its Rbp is correct, so we&#39;ll use that.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">#if ARCH_AMD64</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor"></span>    sf.AddrFrame.Offset = context.Rbp;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">// NB: CaptureStackBackTrace may be faster (http://msinilo.pl/blog/?p=40),</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">// but wasn&#39;t known during development.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="wdbg__sym_8h.html#a6fe88017863cceaa7ce18d27c4b38ce3">  311</a></span>&#160;<a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#afc19d701d40c6a04c46a28e498ec999f">wdbg_sym_WalkStack</a>(<a class="code" href="wdbg__sym_8h.html#ac342f8c2c6f43157ef56efe8b6172fd3">StackFrameCallback</a> cb, uintptr_t cbData, CONTEXT&amp; context, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* lastFuncToSkip)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;{</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#a48bed3427f3cee2013008e23d73bed8f">sym_init</a>();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    STACKFRAME64 sf = <a class="code" href="wdbg__sym_8cpp.html#aa30d585fb92afa388aa5a7fabd8382c0">PopulateStackFrame</a>(context);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordtype">wchar_t</span> func[<a class="code" href="debug_8h.html#a8812daf6c623bc504ef46793a87b03c4">DEBUG_SYMBOL_CHARS</a>];</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> ret = <a class="code" href="namespaceERR.html#a7478f054dfe7f5aa3527458fb30af48e">ERR::SYM_NO_STACK_FRAMES_FOUND</a>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">for</span>(;;) <span class="comment">// each stack frame:</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="wdbg__sym_8cpp.html#afd688fd7cefd4245d9015034d9bf3f19">CallStackWalk</a>(sf, context) != <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">if</span>(lastFuncToSkip)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="keywordtype">void</span>* <span class="keyword">const</span> pc = (<span class="keywordtype">void</span>*)(uintptr_t)sf.AddrPC.Offset;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="debug_8h.html#ae2b6c180baa3eb86ed20bcb7cb7becee">debug_ResolveSymbol</a>(pc, func, 0, 0) == <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <span class="keywordflow">if</span>(wcsstr(func, lastFuncToSkip))    <span class="comment">// this was the last one to skip</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                    lastFuncToSkip = 0;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        ret = cb(&amp;sf, cbData);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <a class="code" href="status_8h.html#ac8d9e48fa2799a2f3d9dce28e4837df0">RETURN_STATUS_FROM_CALLBACK</a>(ret);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a0e503e46f87235db6d5a170758c2e069">  342</a></span>&#160;<span class="keywordtype">void</span>* <a class="code" href="debug_8h.html#a2b922e2b75796f969bf1ce5285b4dd50">debug_GetCaller</a>(<span class="keywordtype">void</span>* pcontext, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* lastFuncToSkip)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keyword">struct </span>StoreAddress</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> Func(<span class="keyword">const</span> STACKFRAME64* sf, uintptr_t cbData)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keyword">const</span> uintptr_t funcAddress = sf-&gt;AddrPC.Offset;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="comment">// store funcAddress in our `output parameter&#39;</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            memcpy((<span class="keywordtype">void</span>*)cbData, &amp;funcAddress, <span class="keyword">sizeof</span>(funcAddress));</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    };</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordtype">void</span>* func;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="wdbg_8h.html#a09e2322cf38d1c7c00b1434d896d450d">wdbg_assert</a>(pcontext != 0);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> ret = <a class="code" href="wdbg__sym_8cpp.html#afc19d701d40c6a04c46a28e498ec999f">wdbg_sym_WalkStack</a>(&amp;StoreAddress::Func, (uintptr_t)&amp;func, *(CONTEXT*)pcontext, lastFuncToSkip);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">return</span> (ret == <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>)? func : 0;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">// helper routines for symbol value dump</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">// infinite recursion has never happened, but we check for it anyway.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a464412b524d145a2c26a6d62874e5d49">  368</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="wdbg__sym_8cpp.html#a464412b524d145a2c26a6d62874e5d49">maxIndirection</a> = 255;</div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ac8756c41e015d4f81b5766e721edc573">  369</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="wdbg__sym_8cpp.html#ac8756c41e015d4f81b5766e721edc573">maxLevel</a> = 255;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="structDumpState.html">  371</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structDumpState.html">DumpState</a></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;{</div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="structDumpState.html#a990f52391ca7cfb340dded928477deaa">  373</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structDumpState.html#a990f52391ca7cfb340dded928477deaa">level</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">  374</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">indirection</a>;</div>
<div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">  375</a></span>&#160;    uintptr_t <a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="structDumpState.html#a949ed74cc3ce3b9c293100b079904eee">  376</a></span>&#160;    LPSTACKFRAME64 <a class="code" href="structDumpState.html#a949ed74cc3ce3b9c293100b079904eee">stackFrame</a>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="structDumpState.html#a53311be3eba46351db225754b118cee1">  378</a></span>&#160;    <a class="code" href="structDumpState.html#a53311be3eba46351db225754b118cee1">DumpState</a>(uintptr_t <a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, LPSTACKFRAME64 <a class="code" href="structDumpState.html#a949ed74cc3ce3b9c293100b079904eee">stackFrame</a>)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        : <a class="code" href="structDumpState.html#a990f52391ca7cfb340dded928477deaa">level</a>(0), <a class="code" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">indirection</a>(0), moduleBase(moduleBase), stackFrame(stackFrame)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;};</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">//----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a05359c64383951b6808f62637734a495">  387</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="wdbg__sym_8cpp.html#a05359c64383951b6808f62637734a495">out_chars_left</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#aede03f1783dbca279cf77f4fd9978622">  388</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">wchar_t</span>* <a class="code" href="wdbg__sym_8cpp.html#aede03f1783dbca279cf77f4fd9978622">out_pos</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">// (only warn once until next out_init to avoid flood of messages.)</span></div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a9563212408e59ddcc47cfb5a968aa23d">  391</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="wdbg__sym_8cpp.html#a9563212408e59ddcc47cfb5a968aa23d">out_have_warned_of_overflow</a>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">// some top-level (*) symbols cause tons of output - so much that they may</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">// single-handedly overflow the buffer (e.g. pointer to a tree of huge UDTs).</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">// we can&#39;t have that, so there is a limit in place as to how much a</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">// single top-level symbol can output. after that is reached, dumping is</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">// aborted for that symbol but continues for the subsequent top-level symbols.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">// this is implemented as follows: dump_sym_cb latches the current output</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">// position; each dump_sym (through which all symbols go) checks if the</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">// new position exceeds the limit and aborts if so.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">// slight wrinkle: since we don&#39;t want each level of UDTs to successively</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">// realize the limit has been hit and display the error message, we</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">// return ERR::SYM_SINGLE_SYMBOL_LIMIT once and thereafter INFO::SYM_SUPPRESS_OUTPUT.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">// * example: local variables, as opposed to child symbols in a UDT.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a7de5190aea14ad66ada43514c2bd48ca">  407</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">wchar_t</span>* <a class="code" href="wdbg__sym_8cpp.html#a7de5190aea14ad66ada43514c2bd48ca">out_latched_pos</a>;</div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a15dc8f220a123c13e66421b91fcdc3e2">  408</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="wdbg__sym_8cpp.html#a15dc8f220a123c13e66421b91fcdc3e2">out_have_warned_of_limit</a>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a8a549554e5f5b8248745ddbffce2314f">  410</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wdbg__sym_8cpp.html#a8a549554e5f5b8248745ddbffce2314f">out_init</a>(<span class="keywordtype">wchar_t</span>* buf, <span class="keywordtype">size_t</span> max_chars)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;{</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    out_pos = buf;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    out_chars_left = max_chars;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    out_have_warned_of_overflow = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    out_have_warned_of_limit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">  419</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* fmt, ...)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;{</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    va_list args;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    va_start(args, fmt);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// use vswprintf, not vswprintf_s, because we want to gracefully</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// handle buffer overflows</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordtype">int</span> len = vswprintf(out_pos, out_chars_left, fmt, args);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    va_end(args);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// success</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span>(len &gt;= 0)</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        out_pos += len;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="comment">// make sure out_chars_left remains nonnegative</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">if</span>((<span class="keywordtype">size_t</span>)len &gt; out_chars_left)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <a class="code" href="debug_8h.html#aefb9baa9a06d990a0f1c4a5415f53fef">DEBUG_WARN_ERR</a>(<a class="code" href="namespaceERR.html#a601b15172182f14bec79c698f244862b">ERR::LOGIC</a>); <span class="comment">// apparently wrote more than out_chars_left</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            len = (int)out_chars_left;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        out_chars_left -= len;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// no more room left</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">// the buffer really is full yet out_chars_left may not be 0</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="comment">// (since it isn&#39;t updated if vswprintf returns -1).</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">// must be set so subsequent calls don&#39;t try to squeeze stuff in.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        out_chars_left = 0;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment">// write a warning into the output buffer (once) so it isn&#39;t</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment">// abruptly cut off (which looks like an error)</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">if</span>(!out_have_warned_of_overflow)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            out_have_warned_of_overflow = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="comment">// with the current out_pos / out_chars_left variables, there&#39;s</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="comment">// no way of knowing where the buffer actually ends. no matter;</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="comment">// we&#39;ll just put the warning before out_pos and eat into the</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="comment">// second newest text.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">wchar_t</span> text[] = L<span class="stringliteral">&quot;(no more room in buffer)&quot;</span>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <a class="code" href="secure__crt_8h.html#a69996e159a04a5106429a47c52739bab">wcscpy_s</a>(out_pos-<a class="code" href="code__annotation_8h.html#ab198d3720ba4ffbe006bc88095210798">ARRAY_SIZE</a>(text), <a class="code" href="code__annotation_8h.html#ab198d3720ba4ffbe006bc88095210798">ARRAY_SIZE</a>(text), text); <span class="comment">// safe</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a89020aad6af00ddef5bc90e5e61f5af9">  465</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wdbg__sym_8cpp.html#a89020aad6af00ddef5bc90e5e61f5af9">out_erase</a>(<span class="keywordtype">size_t</span> num_chars)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">// don&#39;t do anything if end of buffer was hit (prevents repeatedly</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="comment">// scribbling over the last few bytes).</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">if</span>(out_have_warned_of_overflow)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    out_chars_left += (<a class="code" href="wposix__types_8h.html#af10f4c58d91a6fa30ccc8a19d0ecbf48">ssize_t</a>)num_chars;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    out_pos -= num_chars;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    *out_pos = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="comment">// make sure it&#39;s 0-terminated in case there is no further output.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;}</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">// (see above)</span></div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a96576fe814022390bc67b1fcc1cec9dc">  480</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wdbg__sym_8cpp.html#a96576fe814022390bc67b1fcc1cec9dc">out_latch_pos</a>()</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;{</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    out_have_warned_of_limit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    out_latched_pos = <a class="code" href="wdbg__sym_8cpp.html#aede03f1783dbca279cf77f4fd9978622">out_pos</a>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">// (see above)</span></div>
<div class="line"><a name="l00488"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#aa76d463f1c26ddcf9a23a46276c09c1d">  488</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#aa76d463f1c26ddcf9a23a46276c09c1d">out_check_limit</a>()</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span>(out_have_warned_of_limit)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a6eb0483e0b6649d8986ac92e692833ca">INFO::SYM_SUPPRESS_OUTPUT</a>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span>(out_pos - out_latched_pos &gt; 3000)    <span class="comment">// ~30 lines</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        out_have_warned_of_limit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceERR.html#ab1b34580fe91b832f31479d5b4e47ecd">ERR::SYM_SINGLE_SYMBOL_LIMIT</a>;    <span class="comment">// NOWARN</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">// no limit hit, proceed normally</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;}</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">//----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a502b06aa5ad25116c775d201326bad52">  504</a></span>&#160;<span class="preprocessor">#define INDENT STMT(for(size_t i__ = 0; i__ &lt;= state.level; i__++) out(L&quot;    &quot;);)</span></div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a54a44b67847f9c02f71d2322e20a5207">  505</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define UNINDENT STMT(out_erase((state.level+1)*4);)</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">// does it look like an ASCII string is located at &lt;addr&gt;?</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">// set &lt;stride&gt; to 2 to search for WCS-2 strings (of western characters!).</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">// called by dump_sequence for its string special-case.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">// algorithm: scan the &quot;string&quot; and count # text chars vs. garbage.</span></div>
<div class="line"><a name="l00513"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a3a1e0e825b68c02515c082ec6a89c358">  513</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="wdbg__sym_8cpp.html#a3a1e0e825b68c02515c082ec6a89c358">is_string</a>(<span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <span class="keywordtype">size_t</span> stride)</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;{</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// note: access violations are caught by dump_sym; output is &quot;?&quot;.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordtype">int</span> score = 0;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="comment">// current character is:</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> c = *p &amp; 0xff;    <span class="comment">// prevent sign extension</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        p += stride;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="comment">// .. text</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">if</span>(isalnum(c))</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            score += 5;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="comment">// .. end of string</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!c)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">// .. garbage</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!isprint(c))</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            score -= 4;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="comment">// got enough information either way =&gt; done.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="comment">// (we don&#39;t want to unnecessarily scan huge binary arrays)</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">if</span>(abs(score) &gt;= 10)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    }</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">return</span> (score &gt; 0);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">// forward decl; called by dump_sequence and some of dump_sym_*.</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a375b9c3836d38112b167885bd69ecaee">dump_sym</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> <span class="keywordtype">id</span>, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">// from cvconst.h</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">// rationale: we don&#39;t provide a get_register routine, since only the</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">// value of FP is known to dump_frame_cb (via STACKFRAME64).</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">// displaying variables stored in registers is out of the question;</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">// all we can do is display FP-relative variables.</span></div>
<div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ac89176dc7e6070d6dd1db0e28718c04f">  553</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="wdbg__sym_8cpp.html#ac89176dc7e6070d6dd1db0e28718c04f">CV_HREG_e</a></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;{</div>
<div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ac89176dc7e6070d6dd1db0e28718c04fa686234c1e4246d231f77e419541dcdd6">  555</a></span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ac89176dc7e6070d6dd1db0e28718c04fa686234c1e4246d231f77e419541dcdd6">CV_REG_EBP</a> = 22,</div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ac89176dc7e6070d6dd1db0e28718c04fabe0f75c145fdcd4edc7e752ef9dcd16d">  556</a></span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ac89176dc7e6070d6dd1db0e28718c04fabe0f75c145fdcd4edc7e752ef9dcd16d">CV_AMD64_RBP</a> = 334</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;};</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a0065a4b1c997cc9a058f923bdc7c67d6">  560</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wdbg__sym_8cpp.html#a0065a4b1c997cc9a058f923bdc7c67d6">dump_error</a>(<a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> err)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;{</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">switch</span>(err)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="comment">// no error =&gt; no output</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceERR.html#ab1b34580fe91b832f31479d5b4e47ecd">ERR::SYM_SINGLE_SYMBOL_LIMIT</a>:</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(too much output; skipping to next top-level symbol)&quot;</span>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceERR.html#a083e998a5b5fc9733ea54a58d12ed160">ERR::SYM_UNRETRIEVABLE_STATIC</a>:</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(unavailable - located in another module)&quot;</span>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceERR.html#a01bf84993640ee84e262526265801397">ERR::SYM_UNRETRIEVABLE</a>:</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(unavailable)&quot;</span>);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>:</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(unavailable - type info request failed (GLE=%d))&quot;</span>, GetLastError());</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceERR.html#a9bf1f8e51c0fe47e2387d1ddc796eaac">ERR::SYM_INTERNAL_ERROR</a>:</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(unavailable - internal error)\r\n&quot;</span>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceINFO.html#a6eb0483e0b6649d8986ac92e692833ca">INFO::SYM_SUPPRESS_OUTPUT</a>:</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="comment">// not an error; do not output anything. handled by caller.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(unavailable - unspecified error 0x%X (%d))&quot;</span>, err, err);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;}</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">// moved out of dump_sequence.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a32debd8aeab652900d7c04699d58b89b">  593</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a32debd8aeab652900d7c04699d58b89b">dump_string</a>(<span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <span class="keywordtype">size_t</span> el_size)</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;{</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">// not char or wchar_t string</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">if</span>(el_size != <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) &amp;&amp; el_size != <span class="keyword">sizeof</span>(<span class="keywordtype">wchar_t</span>))</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a19222f05a0d3a10909e544e64566b120">INFO::CANNOT_HANDLE</a>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">// not text</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="wdbg__sym_8cpp.html#a3a1e0e825b68c02515c082ec6a89c358">is_string</a>(p, el_size))</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a19222f05a0d3a10909e544e64566b120">INFO::CANNOT_HANDLE</a>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordtype">wchar_t</span> buf[512];</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span>(el_size == <span class="keyword">sizeof</span>(<span class="keywordtype">wchar_t</span>))</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        wcsncpy(buf, (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>*)p, <a class="code" href="code__annotation_8h.html#ab198d3720ba4ffbe006bc88095210798">ARRAY_SIZE</a>(buf)); <span class="comment">// can&#39;t use wcscpy_s because p might be too long</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <a class="code" href="secure__crt_8h.html#a69996e159a04a5106429a47c52739bab">wcscpy_s</a>(buf+<a class="code" href="code__annotation_8h.html#ab198d3720ba4ffbe006bc88095210798">ARRAY_SIZE</a>(buf)-4, 4, L<span class="stringliteral">&quot;...&quot;</span>); <span class="comment">// ensure null-termination</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="comment">// convert to wchar_t</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="code__annotation_8h.html#ab198d3720ba4ffbe006bc88095210798">ARRAY_SIZE</a>(buf)-1; i++)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            buf[i] = (<a class="code" href="wgl_8h.html#a9026fbe0621f8d881c7bc984a03c8b06">wchar_t</a>)p[i];</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="keywordflow">if</span>(buf[i] == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        buf[i] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;\&quot;%ls\&quot;&quot;</span>, buf);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;}</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">// moved out of dump_sequence.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a370cced58fb8db25dc924ed1fe9f5366">  627</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wdbg__sym_8cpp.html#a370cced58fb8db25dc924ed1fe9f5366">seq_determine_formatting</a>(<span class="keywordtype">size_t</span> el_size, <span class="keywordtype">size_t</span> el_count, <span class="keywordtype">bool</span>* fits_on_one_line, <span class="keywordtype">size_t</span>* num_elements_to_show)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;{</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span>(el_size == <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>))</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        *fits_on_one_line = el_count &lt;= 16;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        *num_elements_to_show = std::min((<span class="keywordtype">size_t</span>)16u, el_count);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(el_size &lt;= <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>))</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        *fits_on_one_line = el_count &lt;= 8;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        *num_elements_to_show = std::min((<span class="keywordtype">size_t</span>)12u, el_count);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        *fits_on_one_line = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        *num_elements_to_show = std::min((<span class="keywordtype">size_t</span>)8u, el_count);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// make sure empty containers are displayed with [0] {}, otherwise</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">// the lack of output looks like an error.</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span>(!el_count)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        *fits_on_one_line = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;}</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a2ee1c9e08e0aceabd3b598de61b84c9b">  652</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a2ee1c9e08e0aceabd3b598de61b84c9b">dump_sequence</a>(<a class="code" href="debug__stl_8h.html#a8477a1a5b8cf8f0369145b5dca97551a">DebugStlIterator</a> el_iterator, <span class="keywordtype">void</span>* <span class="keyword">internal</span>, <span class="keywordtype">size_t</span> el_count, <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> el_type_id, <span class="keywordtype">size_t</span> el_size, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>)</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;{</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* el_p = 0; <span class="comment">// avoid &quot;uninitialized&quot; warning</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// special case: display as a string if the sequence looks to be text.</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="comment">// do this only if container isn&#39;t empty because the otherwise the</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">// iterator may crash.</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">if</span>(el_count)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        el_p = el_iterator(<span class="keyword">internal</span>, el_size);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> ret = <a class="code" href="wdbg__sym_8cpp.html#a32debd8aeab652900d7c04699d58b89b">dump_string</a>(el_p, el_size);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">if</span>(ret == <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// choose formatting based on element size and count</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordtype">bool</span> fits_on_one_line;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordtype">size_t</span> num_elements_to_show;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#a370cced58fb8db25dc924ed1fe9f5366">seq_determine_formatting</a>(el_size, el_count, &amp;fits_on_one_line, &amp;num_elements_to_show);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;[%d] &quot;</span>, el_count);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    state.<a class="code" href="structDumpState.html#a990f52391ca7cfb340dded928477deaa">level</a>++;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(fits_on_one_line? L<span class="stringliteral">&quot;{ &quot;</span> : L<span class="stringliteral">&quot;\r\n&quot;</span>);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; num_elements_to_show; i++)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keywordflow">if</span>(!fits_on_one_line)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <a class="code" href="wdbg__sym_8cpp.html#a502b06aa5ad25116c775d201326bad52">INDENT</a>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> err = <a class="code" href="wdbg__sym_8cpp.html#a375b9c3836d38112b167885bd69ecaee">dump_sym</a>(el_type_id, el_p, state);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        el_p = el_iterator(<span class="keyword">internal</span>, el_size);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="comment">// there was no output for this child; undo its indentation (if any),</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="comment">// skip everything below and proceed with the next child.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="keywordflow">if</span>(err == <a class="code" href="namespaceINFO.html#a6eb0483e0b6649d8986ac92e692833ca">INFO::SYM_SUPPRESS_OUTPUT</a>)</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            <span class="keywordflow">if</span>(!fits_on_one_line)</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                <a class="code" href="wdbg__sym_8cpp.html#a54a44b67847f9c02f71d2322e20a5207">UNINDENT</a>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#a0065a4b1c997cc9a058f923bdc7c67d6">dump_error</a>(err);    <span class="comment">// nop if err == INFO::OK</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="comment">// add separator unless this is the last element (can&#39;t just</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="comment">// erase below due to additional &quot;...&quot;).</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keywordflow">if</span>(i != num_elements_to_show-1)</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(fits_on_one_line? L<span class="stringliteral">&quot;, &quot;</span> : L<span class="stringliteral">&quot;\r\n&quot;</span>);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">if</span>(err == <a class="code" href="namespaceERR.html#ab1b34580fe91b832f31479d5b4e47ecd">ERR::SYM_SINGLE_SYMBOL_LIMIT</a>)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }   <span class="comment">// for each child</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// indicate some elements were skipped</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">if</span>(el_count != num_elements_to_show)</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot; ...&quot;</span>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    state.<a class="code" href="structDumpState.html#a990f52391ca7cfb340dded928477deaa">level</a>--;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span>(fits_on_one_line)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot; }&quot;</span>);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;}</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div>
<div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a562b839da4d7fd94123555678d7731c1">  715</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* <a class="code" href="wdbg__sym_8cpp.html#a562b839da4d7fd94123555678d7731c1">array_iterator</a>(<span class="keywordtype">void</span>* <span class="keyword">internal</span>, <span class="keywordtype">size_t</span> el_size)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;{</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>*&amp; pos = *(<span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>**)<span class="keyword">internal</span>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* cur_pos = pos;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    pos += el_size;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">return</span> cur_pos;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div>
<div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ae734fac31ae23656ddc1f01464d37866">  724</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#ae734fac31ae23656ddc1f01464d37866">dump_array</a>(<span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <span class="keywordtype">size_t</span> el_count, <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> el_type_id, <span class="keywordtype">size_t</span> el_size, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>)</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;{</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* iterator_internal_pos = p;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a2ee1c9e08e0aceabd3b598de61b84c9b">dump_sequence</a>(<a class="code" href="wdbg__sym_8cpp.html#a562b839da4d7fd94123555678d7731c1">array_iterator</a>, &amp;iterator_internal_pos,</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        el_count, el_type_id, el_size, state);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;}</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a68b471d21415fd846925e4371f975a47">  732</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a68b471d21415fd846925e4371f975a47">CanHandleDataKind</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dataKind)</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;{</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">switch</span>(dataKind)</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfaad96ff0f53b5dc26c0cacd4f5db839a5">DataIsMember</a>:</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="comment">// address is already correct (udt_dump_normal retrieved the offset;</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="comment">// we do it that way so we can check it against the total</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="comment">// UDT size for safety) and SymFromIndex would fail</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a24f9efb658615bcc13e076c5518f3c4c">INFO::SKIPPED</a>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfa3157bbb0d66cc4bc0ed83c406f168b75">DataIsUnknown</a>:</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a61559cb9d273fe4bce52a390cf38bd90">ERR::FAIL</a>);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfa6603206b61dfcc7d63a0e72985569329">DataIsStaticMember</a>:</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="comment">// this symbol is defined as static in another module =&gt;</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="comment">// there&#39;s nothing we can do.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceERR.html#a083e998a5b5fc9733ea54a58d12ed160">ERR::SYM_UNRETRIEVABLE_STATIC</a>;   <span class="comment">// NOWARN</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfa4b96c675dc4859521127b63697f1a304">DataIsLocal</a>:</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfaa3f51b9fc8340e1aefe320dfc751091c">DataIsStaticLocal</a>:</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfaffec5f2aae03730e7de65988215e8141">DataIsParam</a>:</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfabf5e18782dfdb2264f25fdb53e958664">DataIsObjectPtr</a>:</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfae1d71e110f4fc21f57e44b0f9265cff8">DataIsFileStatic</a>:</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfa6a3d4d84eeedaae86688efb735f914df">DataIsGlobal</a>:</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfad00151bfd9df40ccb917b378ca4386dd">DataIsConstant</a>:</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="comment">// ok, can handle</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a601b15172182f14bec79c698f244862b">ERR::LOGIC</a>);    <span class="comment">// UNREACHABLE</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;}</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a25612e5f62861a33c1d1caa84151cd1d">  764</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="wdbg__sym_8cpp.html#a25612e5f62861a33c1d1caa84151cd1d">IsRelativeToFramePointer</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> flags, <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> reg)</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;{</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span>(flags &amp; SYMFLAG_FRAMEREL)    <span class="comment">// note: this is apparently obsolete</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span>((flags &amp; SYMFLAG_REGREL) == 0)</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">if</span>(reg == <a class="code" href="wdbg__sym_8cpp.html#ac89176dc7e6070d6dd1db0e28718c04fa686234c1e4246d231f77e419541dcdd6">CV_REG_EBP</a> || reg == <a class="code" href="wdbg__sym_8cpp.html#ac89176dc7e6070d6dd1db0e28718c04fabe0f75c145fdcd4edc7e752ef9dcd16d">CV_AMD64_RBP</a>)</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;}</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#acc42dc5717e4c52096f4bd2bbe2df58d">  775</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="wdbg__sym_8cpp.html#acc42dc5717e4c52096f4bd2bbe2df58d">IsUnretrievable</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> flags)</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;{</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">// note: it is unlikely that the crashdump register context</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="comment">// contains the correct values for this scope, so symbols</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="comment">// stored in or relative to a general register are unavailable.</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">if</span>(flags &amp; SYMFLAG_REGISTER)</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="comment">// note: IsRelativeToFramePointer is called first, so if we still</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="comment">// see this flag, the base register is not the frame pointer.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">// since we most probably don&#39;t know its value in the current</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="comment">// scope (see above), the symbol is inaccessible.</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">if</span>(flags &amp; SYMFLAG_REGREL)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;}</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div>
<div class="line"><a name="l00793"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#aa9ba7077a86a1c78e63bc6349a09cf98">  793</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#aa9ba7077a86a1c78e63bc6349a09cf98">DetermineSymbolAddress</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> <span class="keywordtype">id</span>, <span class="keyword">const</span> SYMBOL_INFOW* sym, <span class="keyword">const</span> <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>** pp)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;{</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dataKind;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, <span class="keywordtype">id</span>, TI_GET_DATAKIND, &amp;dataKind))</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> ret = <a class="code" href="wdbg__sym_8cpp.html#a68b471d21415fd846925e4371f975a47">CanHandleDataKind</a>(dataKind);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <a class="code" href="status_8h.html#a22caba86ad92480f925337156573125a">RETURN_STATUS_IF_ERR</a>(ret);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">if</span>(ret == <a class="code" href="namespaceINFO.html#a24f9efb658615bcc13e076c5518f3c4c">INFO::SKIPPED</a>)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;    <span class="comment">// pp is already correct</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="comment">// note: we have not yet observed a non-zero TI_GET_ADDRESSOFFSET or</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="comment">// TI_GET_ADDRESS, and TI_GET_OFFSET is apparently equal to sym-&gt;Address.</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="comment">// get address</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    uintptr_t addr = (uintptr_t)sym-&gt;Address;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="wdbg__sym_8cpp.html#a25612e5f62861a33c1d1caa84151cd1d">IsRelativeToFramePointer</a>(sym-&gt;Flags, sym-&gt;Register))</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        addr += (uintptr_t)state.<a class="code" href="structDumpState.html#a949ed74cc3ce3b9c293100b079904eee">stackFrame</a>-&gt;AddrFrame.Offset;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="wdbg__sym_8cpp.html#acc42dc5717e4c52096f4bd2bbe2df58d">IsUnretrievable</a>(sym-&gt;Flags))</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceERR.html#a01bf84993640ee84e262526265801397">ERR::SYM_UNRETRIEVABLE</a>;  <span class="comment">// NOWARN</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    *pp = (<span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>*)(uintptr_t)addr;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <a class="code" href="debug_8cpp.html#ab660871a1133ed786b46769c052a812b">debug_printf</a>(L<span class="stringliteral">&quot;SYM| %ls at %p  flags=%X dk=%d sym-&gt;addr=%I64X fp=%I64x\n&quot;</span>, sym-&gt;Name, *pp, sym-&gt;Flags, dataKind, sym-&gt;Address, state.<a class="code" href="structDumpState.html#a949ed74cc3ce3b9c293100b079904eee">stackFrame</a>-&gt;AddrFrame.Offset);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;}</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">// dump routines for each dbghelp symbol type</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">// these functions return != 0 if they&#39;re not able to produce any</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment">// reasonable output at all; the caller (dump_sym_data, dump_sequence, etc.)</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">// will display the appropriate error message via dump_error.</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">// called by dump_sym; lock is held.</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a8fe27a758e5185b8a41672442ec346fa">  829</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a8fe27a758e5185b8a41672442ec346fa">dump_sym_array</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> type_id, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;{ </div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    ULONG64 size64 = 0;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_LENGTH, &amp;size64))</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> size = (size_t)size64;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">// get element count and size</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> el_type_id = 0;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_TYPEID, &amp;el_type_id))</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="comment">// .. workaround: TI_GET_COUNT returns total struct size for</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="comment">//    arrays-of-struct. therefore, calculate as size / el_size.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    ULONG64 el_size_;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, el_type_id, TI_GET_LENGTH, &amp;el_size_))</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> el_size = (size_t)el_size_;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <a class="code" href="debug_8h.html#afb70bbb6de1ca63ed5eed1390510cb71">ENSURE</a>(el_size != 0);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_elements = size/el_size;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="debug_8h.html#afb70bbb6de1ca63ed5eed1390510cb71">ENSURE</a>(num_elements != 0);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#ae734fac31ae23656ddc1f01464d37866">dump_array</a>(p, num_elements, el_type_id, el_size, state);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;}</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">// if the current value is a printable character, display in that form.</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">// this isn&#39;t only done in btChar because characters are sometimes stored</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">// in integers.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ac356b342113e6c3d89d84e2047ab6981">  859</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wdbg__sym_8cpp.html#ac356b342113e6c3d89d84e2047ab6981">AppendCharacterIfPrintable</a>(<a class="code" href="types_8h.html#a969c7c1ebb4f70581e040a3034b14ee0">u64</a> data)</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;{</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">if</span>(data &lt; 0x100)</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keywordtype">int</span> c = (int)data;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keywordflow">if</span>(isprint(c))</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot; (&#39;%hc&#39;)&quot;</span>, c);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;}</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div>
<div class="line"><a name="l00870"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a6ab3aa1a116bef649bd5b64fad9460df">  870</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a6ab3aa1a116bef649bd5b64fad9460df">dump_sym_base_type</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> type_id, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>)</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;{</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> base_type;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_BASETYPE, &amp;base_type))</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    ULONG64 size64 = 0;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_LENGTH, &amp;size64))</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> size = (size_t)size64;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="comment">// single out() call. note: we pass a single u64 for all sizes,</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="comment">// which will only work on little-endian systems.</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="comment">// must be declared before goto to avoid W4 warning.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* fmt = L<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <a class="code" href="types_8h.html#a969c7c1ebb4f70581e040a3034b14ee0">u64</a> data = <a class="code" href="byte__order_8cpp.html#a488f656adcce6f50d896d4ef3b2c2238">movzx_le64</a>(p, size);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="comment">// if value is 0xCC..CC (uninitialized mem), we display as hex. </span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="comment">// the output would otherwise be garbage; this makes it obvious.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">// note: be very careful to correctly handle size=0 (e.g. void*).</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; size; i++)</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">if</span>(p[i] != 0xCC)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordflow">if</span>(i == size-1)</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(uninitialized)&quot;</span>);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordflow">switch</span>(base_type)</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="comment">// floating-point</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526af227727df84cd9c4731d00bf548af774">btFloat</a>:</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">if</span>(size == <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>))</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="comment">// NB: the C calling convention calls for float arguments to be</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            <span class="comment">// converted to double. passing `data&#39; wouldn&#39;t work because it&#39;s</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            <span class="comment">// merely a zero-extended 32-bit representation of the float.</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            <span class="keywordtype">float</span> value;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            memcpy(&amp;value, p, <span class="keyword">sizeof</span>(value));</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;%f (0x%08I64X)&quot;</span>, value, data);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(size == <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>))</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;%g (0x%016I64X)&quot;</span>, data, data);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <a class="code" href="debug_8h.html#aefb9baa9a06d990a0f1c4a5415f53fef">DEBUG_WARN_ERR</a>(<a class="code" href="namespaceERR.html#a601b15172182f14bec79c698f244862b">ERR::LOGIC</a>); <span class="comment">// invalid float size</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="comment">// boolean</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ad49f3758e70cf56d6995beedd04131ac">btBool</a>:</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <a class="code" href="debug_8h.html#afb70bbb6de1ca63ed5eed1390510cb71">ENSURE</a>(size == <span class="keyword">sizeof</span>(<span class="keywordtype">bool</span>));</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordflow">if</span>(data == 0 || data == 1)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;%ls&quot;</span>, data? L<span class="stringliteral">&quot;true &quot;</span> : L<span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(bool)0x%02I64X&quot;</span>, data);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="comment">// integers (displayed as decimal and hex)</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="comment">// note: 0x00000000 can get annoying (0 would be nicer),</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="comment">// but it indicates the variable size and makes for consistently</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="comment">// formatted structs/arrays. (0x1234 0 0x5678 is ugly)</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526add8226f5758099a1441724364e5993f6">btInt</a>:</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a86fe058be72472cc8e5e12da41b3063d">btLong</a>:</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a425d00b8975d8d8250fc7d878a2224ab">btUInt</a>:</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a7c06ab11284b9cd2f76df42e7bebfb38">btULong</a>:</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">if</span>(size == 1)</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            <span class="comment">// _TUCHAR</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            <span class="keywordflow">if</span>(state.<a class="code" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">indirection</a>)</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                state.<a class="code" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">indirection</a> = 0;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#ae734fac31ae23656ddc1f01464d37866">dump_array</a>(p, 8, type_id, size, state);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            }</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            fmt = L<span class="stringliteral">&quot;%I64d (0x%02I64X)&quot;</span>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(size == 2)</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            fmt = L<span class="stringliteral">&quot;%I64d (0x%04I64X)&quot;</span>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(size == 4)</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            fmt = L<span class="stringliteral">&quot;%I64d (0x%08I64X)&quot;</span>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(size == 8)</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            fmt = L<span class="stringliteral">&quot;%I64d (0x%016I64X)&quot;</span>;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            <a class="code" href="debug_8h.html#aefb9baa9a06d990a0f1c4a5415f53fef">DEBUG_WARN_ERR</a>(<a class="code" href="namespaceERR.html#a601b15172182f14bec79c698f244862b">ERR::LOGIC</a>); <span class="comment">// invalid size for integers</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(fmt, data, data);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="comment">// character</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a9b23f8704866c0e75b3471a5f2f5a93b">btChar</a>:</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526af1a861dbf80e81561363604629189804">btWChar</a>:</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <a class="code" href="debug_8h.html#afb70bbb6de1ca63ed5eed1390510cb71">ENSURE</a>(size == <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) || size == <span class="keyword">sizeof</span>(<span class="keywordtype">wchar_t</span>));</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="comment">// char*, wchar_t*</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <span class="keywordflow">if</span>(state.<a class="code" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">indirection</a>)</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            state.<a class="code" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">indirection</a> = 0;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#ae734fac31ae23656ddc1f01464d37866">dump_array</a>(p, 8, type_id, size, state);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;%d&quot;</span>, data);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ac356b342113e6c3d89d84e2047ab6981">AppendCharacterIfPrintable</a>(data);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="comment">// note: void* is sometimes indicated as (pointer, btNoType).</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a007a4bf5bd78f5389652358b7ac8596d">btVoid</a>:</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ac3dbdf6b8d103138e3318c38073f7b97">btNoType</a>:</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="comment">// void* - cannot display what it&#39;s pointing to (type unknown).</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <span class="keywordflow">if</span>(state.<a class="code" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">indirection</a>)</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            <a class="code" href="wdbg__sym_8cpp.html#a89020aad6af00ddef5bc90e5e61f5af9">out_erase</a>(4);   <span class="comment">// &quot; -&gt; &quot;</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            fmt = L<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            <a class="code" href="debug_8h.html#aefb9baa9a06d990a0f1c4a5415f53fef">DEBUG_WARN_ERR</a>(<a class="code" href="namespaceERR.html#a601b15172182f14bec79c698f244862b">ERR::LOGIC</a>); <span class="comment">// non-pointer btVoid or btNoType</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <a class="code" href="debug_8h.html#aefb9baa9a06d990a0f1c4a5415f53fef">DEBUG_WARN_ERR</a>(<a class="code" href="namespaceERR.html#a601b15172182f14bec79c698f244862b">ERR::LOGIC</a>); <span class="comment">// unknown type</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="comment">// unsupported complex types</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a28fb64a8f6457e9d125ce3c58f0d9f45">btBCD</a>:</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ae97aff1b319f95719407a49daa6d3161">btCurrency</a>:</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ac6c6e7b6f7b4e3ec4854d87771d66ed8">btDate</a>:</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a08e6f9a73dcb061bc8c3ceed8c533397">btVariant</a>:</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ad21dd2fec96e57eff6ff7c03dcff1e68">btComplex</a>:</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ac1c585ea4212c17f949b7d730a5e8001">btBit</a>:</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a31037e1401828b908d2a9acf0e60960b">btBSTR</a>:</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526aead6fd771496ad5d1954f8338f1fdafe">btHresult</a>:</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceERR.html#aa9e580d389d54c2104f54deaac7aa403">ERR::SYM_UNSUPPORTED</a>;    <span class="comment">// NOWARN</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;}</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div>
<div class="line"><a name="l01006"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a165b7154a3ea7cec30c03485d6f1b3ab"> 1006</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a165b7154a3ea7cec30c03485d6f1b3ab">dump_sym_base_class</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> type_id, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>)</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;{</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> base_class_type_id;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_TYPEID, &amp;base_class_type_id))</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="comment">// this is a virtual base class. we can&#39;t display those because it&#39;d</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="comment">// require reading the VTbl, which is difficult given lack of documentation</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="comment">// and just not worth it.</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> vptr_ofs;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keywordflow">if</span>(pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_VIRTUALBASEPOINTEROFFSET, &amp;vptr_ofs))</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceERR.html#aa9e580d389d54c2104f54deaac7aa403">ERR::SYM_UNSUPPORTED</a>;    <span class="comment">// NOWARN</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a375b9c3836d38112b167885bd69ecaee">dump_sym</a>(base_class_type_id, p, state);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#abc2aa3c4d810a462bacfff6a7a54ab26"> 1025</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#abc2aa3c4d810a462bacfff6a7a54ab26">dump_sym_data</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> <span class="keywordtype">id</span>, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;{</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <a class="code" href="structSYMBOL__INFO__PACKAGEW2.html">SYMBOL_INFO_PACKAGEW2</a> sp;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    SYMBOL_INFOW* sym = &amp;sp.si;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">if</span>(!pSymFromIndexW(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, <span class="keywordtype">id</span>, sym))</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <a class="code" href="status_8h.html#a22caba86ad92480f925337156573125a">RETURN_STATUS_IF_ERR</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;%ls = &quot;</span>, sym-&gt;Name);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    __try</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <a class="code" href="status_8h.html#a22caba86ad92480f925337156573125a">RETURN_STATUS_IF_ERR</a>(<a class="code" href="wdbg__sym_8cpp.html#aa9ba7077a86a1c78e63bc6349a09cf98">DetermineSymbolAddress</a>(<span class="keywordtype">id</span>, sym, state, &amp;p));</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <span class="comment">// display value recursively</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a375b9c3836d38112b167885bd69ecaee">dump_sym</a>(sym-&gt;TypeIndex, p, state);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    __except(EXCEPTION_EXECUTE_HANDLER)</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceERR.html#a9bf1f8e51c0fe47e2387d1ddc796eaac">ERR::SYM_INTERNAL_ERROR</a>; <span class="comment">// NOWARN</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;}</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div>
<div class="line"><a name="l01049"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a457869114e41520fd7b4058caea2d13b"> 1049</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a457869114e41520fd7b4058caea2d13b">dump_sym_enum</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> type_id, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;{</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    ULONG64 size64 = 0;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_LENGTH, &amp;size64))</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> size = (size_t)size64;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keyword">const</span> <a class="code" href="types_8h.html#aa777e5139adfca31612ec04bc2b26845">i64</a> enum_value = <a class="code" href="byte__order_8cpp.html#a235418105f2dcb6f549d3b61536e2fb8">movsx_le64</a>(p, size);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="comment">// get array of child symbols (enumerants).</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> numChildren;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_CHILDRENCOUNT, &amp;numChildren))</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <a class="code" href="structTI__FINDCHILDREN__PARAMS2.html">TI_FINDCHILDREN_PARAMS2</a> fcp(numChildren);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_FINDCHILDREN, &amp;fcp))</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    numChildren = fcp.<a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#ae4f6a0b25d35dd6c5520b494f441d6ed">p</a>.Count;  <span class="comment">// was truncated to maxChildren</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keyword">const</span> <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>* children = fcp.<a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#ae4f6a0b25d35dd6c5520b494f441d6ed">p</a>.ChildId;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="comment">// for each child (enumerant):</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; numChildren; i++)</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> child_data_id = children[i];</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="comment">// get this enumerant&#39;s value. we can&#39;t make any assumptions about</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="comment">// the variant&#39;s type or size  - no restriction is documented.</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="comment">// rationale: VariantChangeType is much less tedious than doing</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="comment">// it manually and guarantees we cover everything. the OLE DLL is</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="comment">// already pulled in by e.g. OpenGL anyway.</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        VARIANT v;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, child_data_id, TI_GET_VALUE, &amp;v))</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">if</span>(VariantChangeType(&amp;v, &amp;v, 0, VT_I8) != S_OK)</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="comment">// it&#39;s the one we want - output its name.</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="keywordflow">if</span>(enum_value == v.llVal)</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* name;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, child_data_id, TI_GET_SYMNAME, &amp;name))</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;%ls&quot;</span>, name);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            LocalFree((HLOCAL)name);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="comment">// we weren&#39;t able to retrieve a matching enum value, but can still</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="comment">// produce reasonable output (the numeric value).</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="comment">// note: could goto here after a SGTI fails, but we fail instead</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="comment">// to make sure those errors are noticed.</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;%I64d&quot;</span>, enum_value);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;}</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01107"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a6b1926d066b58afb5cf8a7495535c270"> 1107</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a6b1926d066b58afb5cf8a7495535c270">dump_sym_function</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(type_id), <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(p), <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(<a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>))</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;{</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a6eb0483e0b6649d8986ac92e692833ca">INFO::SYM_SUPPRESS_OUTPUT</a>;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;}</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div>
<div class="line"><a name="l01115"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a9816493ae2ad878d19da1aeb98c74943"> 1115</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a9816493ae2ad878d19da1aeb98c74943">dump_sym_function_type</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(type_id), <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>)</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;{</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="comment">// this symbol gives class parent, return type, and parameter count.</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="comment">// unfortunately the one thing we care about, its name,</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="comment">// isn&#39;t exposed via TI_GET_SYMNAME, so we resolve it ourselves.</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordtype">wchar_t</span> name[<a class="code" href="debug_8h.html#a8812daf6c623bc504ef46793a87b03c4">DEBUG_SYMBOL_CHARS</a>];</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> err = <a class="code" href="wdbg__sym_8cpp.html#a7d9afd213aa60dd94a1755ab4db6fd64">ResolveSymbol_lk</a>((<span class="keywordtype">void</span>*)p, name, 0, 0);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">if</span>(state.<a class="code" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">indirection</a> == 0)</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;0x%p &quot;</span>, p);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">if</span>(err == <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>)</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(%ls)&quot;</span>, name);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">// do not follow pointers that we have already displayed. this reduces</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">// clutter a bit and prevents infinite recursion for cyclical references</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">// (e.g. via struct S { S* p; } s; s.p = &amp;s;)</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">// note: allocating memory dynamically would cause trouble if dumping</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">// the stack from within memory-related code (the allocation hook would</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">// be reentered, which is not permissible).</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div>
<div class="line"><a name="l01142"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ab569e94c1f264179ab3227f3b9d51b47"> 1142</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="wdbg__sym_8cpp.html#ab569e94c1f264179ab3227f3b9d51b47">maxVisited</a> = 1000;</div>
<div class="line"><a name="l01143"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#aba12521da29d1bb11fe5718fdcea9b73"> 1143</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* <a class="code" href="wdbg__sym_8cpp.html#aba12521da29d1bb11fe5718fdcea9b73">visited</a>[<a class="code" href="wdbg__sym_8cpp.html#ab569e94c1f264179ab3227f3b9d51b47">maxVisited</a>];</div>
<div class="line"><a name="l01144"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#aaeb34a49eebebc3a8eabcf1ec151cf69"> 1144</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="wdbg__sym_8cpp.html#aaeb34a49eebebc3a8eabcf1ec151cf69">numVisited</a>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div>
<div class="line"><a name="l01146"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a0e7abe4493965d414a749ac84cc7e0ea"> 1146</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wdbg__sym_8cpp.html#a0e7abe4493965d414a749ac84cc7e0ea">ptr_reset_visited</a>()</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;{</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    numVisited = 0;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;}</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a43f9c01b0ec7f2febb22915bbe63a29c"> 1151</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="wdbg__sym_8cpp.html#a43f9c01b0ec7f2febb22915bbe63a29c">ptr_already_visited</a>(<span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p)</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;{</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="wdbg__sym_8cpp.html#aaeb34a49eebebc3a8eabcf1ec151cf69">numVisited</a>; i++)</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keywordflow">if</span>(visited[i] == p)</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    }</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordflow">if</span>(numVisited &lt; maxVisited)</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        visited[<a class="code" href="wdbg__sym_8cpp.html#aaeb34a49eebebc3a8eabcf1ec151cf69">numVisited</a>] = p;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        numVisited++;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    }</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="comment">// capacity exceeded</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <span class="comment">// warn user - but only once (we can&#39;t use the regular</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        <span class="comment">// debug_DisplayError and wdbg_assert doesn&#39;t have a</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="comment">// suppress mechanism)</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">bool</span> haveComplained;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <span class="keywordflow">if</span>(!haveComplained)</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;            <a class="code" href="debug_8cpp.html#ab660871a1133ed786b46769c052a812b">debug_printf</a>(L<span class="stringliteral">&quot;WARNING: ptr_already_visited: capacity exceeded, increase maxVisited\n&quot;</span>);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            <a class="code" href="debug_8h.html#a736a83614247147ed4c43459013b3a81">debug_break</a>();</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            haveComplained = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    }</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;}</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div>
<div class="line"><a name="l01183"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a1f85fd8c8e3ecc9bf9d03c751609f124"> 1183</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a1f85fd8c8e3ecc9bf9d03c751609f124">dump_sym_pointer</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> type_id, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>)</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;{</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    ULONG64 size64 = 0;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_LENGTH, &amp;size64))</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> size = (size_t)size64;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="comment">// read+output pointer&#39;s value.</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    p = (<span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>*)(uintptr_t)<a class="code" href="byte__order_8cpp.html#a488f656adcce6f50d896d4ef3b2c2238">movzx_le64</a>(p, size);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;0x%p&quot;</span>, p);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="comment">// bail if it&#39;s obvious the pointer is bogus</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">// (=&gt; can&#39;t display what it&#39;s pointing to)</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="debug_8h.html#a3acd24c57882345e6ea84a5ed699678d">debug_IsPointerBogus</a>(p))</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="comment">// avoid duplicates and circular references</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="wdbg__sym_8cpp.html#a43f9c01b0ec7f2febb22915bbe63a29c">ptr_already_visited</a>(p))</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot; (see above)&quot;</span>);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    }</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="comment">// display what the pointer is pointing to.</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="comment">// if the pointer is invalid (despite &quot;bogus&quot; check above),</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="comment">// dump_data_sym recovers via SEH and prints an error message.</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="comment">// if the pointed-to value turns out to uninteresting (e.g. void*),</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="comment">// the responsible dump_sym* will erase &quot;-&gt;&quot;, leaving only address.</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot; -&gt; &quot;</span>);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_TYPEID, &amp;type_id))</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="comment">// prevent infinite recursion just to be safe (shouldn&#39;t happen)</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="keywordflow">if</span>(state.<a class="code" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">indirection</a> &gt;= maxIndirection)</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a8113d32e08ddff16fce8257ba0549391">ERR::SYM_NESTING_LIMIT</a>);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    state.<a class="code" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">indirection</a>++;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a375b9c3836d38112b167885bd69ecaee">dump_sym</a>(type_id, p, state);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;}</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div>
<div class="line"><a name="l01226"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#aaa4cd71d64c26935548a01da5e52ba88"> 1226</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#aaa4cd71d64c26935548a01da5e52ba88">dump_sym_typedef</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> type_id, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>)</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;{</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_TYPEID, &amp;type_id))</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a375b9c3836d38112b167885bd69ecaee">dump_sym</a>(type_id, p, state);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;}</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment">// determine type and size of the given child in a UDT.</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">// useful for UDTs that contain typedefs describing their contents,</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment">// e.g. value_type in STL containers.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ac6aecc85b5a7eefb63f60fb331fccb49"> 1240</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#ac6aecc85b5a7eefb63f60fb331fccb49">udt_get_child_type</a>(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* child_name, ULONG numChildren, <span class="keyword">const</span> <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>* children, <span class="keyword">const</span> <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>, <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>* el_type_id, <span class="keywordtype">size_t</span>* el_size)</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;{</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="keyword">const</span> <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> lastError = GetLastError();</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    *el_type_id = 0;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    *el_size = 0;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordflow">for</span>(ULONG i = 0; i &lt; numChildren; i++)</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="keyword">const</span> <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> child_id = children[i];</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <a class="code" href="structSYMBOL__INFO__PACKAGEW2.html">SYMBOL_INFO_PACKAGEW2</a> sp;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        SYMBOL_INFOW* sym = &amp;sp.si;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        <span class="keywordflow">if</span>(!pSymFromIndexW(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, child_id, sym))</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            <span class="comment">// this happens for several UDTs; cause is unknown.</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <a class="code" href="debug_8h.html#afb70bbb6de1ca63ed5eed1390510cb71">ENSURE</a>(GetLastError() == ERROR_NOT_FOUND);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        }</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <span class="keywordflow">if</span>(!wcscmp(sym-&gt;Name, child_name))</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        {</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            *el_type_id = sym-&gt;TypeIndex;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            *el_size = (size_t)sym-&gt;Size;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        }</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    SetLastError(lastError);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="comment">// (happens if called for containers that are treated as STL but are not)</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceERR.html#a154a7ed5da86ee631b2f75f2d5c41c16">ERR::SYM_CHILD_NOT_FOUND</a>;    <span class="comment">// NOWARN</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;}</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div>
<div class="line"><a name="l01274"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a620fa6f2abd5528b3614f3b9c4635bf1"> 1274</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a620fa6f2abd5528b3614f3b9c4635bf1">udt_dump_std</a>(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* type_name, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <span class="keywordtype">size_t</span> size, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>, ULONG numChildren, <span class="keyword">const</span> <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>* children)</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;{</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> err;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="comment">// not a C++ standard library object; can&#39;t handle it.</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span>(wcsncmp(type_name, L<span class="stringliteral">&quot;std::&quot;</span>, 5) != 0)</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a19222f05a0d3a10909e544e64566b120">INFO::CANNOT_HANDLE</a>;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="comment">// check for C++ objects that should be displayed via udt_dump_normal.</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="comment">// C++03 containers are special-cased and the rest (apart from those here)</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="comment">// are ignored, because for the most part they are spew.</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="keywordflow">if</span>(!wcsncmp(type_name, L<span class="stringliteral">&quot;std::pair&quot;</span>, 9) ||</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;       !wcsncmp(type_name, L<span class="stringliteral">&quot;std::tr1::&quot;</span>, 10))</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a19222f05a0d3a10909e544e64566b120">INFO::CANNOT_HANDLE</a>;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="comment">// display contents of STL containers</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="comment">// .. get element type</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> el_type_id;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordtype">size_t</span> el_size;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    err = <a class="code" href="wdbg__sym_8cpp.html#ac6aecc85b5a7eefb63f60fb331fccb49">udt_get_child_type</a>(L<span class="stringliteral">&quot;value_type&quot;</span>, numChildren, children, state, &amp;el_type_id, &amp;el_size);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">if</span>(err != <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>)</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        <span class="keywordflow">goto</span> not_valid_container;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="comment">// .. get iterator and # elements</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordtype">size_t</span> el_count;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <a class="code" href="debug__stl_8h.html#a8477a1a5b8cf8f0369145b5dca97551a">DebugStlIterator</a> el_iterator;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a> it_mem[<a class="code" href="debug__stl_8h.html#ada20ee7c665d4923ed75e01e8db9e6fa">DEBUG_STL_MAX_ITERATOR_SIZE</a>];</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    err = <a class="code" href="debug__stl_8cpp.html#a1d853e3ae31191c185aa3046e967d433">debug_stl_get_container_info</a>(type_name, p, size, el_size, &amp;el_count, &amp;el_iterator, it_mem);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordflow">if</span>(err != <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>)</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        <span class="keywordflow">goto</span> not_valid_container;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a2ee1c9e08e0aceabd3b598de61b84c9b">dump_sequence</a>(el_iterator, it_mem, el_count, el_type_id, el_size, state);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;not_valid_container:</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="comment">// build and display detailed &quot;error&quot; message.</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordtype">wchar_t</span> buf[100];</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* text;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="comment">// .. object named std::* but doesn&#39;t include a &quot;value_type&quot; child =&gt;</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="comment">//    it&#39;s a non-STL C++ stdlib object. wasn&#39;t handled by the</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <span class="comment">//    special case above, so we just display its simplified type name</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="comment">//    (the contents are usually spew).</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordflow">if</span>(err == <a class="code" href="namespaceERR.html#a154a7ed5da86ee631b2f75f2d5c41c16">ERR::SYM_CHILD_NOT_FOUND</a>)</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        text = L<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="comment">// .. not one of the containers we can analyse.</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(err == <a class="code" href="namespaceERR.html#a08badff5681fbce8cebd56abd61c3165">ERR::STL_CNT_UNKNOWN</a>)</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        text = L<span class="stringliteral">&quot;unknown &quot;</span>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(err == <a class="code" href="namespaceERR.html#a0da6ecb1f92f0019d51c8d988d3e137a">ERR::STL_CNT_UNSUPPORTED</a>)</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        text = L<span class="stringliteral">&quot;unsupported &quot;</span>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="comment">// .. container of a known type but contents are invalid.</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(err == <a class="code" href="namespaceERR.html#a8fc260f86982d7bcac870392a253628e">ERR::STL_CNT_INVALID</a>)</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        text = L<span class="stringliteral">&quot;uninitialized/invalid &quot;</span>;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="comment">// .. some other error encountered</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    {</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        <span class="keywordtype">wchar_t</span> description[200];</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        (void)<a class="code" href="status_8cpp.html#a8e3dc27c96846a93945c5a290de65e63">StatusDescription</a>(err, description, <a class="code" href="code__annotation_8h.html#ab198d3720ba4ffbe006bc88095210798">ARRAY_SIZE</a>(description));</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <a class="code" href="secure__crt_8h.html#a16ed5e57e11dce2157187d74e662cdd7">swprintf_s</a>(buf, <a class="code" href="code__annotation_8h.html#ab198d3720ba4ffbe006bc88095210798">ARRAY_SIZE</a>(buf), L<span class="stringliteral">&quot;error \&quot;%ls\&quot; while analyzing &quot;</span>, description);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        text = buf;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="comment">// (debug_stl modifies its input string in-place; type_name is</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="comment">// a const string returned by dbghelp)</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordtype">wchar_t</span> type_name_buf[<a class="code" href="debug_8h.html#a8812daf6c623bc504ef46793a87b03c4">DEBUG_SYMBOL_CHARS</a>];</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <a class="code" href="secure__crt_8h.html#a69996e159a04a5106429a47c52739bab">wcscpy_s</a>(type_name_buf, <a class="code" href="code__annotation_8h.html#ab198d3720ba4ffbe006bc88095210798">ARRAY_SIZE</a>(type_name_buf), type_name);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(%ls%ls)&quot;</span>, text, <a class="code" href="debug__stl_8cpp.html#ac74b36240b7afc24cee30f62defbfd62">debug_stl_simplify_name</a>(type_name_buf));</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;}</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div>
<div class="line"><a name="l01342"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#afe6171bfb69d5690b2afbed23995bb90"> 1342</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="wdbg__sym_8cpp.html#afe6171bfb69d5690b2afbed23995bb90">udt_should_suppress</a>(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* type_name)</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;{</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="comment">// specialized HANDLEs are defined as pointers to structs by</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="comment">// DECLARE_HANDLE. we only want the numerical value (pointer address),</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="comment">// so prevent these structs from being displayed.</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="comment">// note: no need to check for indirection; these are only found in</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="comment">// HANDLEs (which are pointers).</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="comment">// removed obsolete defs: HEVENT, HFILE, HUMPD</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordflow">if</span>(type_name[0] != <span class="charliteral">&#39;H&#39;</span>)</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        <span class="keywordflow">goto</span> not_handle;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="preprocessor">#define SUPPRESS_HANDLE(name) if(!wcscmp(type_name, L#name L&quot;__&quot;)) return true;</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="preprocessor"></span>    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HACCEL);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HBITMAP);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HBRUSH);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HCOLORSPACE);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HCURSOR);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HDC);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HENHMETAFILE);</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HFONT);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HGDIOBJ);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HGLOBAL);</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HGLRC);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HHOOK);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HICON);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HIMAGELIST);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HIMC);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(<a class="code" href="structHINSTANCE____.html">HINSTANCE</a>);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HKEY);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HKL);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HKLOCAL);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HMENU);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HMETAFILE);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HMODULE);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HMONITOR);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HPALETTE);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HPEN);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HRGN);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HRSRC);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HSTR);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HTASK);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HWINEVENTHOOK);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HWINSTA);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a>(HWND);</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;not_handle:</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;}</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div>
<div class="line"><a name="l01391"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a2389be3a3c399c4dabfc46ca50755b7f"> 1391</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a2389be3a3c399c4dabfc46ca50755b7f">udt_dump_suppressed</a>(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* type_name, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(p), <span class="keywordtype">size_t</span> <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(size), <a class="code" href="structDumpState.html">DumpState</a> <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>, ULONG <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(numChildren), <span class="keyword">const</span> <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>* <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(children))</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;{</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="wdbg__sym_8cpp.html#afe6171bfb69d5690b2afbed23995bb90">udt_should_suppress</a>(type_name))</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a19222f05a0d3a10909e544e64566b120">INFO::CANNOT_HANDLE</a>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="comment">// the data symbol is pointer-to-UDT. since we won&#39;t display its</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="comment">// contents, leave only the pointer&#39;s value.</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keywordflow">if</span>(state.<a class="code" href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">indirection</a>)</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#a89020aad6af00ddef5bc90e5e61f5af9">out_erase</a>(4);   <span class="comment">// &quot; -&gt; &quot;</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="comment">// indicate something was deliberately left out</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="comment">// (otherwise, lack of output may be taken for an error)</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot; (..)&quot;</span>);</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;}</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment">// (by now) non-trivial heuristic to determine if a UDT should be</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">// displayed on one line or several. split out of udt_dump_normal.</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a1b244be82630635e4e3e68b26fa65296"> 1411</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="wdbg__sym_8cpp.html#a1b244be82630635e4e3e68b26fa65296">udt_fits_on_one_line</a>(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* type_name, <span class="keywordtype">size_t</span> child_count, <span class="keywordtype">size_t</span> total_size)</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;{</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="comment">// special case: always put CStr* on one line</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="comment">// (std::*string are displayed directly, but these go through</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="comment">// udt_dump_normal. we want to avoid the ensuing 3-line output)</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <span class="keywordflow">if</span>(!wcscmp(type_name, L<span class="stringliteral">&quot;CStr&quot;</span>) || !wcscmp(type_name, L<span class="stringliteral">&quot;CStr8&quot;</span>) || !wcscmp(type_name, L<span class="stringliteral">&quot;CStrW&quot;</span>))</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="comment">// try to get actual number of relevant children</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="comment">// (typedefs etc. are never displayed, but are included in child_count.</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="comment">// we have to balance that vs. tons of static members, which aren&#39;t</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="comment">// reflected in total_size).</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="comment">// .. prevent division by 0.</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordflow">if</span>(child_count == 0)</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        child_count = 1;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="comment">// special-case a few types that would otherwise be classified incorrectly</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="comment">// (due to having more or less than expected relevant children)</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">if</span>(!wcsncmp(type_name, L<span class="stringliteral">&quot;std::pair&quot;</span>, 9))</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        child_count = 2;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> avg_size = total_size / child_count;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        <span class="comment">// (if 0, no worries - child_count will probably be large and</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <span class="comment">// we return false, which is a safe default)</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="comment">// small UDT with a few (small) members: fits on one line.</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordflow">if</span>(child_count &lt;= 3 &amp;&amp; avg_size &lt;= <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>))</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;}</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div>
<div class="line"><a name="l01443"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a0ede3facab58825705963b78bbc28e41"> 1443</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a0ede3facab58825705963b78bbc28e41">udt_dump_normal</a>(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* type_name, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <span class="keywordtype">size_t</span> size, <a class="code" href="structDumpState.html">DumpState</a> state, ULONG numChildren, <span class="keyword">const</span> <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>* children)</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;{</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="comment">// special case: boost::unordered types are complex and may cause a stack overflow</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <span class="comment">// see http://trac.wildfiregames.com/ticket/1813</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="comment">// TODO: at least give some info about them</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keywordflow">if</span>(!wcsncmp(type_name, L<span class="stringliteral">&quot;boost::unordered&quot;</span>, 16))</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a19222f05a0d3a10909e544e64566b120">INFO::CANNOT_HANDLE</a>;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> fits_on_one_line = <a class="code" href="wdbg__sym_8cpp.html#a1b244be82630635e4e3e68b26fa65296">udt_fits_on_one_line</a>(type_name, numChildren, size);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="comment">// prevent infinite recursion just to be safe (shouldn&#39;t happen)</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">if</span>(state.<a class="code" href="structDumpState.html#a990f52391ca7cfb340dded928477deaa">level</a> &gt;= maxLevel)</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a8113d32e08ddff16fce8257ba0549391">ERR::SYM_NESTING_LIMIT</a>);</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    state.<a class="code" href="structDumpState.html#a990f52391ca7cfb340dded928477deaa">level</a>++;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(fits_on_one_line? L<span class="stringliteral">&quot;{ &quot;</span> : L<span class="stringliteral">&quot;\r\n&quot;</span>);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keywordtype">bool</span> displayed_anything = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordflow">for</span>(ULONG i = 0; i &lt; numChildren; i++)</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    {</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <span class="keyword">const</span> <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> child_id = children[i];</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <span class="comment">// get offset. if not available, skip this child</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="comment">// (we only display data here, not e.g. typedefs)</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> ofs = 0;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, child_id, TI_GET_OFFSET, &amp;ofs))</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <span class="keywordflow">if</span>(ofs &gt;= size)</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        {</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            <a class="code" href="debug_8cpp.html#ab660871a1133ed786b46769c052a812b">debug_printf</a>(L<span class="stringliteral">&quot;INVALID_UDT %ls %d %d\n&quot;</span>, type_name, ofs, size);</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        }</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="comment">//ENSURE(ofs &lt; size);</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="keywordflow">if</span>(!fits_on_one_line)</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;            <a class="code" href="wdbg__sym_8cpp.html#a502b06aa5ad25116c775d201326bad52">INDENT</a>;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* el_p = p+ofs;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> err = <a class="code" href="wdbg__sym_8cpp.html#a375b9c3836d38112b167885bd69ecaee">dump_sym</a>(child_id, el_p, state);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <span class="comment">// there was no output for this child; undo its indentation (if any),</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <span class="comment">// skip everything below and proceed with the next child.</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <span class="keywordflow">if</span>(err == <a class="code" href="namespaceINFO.html#a6eb0483e0b6649d8986ac92e692833ca">INFO::SYM_SUPPRESS_OUTPUT</a>)</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        {</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;            <span class="keywordflow">if</span>(!fits_on_one_line)</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                <a class="code" href="wdbg__sym_8cpp.html#a54a44b67847f9c02f71d2322e20a5207">UNINDENT</a>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        }</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        displayed_anything = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#a0065a4b1c997cc9a058f923bdc7c67d6">dump_error</a>(err);    <span class="comment">// nop if err == INFO::OK</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(fits_on_one_line? L<span class="stringliteral">&quot;, &quot;</span> : L<span class="stringliteral">&quot;\r\n&quot;</span>);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <span class="keywordflow">if</span>(err == <a class="code" href="namespaceERR.html#ab1b34580fe91b832f31479d5b4e47ecd">ERR::SYM_SINGLE_SYMBOL_LIMIT</a>)</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    }   <span class="comment">// for each child</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    state.<a class="code" href="structDumpState.html#a990f52391ca7cfb340dded928477deaa">level</a>--;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordflow">if</span>(!displayed_anything)</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#a89020aad6af00ddef5bc90e5e61f5af9">out_erase</a>(2);   <span class="comment">// &quot;{ &quot; or &quot;\r\n&quot;</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(%ls)&quot;</span>, type_name);</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    }</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="comment">// remove trailing comma separator</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="comment">// note: we can&#39;t avoid writing it by checking if i == numChildren-1:</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="comment">// each child might be the last valid data member.</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="keywordflow">if</span>(fits_on_one_line)</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#a89020aad6af00ddef5bc90e5e61f5af9">out_erase</a>(2);   <span class="comment">// &quot;, &quot;</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot; }&quot;</span>);</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    }</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;}</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div>
<div class="line"><a name="l01521"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ae31bd0a2c2879e97a99736d7e3f9b474"> 1521</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#ae31bd0a2c2879e97a99736d7e3f9b474">dump_sym_udt</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> type_id, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; state)</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;{</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    ULONG64 size64 = 0;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_LENGTH, &amp;size64))</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> size = (size_t)size64;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="comment">// get array of child symbols (members/functions/base classes).</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> numChildren;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_CHILDRENCOUNT, &amp;numChildren))</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <a class="code" href="structTI__FINDCHILDREN__PARAMS2.html">TI_FINDCHILDREN_PARAMS2</a> fcp(numChildren);</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_FINDCHILDREN, &amp;fcp))</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    numChildren = fcp.<a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#ae4f6a0b25d35dd6c5520b494f441d6ed">p</a>.Count;  <span class="comment">// was truncated to maxChildren</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="keyword">const</span> <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>* children = fcp.<a class="code" href="structTI__FINDCHILDREN__PARAMS2.html#ae4f6a0b25d35dd6c5520b494f441d6ed">p</a>.ChildId;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* type_name;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_SYMNAME, &amp;type_name))</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> ret;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="comment">// note: order is important (e.g. STL special-case must come before</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="comment">// suppressing UDTs, which tosses out most other C++ stdlib classes)</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    ret = <a class="code" href="wdbg__sym_8cpp.html#a620fa6f2abd5528b3614f3b9c4635bf1">udt_dump_std</a>       (type_name, p, size, state, numChildren, children);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">if</span>(ret != <a class="code" href="namespaceINFO.html#a19222f05a0d3a10909e544e64566b120">INFO::CANNOT_HANDLE</a>)</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    ret = <a class="code" href="wdbg__sym_8cpp.html#a2389be3a3c399c4dabfc46ca50755b7f">udt_dump_suppressed</a>(type_name, p, size, state, numChildren, children);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="keywordflow">if</span>(ret != <a class="code" href="namespaceINFO.html#a19222f05a0d3a10909e544e64566b120">INFO::CANNOT_HANDLE</a>)</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    ret = <a class="code" href="wdbg__sym_8cpp.html#a0ede3facab58825705963b78bbc28e41">udt_dump_normal</a>    (type_name, p, size, state, numChildren, children);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordflow">if</span>(ret != <a class="code" href="namespaceINFO.html#a19222f05a0d3a10909e544e64566b120">INFO::CANNOT_HANDLE</a>)</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;done:</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    LocalFree((HLOCAL)type_name);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;}</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div>
<div class="line"><a name="l01567"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a89bf3f21a1f66adf0967e70f783d5146"> 1567</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a89bf3f21a1f66adf0967e70f783d5146">dump_sym_vtable</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(type_id), <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(p), <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(state))</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;{</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="comment">// unsupported (vtable internals are undocumented; too much work).</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a6eb0483e0b6649d8986ac92e692833ca">INFO::SYM_SUPPRESS_OUTPUT</a>;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;}</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div>
<div class="line"><a name="l01577"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a916c7ea777a1114dc11ddda0134dcb22"> 1577</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a916c7ea777a1114dc11ddda0134dcb22">dump_sym_unknown</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> type_id, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(p), <a class="code" href="structDumpState.html">DumpState</a>&amp; state)</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;{</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="comment">// redundant (already done in dump_sym), but this is rare.</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> type_tag;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_SYMTAG, &amp;type_tag))</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <a class="code" href="debug_8cpp.html#ab660871a1133ed786b46769c052a812b">debug_printf</a>(L<span class="stringliteral">&quot;SYM: unknown tag: %d\n&quot;</span>, type_tag);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;(unknown symbol type)&quot;</span>);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;}</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div>
<div class="line"><a name="l01592"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a1ddb8d9d0eb680abdd5b5cc7b9ee8b37"> 1592</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> (*<a class="code" href="wdbg__sym_8cpp.html#a1ddb8d9d0eb680abdd5b5cc7b9ee8b37">DumpFunc</a>)(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> typeId, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div>
<div class="line"><a name="l01594"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#acbc4f3e510a83eba4dfa39774c6f1c85"> 1594</a></span>&#160;<span class="keyword">static</span> <a class="code" href="wdbg__sym_8cpp.html#a1ddb8d9d0eb680abdd5b5cc7b9ee8b37">DumpFunc</a> <a class="code" href="wdbg__sym_8cpp.html#acbc4f3e510a83eba4dfa39774c6f1c85">DumpFuncFromTypeTag</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> typeTag)</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;{</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="keywordflow">switch</span>(typeTag)</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keywordflow">case</span> SymTagArrayType:</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a8fe27a758e5185b8a41672442ec346fa">dump_sym_array</a>;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">case</span> SymTagBaseType:</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a6ab3aa1a116bef649bd5b64fad9460df">dump_sym_base_type</a>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">case</span> SymTagBaseClass:</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a165b7154a3ea7cec30c03485d6f1b3ab">dump_sym_base_class</a>;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordflow">case</span> SymTagData:</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#abc2aa3c4d810a462bacfff6a7a54ab26">dump_sym_data</a>;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keywordflow">case</span> SymTagEnum:</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a457869114e41520fd7b4058caea2d13b">dump_sym_enum</a>;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keywordflow">case</span> SymTagFunction:</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a6b1926d066b58afb5cf8a7495535c270">dump_sym_function</a>;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordflow">case</span> SymTagFunctionType:</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a9816493ae2ad878d19da1aeb98c74943">dump_sym_function_type</a>;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordflow">case</span> SymTagPointerType:</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a1f85fd8c8e3ecc9bf9d03c751609f124">dump_sym_pointer</a>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <span class="keywordflow">case</span> SymTagTypedef:</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#aaa4cd71d64c26935548a01da5e52ba88">dump_sym_typedef</a>;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keywordflow">case</span> SymTagUDT:</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#ae31bd0a2c2879e97a99736d7e3f9b474">dump_sym_udt</a>;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">case</span> SymTagVTable:</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a89bf3f21a1f66adf0967e70f783d5146">dump_sym_vtable</a>;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wdbg__sym_8cpp.html#a916c7ea777a1114dc11ddda0134dcb22">dump_sym_unknown</a>;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    }</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;}</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;<span class="comment">// write name and value of the symbol &lt;type_id&gt; to the output buffer.</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="comment">// delegates to dump_sym_* depending on the symbol&#39;s tag.</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a375b9c3836d38112b167885bd69ecaee"> 1628</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a375b9c3836d38112b167885bd69ecaee">dump_sym</a>(<a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> type_id, <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p, <a class="code" href="structDumpState.html">DumpState</a>&amp; state)</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;{</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="status_8h.html#a22caba86ad92480f925337156573125a">RETURN_STATUS_IF_ERR</a>(<a class="code" href="wdbg__sym_8cpp.html#aa76d463f1c26ddcf9a23a46276c09c1d">out_check_limit</a>());</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> typeTag;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keywordflow">if</span>(!pSymGetTypeInfo(hProcess, state.<a class="code" href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">moduleBase</a>, type_id, TI_GET_SYMTAG, &amp;typeTag))</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        <a class="code" href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a>(<a class="code" href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a>);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keyword">const</span> <a class="code" href="wdbg__sym_8cpp.html#a1ddb8d9d0eb680abdd5b5cc7b9ee8b37">DumpFunc</a> dumpFunc = <a class="code" href="wdbg__sym_8cpp.html#acbc4f3e510a83eba4dfa39774c6f1c85">DumpFuncFromTypeTag</a>(typeTag);</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">return</span> dumpFunc(type_id, p, state);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;}</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment">// stack trace</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;</div>
<div class="line"><a name="l01644"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a4a2ada02fca67170819882727e955fd8"> 1644</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="wdbg__sym_8cpp.html#a4a2ada02fca67170819882727e955fd8">ShouldSkipSymbol</a>(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* name)</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;{</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordflow">if</span>(!wcscmp(name, L<span class="stringliteral">&quot;suppress__&quot;</span>))</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keywordflow">if</span>(!wcscmp(name, L<span class="stringliteral">&quot;__profile&quot;</span>))</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;}</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="comment">// output the symbol&#39;s name and value via dump_sym*.</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="comment">// called from dump_frame_cb for each local symbol; lock is held.</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#ab41bfb32486a28473a80fe6e2a50ce29"> 1655</a></span>&#160;<span class="keyword">static</span> <a class="code" href="wgl_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> <a class="code" href="wgl_8h.html#ad48a1ae177f90ad8a0ccc92481c664a7">CALLBACK</a> <a class="code" href="wdbg__sym_8cpp.html#ab41bfb32486a28473a80fe6e2a50ce29">dump_sym_cb</a>(SYMBOL_INFOW* sym, ULONG <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(size), PVOID userContext)</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;{</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="wdbg__sym_8cpp.html#a4a2ada02fca67170819882727e955fd8">ShouldSkipSymbol</a>(sym-&gt;Name))</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        <span class="keywordflow">return</span> TRUE;    <span class="comment">// continue</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#a96576fe814022390bc67b1fcc1cec9dc">out_latch_pos</a>();    <span class="comment">// see decl</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>* p = (<span class="keyword">const</span> <a class="code" href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a>*)(uintptr_t)sym-&gt;Address;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <a class="code" href="structDumpState.html">DumpState</a> <a class="code" href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a>((uintptr_t)sym-&gt;ModBase, (LPSTACKFRAME64)userContext);</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#a502b06aa5ad25116c775d201326bad52">INDENT</a>;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> err = <a class="code" href="wdbg__sym_8cpp.html#a375b9c3836d38112b167885bd69ecaee">dump_sym</a>(sym-&gt;Index, p, state);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#a0065a4b1c997cc9a058f923bdc7c67d6">dump_error</a>(err);</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="keywordflow">if</span>(err == <a class="code" href="namespaceINFO.html#a6eb0483e0b6649d8986ac92e692833ca">INFO::SYM_SUPPRESS_OUTPUT</a>)</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#a54a44b67847f9c02f71d2322e20a5207">UNINDENT</a>;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;\r\n&quot;</span>);</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">return</span> TRUE;    <span class="comment">// continue</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;}</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment">// called by wdbg_sym_WalkStack for each stack frame</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a4c4c12511ca87883e9c72bc1a4a8f4b8"> 1676</a></span>&#160;<span class="keyword">static</span> <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="wdbg__sym_8cpp.html#a4c4c12511ca87883e9c72bc1a4a8f4b8">dump_frame_cb</a>(<span class="keyword">const</span> STACKFRAME64* sf, uintptr_t <a class="code" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a>(userContext))</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;{</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="keywordtype">void</span>* func = (<span class="keywordtype">void</span>*)(uintptr_t)sf-&gt;AddrPC.Offset;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordtype">wchar_t</span> func_name[<a class="code" href="debug_8h.html#a8812daf6c623bc504ef46793a87b03c4">DEBUG_SYMBOL_CHARS</a>]; <span class="keywordtype">wchar_t</span> file[<a class="code" href="debug_8h.html#a5cedd52204506f8b491f5d9a7c8a2c34">DEBUG_FILE_CHARS</a>]; <span class="keywordtype">int</span> line;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> ret = <a class="code" href="wdbg__sym_8cpp.html#a7d9afd213aa60dd94a1755ab4db6fd64">ResolveSymbol_lk</a>(func, func_name, file, &amp;line);</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">if</span>(ret == <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>)</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    {</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        <span class="comment">// don&#39;t trace back further than the app&#39;s entry point</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <span class="comment">// (no one wants to see this frame). checking for the</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        <span class="comment">// function name isn&#39;t future-proof, but not stopping is no big deal.</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="comment">// an alternative would be to check if module=kernel32, but</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <span class="comment">// that would cut off callbacks as well.</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <span class="comment">// note: the stdcall mangled name includes parameter size, which is</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        <span class="comment">// different in 64-bit, so only check the first characters.</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        <span class="keywordflow">if</span>(!wcsncmp(func_name, L<span class="stringliteral">&quot;_BaseProcessStart&quot;</span>, 17) ||</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;           !wcscmp(func_name, L<span class="stringliteral">&quot;BaseThreadInitThunk&quot;</span>))</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        <span class="comment">// skip any mainCRTStartup frames</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="keywordflow">if</span>(!wcscmp(func_name, L<span class="stringliteral">&quot;__tmainCRTStartup&quot;</span>))</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        <span class="keywordflow">if</span>(!wcscmp(func_name, L<span class="stringliteral">&quot;mainCRTStartup&quot;</span>))</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;%ls (%ls:%d)\r\n&quot;</span>, func_name, file, line);</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    }</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;%p\r\n&quot;</span>, func);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <a class="code" href="classWinScopedPreserveLastError.html">WinScopedPreserveLastError</a> s;   <span class="comment">// SymSetContext</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="comment">// only enumerate symbols for this stack frame</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <span class="comment">// (i.e. its locals and parameters)</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="comment">// problem: debug info is scope-aware, so we won&#39;t see any variables</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="comment">// declared in sub-blocks. we&#39;d have to pass an address in that block,</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="comment">// which isn&#39;t worth the trouble.</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    IMAGEHLP_STACK_FRAME isf = <a class="code" href="wdbg__sym_8cpp.html#a5cf84adc578b2b5ab6460c135f481e58">PopulateImageStackFrame</a>(*sf);</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="keyword">const</span> PIMAGEHLP_CONTEXT ic = 0; <span class="comment">// ignored</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="comment">// NB: this sometimes fails for reasons unknown in a static</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="comment">// member function, possibly because the return address is in kernel32</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    (void)pSymSetContext(hProcess, &amp;isf, ic);</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keyword">const</span> ULONG64 base = 0; <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* <span class="keyword">const</span> mask = 0;  <span class="comment">// use scope set by pSymSetContext</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    pSymEnumSymbolsW(hProcess, base, mask, <a class="code" href="wdbg__sym_8cpp.html#ab41bfb32486a28473a80fe6e2a50ce29">dump_sym_cb</a>, (PVOID)sf);</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keywordflow">if</span>(GetLastError() == ERROR_NOT_SUPPORTED)   <span class="comment">// no debug info present?</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        SetLastError(0);</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a>(L<span class="stringliteral">&quot;\r\n&quot;</span>);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a>;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;}</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div>
<div class="line"><a name="l01730"></a><span class="lineno"><a class="line" href="wdbg__sym_8cpp.html#a77386f15a689869b80b47824b530cb66"> 1730</a></span>&#160;<a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> <a class="code" href="debug_8h.html#a631c7038fbcac5aeb5901610b8610924">debug_DumpStack</a>(<span class="keywordtype">wchar_t</span>* buf, <span class="keywordtype">size_t</span> maxChars, <span class="keywordtype">void</span>* pcontext, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* lastFuncToSkip)</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;{</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keyword">static</span> intptr_t busy;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="arm_8cpp.html#af649a1e2cad1d11f6a61c4a8326b6e0d">cpu_CAS</a>(&amp;busy, 0, 1))</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceERR.html#a92b5d1c7c656cb1e28be649f1c4e5f1d">ERR::REENTERED</a>;  <span class="comment">// NOWARN</span></div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#a8a549554e5f5b8248745ddbffce2314f">out_init</a>(buf, maxChars);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#a0e7abe4493965d414a749ac84cc7e0ea">ptr_reset_visited</a>();</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <a class="code" href="wdbg_8h.html#a09e2322cf38d1c7c00b1434d896d450d">wdbg_assert</a>(pcontext != 0);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <a class="code" href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a> ret = <a class="code" href="wdbg__sym_8cpp.html#afc19d701d40c6a04c46a28e498ec999f">wdbg_sym_WalkStack</a>(<a class="code" href="wdbg__sym_8cpp.html#a4c4c12511ca87883e9c72bc1a4a8f4b8">dump_frame_cb</a>, 0, *(CONTEXT*)pcontext, lastFuncToSkip);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <a class="code" href="code__annotation_8h.html#af184f5a1532e268202ac01e1cfca93c5">COMPILER_FENCE</a>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    busy = 0;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;}</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="comment">// write out a &quot;minidump&quot; containing register and stack state; this enables</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;<span class="comment">// examining the crash in a debugger. called by wdbg_exception_filter.</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;<span class="comment">// heavily modified from http://www.codeproject.com/debug/XCrashReportPt3.asp</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="comment">// lock must be held.</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"><a class="line" href="wdbg__sym_8h.html#a413f032368d123ad1f87ec6289a34fd0"> 1755</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="wdbg__sym_8cpp.html#ac0129ede9da42ce9e3e9f8f9147369c2">wdbg_sym_WriteMinidump</a>(EXCEPTION_POINTERS* exception_pointers)</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;{</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <a class="code" href="wdbg__sym_8cpp.html#a48bed3427f3cee2013008e23d73bed8f">sym_init</a>();</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <a class="code" href="classWinScopedLock.html">WinScopedLock</a> lock(<a class="code" href="wutil_8h.html#a11b9726305d57b4edaac5a090d2fb759aae861369194f0e3bec3e32fa6da8bc0e">WDBG_SYM_CS</a>);</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <a class="code" href="classPath.html">OsPath</a> path = <a class="code" href="app__hooks_8cpp.html#a506559359e2f126dcafa2d9b29eee135">ah_get_log_dir</a>()/<span class="stringliteral">&quot;crashlog.dmp&quot;</span>;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <a class="code" href="wgl_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a> hFile = CreateFileW(<a class="code" href="os__path_8h.html#a987d2bcb1552dec6c391a92281b10038">OsString</a>(path).c_str(), GENERIC_WRITE, FILE_SHARE_WRITE, 0, CREATE_ALWAYS, 0, 0);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="keywordflow">if</span>(hFile == INVALID_HANDLE_VALUE)</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <a class="code" href="debug_8h.html#afcfc83007fe96240611f738a68accddb">DEBUG_DISPLAY_ERROR</a>(L<span class="stringliteral">&quot;wdbg_sym_WriteMinidump: unable to create crashlog.dmp.&quot;</span>);</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    }</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    MINIDUMP_EXCEPTION_INFORMATION mei;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    mei.ThreadId = GetCurrentThreadId();</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    mei.ExceptionPointers = exception_pointers;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    mei.ClientPointers = FALSE;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="comment">// exception_pointers is not in our address space.</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <span class="comment">// note: we don&#39;t store other crashlog info within the dump file</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="comment">// (UserStreamParam), since we will need to generate a plain text file on</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="comment">// non-Windows platforms. users will just have to send us both files.</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <a class="code" href="wgl_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a> hProcess = GetCurrentProcess();</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <a class="code" href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> pid = GetCurrentProcessId();</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">if</span>(!pMiniDumpWriteDump || !pMiniDumpWriteDump(hProcess, pid, hFile, MiniDumpNormal, &amp;mei, 0, 0))</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        <a class="code" href="debug_8h.html#afcfc83007fe96240611f738a68accddb">DEBUG_DISPLAY_ERROR</a>(L<span class="stringliteral">&quot;wdbg_sym_WriteMinidump: unable to generate minidump.&quot;</span>);</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    CloseHandle(hFile);</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;}</div>
<div class="ttc" id="status_8h_html_ac8d9e48fa2799a2f3d9dce28e4837df0"><div class="ttname"><a href="status_8h.html#ac8d9e48fa2799a2f3d9dce28e4837df0">RETURN_STATUS_FROM_CALLBACK</a></div><div class="ttdeci">#define RETURN_STATUS_FROM_CALLBACK(expression)</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00338">status.h:338</a></div></div>
<div class="ttc" id="namespaceERR_html_a0da6ecb1f92f0019d51c8d988d3e137a"><div class="ttname"><a href="namespaceERR.html#a0da6ecb1f92f0019d51c8d988d3e137a">ERR::STL_CNT_UNSUPPORTED</a></div><div class="ttdeci">const Status STL_CNT_UNSUPPORTED</div><div class="ttdef"><b>Definition:</b> <a href="debug__stl_8h_source.html#l00034">debug_stl.h:34</a></div></div>
<div class="ttc" id="types_8h_html_af3b86d961da0a3575b4f99c9ffaf01fd"><div class="ttname"><a href="types_8h.html#af3b86d961da0a3575b4f99c9ffaf01fd">u8</a></div><div class="ttdeci">#define u8</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00039">types.h:39</a></div></div>
<div class="ttc" id="wdbg_8h_html"><div class="ttname"><a href="wdbg_8h.html">wdbg.h</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526a007a4bf5bd78f5389652358b7ac8596d"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a007a4bf5bd78f5389652358b7ac8596d">btVoid</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00080">dbghelp.h:80</a></div></div>
<div class="ttc" id="namespaceERR_html_a601b15172182f14bec79c698f244862b"><div class="ttname"><a href="namespaceERR.html#a601b15172182f14bec79c698f244862b">ERR::LOGIC</a></div><div class="ttdeci">const Status LOGIC</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00409">status.h:409</a></div></div>
<div class="ttc" id="wutil_8h_html_a11b9726305d57b4edaac5a090d2fb759aae861369194f0e3bec3e32fa6da8bc0e"><div class="ttname"><a href="wutil_8h.html#a11b9726305d57b4edaac5a090d2fb759aae861369194f0e3bec3e32fa6da8bc0e">WDBG_SYM_CS</a></div><div class="ttdef"><b>Definition:</b> <a href="wutil_8h_source.html#l00080">wutil.h:80</a></div></div>
<div class="ttc" id="structSYMBOL__INFO__PACKAGEW2_html"><div class="ttname"><a href="structSYMBOL__INFO__PACKAGEW2.html">SYMBOL_INFO_PACKAGEW2</a></div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00156">wdbg_sym.cpp:156</a></div></div>
<div class="ttc" id="structSYMBOL__INFO__PACKAGEW2_html_a0e7d92b6fdd7f2e810197158079d9415"><div class="ttname"><a href="structSYMBOL__INFO__PACKAGEW2.html#a0e7d92b6fdd7f2e810197158079d9415">SYMBOL_INFO_PACKAGEW2::SYMBOL_INFO_PACKAGEW2</a></div><div class="ttdeci">SYMBOL_INFO_PACKAGEW2()</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00158">wdbg_sym.cpp:158</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ac89176dc7e6070d6dd1db0e28718c04f"><div class="ttname"><a href="wdbg__sym_8cpp.html#ac89176dc7e6070d6dd1db0e28718c04f">CV_HREG_e</a></div><div class="ttdeci">CV_HREG_e</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00553">wdbg_sym.cpp:553</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a2ee1c9e08e0aceabd3b598de61b84c9b"><div class="ttname"><a href="wdbg__sym_8cpp.html#a2ee1c9e08e0aceabd3b598de61b84c9b">dump_sequence</a></div><div class="ttdeci">static Status dump_sequence(DebugStlIterator el_iterator, void *internal, size_t el_count, DWORD el_type_id, size_t el_size, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00652">wdbg_sym.cpp:652</a></div></div>
<div class="ttc" id="code__annotation_8h_html_a3e5bd53e9de4078ded1bf077b019a131"><div class="ttname"><a href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">UNUSED</a></div><div class="ttdeci">#define UNUSED(param)</div><div class="ttdoc">mark a function parameter as unused and avoid the corresponding compiler warning. ...</div><div class="ttdef"><b>Definition:</b> <a href="code__annotation_8h_source.html#l00038">code_annotation.h:38</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a9115e79d1b9fcd92904ac7cfa7d82f04"><div class="ttname"><a href="wdbg__sym_8cpp.html#a9115e79d1b9fcd92904ac7cfa7d82f04">WUTIL_FUNC</a></div><div class="ttdeci">static WUTIL_FUNC(pRtlCaptureContext, VOID,(PCONTEXT))</div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a68b471d21415fd846925e4371f975a47"><div class="ttname"><a href="wdbg__sym_8cpp.html#a68b471d21415fd846925e4371f975a47">CanHandleDataKind</a></div><div class="ttdeci">static Status CanHandleDataKind(DWORD dataKind)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00732">wdbg_sym.cpp:732</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_afc19d701d40c6a04c46a28e498ec999f"><div class="ttname"><a href="wdbg__sym_8cpp.html#afc19d701d40c6a04c46a28e498ec999f">wdbg_sym_WalkStack</a></div><div class="ttdeci">Status wdbg_sym_WalkStack(StackFrameCallback cb, uintptr_t cbData, CONTEXT &amp;context, const wchar_t *lastFuncToSkip)</div><div class="ttdoc">Iterate over a call stack, invoking a callback for each frame encountered. </div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00311">wdbg_sym.cpp:311</a></div></div>
<div class="ttc" id="wdbg__sym_8h_html"><div class="ttname"><a href="wdbg__sym_8h.html">wdbg_sym.h</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a9563212408e59ddcc47cfb5a968aa23d"><div class="ttname"><a href="wdbg__sym_8cpp.html#a9563212408e59ddcc47cfb5a968aa23d">out_have_warned_of_overflow</a></div><div class="ttdeci">static bool out_have_warned_of_overflow</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00391">wdbg_sym.cpp:391</a></div></div>
<div class="ttc" id="byte__order_8h_html"><div class="ttname"><a href="byte__order_8h.html">byte_order.h</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a2389be3a3c399c4dabfc46ca50755b7f"><div class="ttname"><a href="wdbg__sym_8cpp.html#a2389be3a3c399c4dabfc46ca50755b7f">udt_dump_suppressed</a></div><div class="ttdeci">static Status udt_dump_suppressed(const wchar_t *type_name, const u8 *p, size_t size, DumpState state, ULONG numChildren, const DWORD *children)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01391">wdbg_sym.cpp:1391</a></div></div>
<div class="ttc" id="code__annotation_8h_html_af184f5a1532e268202ac01e1cfca93c5"><div class="ttname"><a href="code__annotation_8h.html#af184f5a1532e268202ac01e1cfca93c5">COMPILER_FENCE</a></div><div class="ttdeci">#define COMPILER_FENCE</div><div class="ttdoc">prevent the compiler from reordering loads or stores across this point. </div><div class="ttdef"><b>Definition:</b> <a href="code__annotation_8h_source.html#l00277">code_annotation.h:277</a></div></div>
<div class="ttc" id="namespaceERR_html_aa9e580d389d54c2104f54deaac7aa403"><div class="ttname"><a href="namespaceERR.html#aa9e580d389d54c2104f54deaac7aa403">ERR::SYM_UNSUPPORTED</a></div><div class="ttdeci">const Status SYM_UNSUPPORTED</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00406">debug.h:406</a></div></div>
<div class="ttc" id="debug_8h_html_a8812daf6c623bc504ef46793a87b03c4"><div class="ttname"><a href="debug_8h.html#a8812daf6c623bc504ef46793a87b03c4">DEBUG_SYMBOL_CHARS</a></div><div class="ttdeci">static const size_t DEBUG_SYMBOL_CHARS</div><div class="ttdoc">Maximum number of characters (including null terminator) written to user&amp;#39;s buffers by debug_ResolveSy...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00428">debug.h:428</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526a31037e1401828b908d2a9acf0e60960b"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a31037e1401828b908d2a9acf0e60960b">btBSTR</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00095">dbghelp.h:95</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a4c4c12511ca87883e9c72bc1a4a8f4b8"><div class="ttname"><a href="wdbg__sym_8cpp.html#a4c4c12511ca87883e9c72bc1a4a8f4b8">dump_frame_cb</a></div><div class="ttdeci">static Status dump_frame_cb(const STACKFRAME64 *sf, uintptr_t userContext)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01676">wdbg_sym.cpp:1676</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_afe6171bfb69d5690b2afbed23995bb90"><div class="ttname"><a href="wdbg__sym_8cpp.html#afe6171bfb69d5690b2afbed23995bb90">udt_should_suppress</a></div><div class="ttdeci">static bool udt_should_suppress(const wchar_t *type_name)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01342">wdbg_sym.cpp:1342</a></div></div>
<div class="ttc" id="namespaceINFO_html_a4e7f848c5a73a2d9d2ca2edb0827d238"><div class="ttname"><a href="namespaceINFO.html#a4e7f848c5a73a2d9d2ca2edb0827d238">INFO::OK</a></div><div class="ttdeci">const Status OK</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00386">status.h:386</a></div></div>
<div class="ttc" id="classWinScopedPreserveLastError_html"><div class="ttname"><a href="classWinScopedPreserveLastError.html">WinScopedPreserveLastError</a></div><div class="ttdoc">some WinAPI functions SetLastError(0) on success, which is bad because it can hide previous errors...</div><div class="ttdef"><b>Definition:</b> <a href="wutil_8h_source.html#l00119">wutil.h:119</a></div></div>
<div class="ttc" id="dbghelp_8h_html_ace34b43f7a85070c2f233cbb13e362bfa6a3d4d84eeedaae86688efb735f914df"><div class="ttname"><a href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfa6a3d4d84eeedaae86688efb735f914df">DataIsGlobal</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00107">dbghelp.h:107</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526aead6fd771496ad5d1954f8338f1fdafe"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526aead6fd771496ad5d1954f8338f1fdafe">btHresult</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00096">dbghelp.h:96</a></div></div>
<div class="ttc" id="namespaceINFO_html_a6eb0483e0b6649d8986ac92e692833ca"><div class="ttname"><a href="namespaceINFO.html#a6eb0483e0b6649d8986ac92e692833ca">INFO::SYM_SUPPRESS_OUTPUT</a></div><div class="ttdeci">const Status SYM_SUPPRESS_OUTPUT</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00420">debug.h:420</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a89020aad6af00ddef5bc90e5e61f5af9"><div class="ttname"><a href="wdbg__sym_8cpp.html#a89020aad6af00ddef5bc90e5e61f5af9">out_erase</a></div><div class="ttdeci">static void out_erase(size_t num_chars)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00465">wdbg_sym.cpp:465</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526a86fe058be72472cc8e5e12da41b3063d"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a86fe058be72472cc8e5e12da41b3063d">btLong</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00088">dbghelp.h:88</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ab41bfb32486a28473a80fe6e2a50ce29"><div class="ttname"><a href="wdbg__sym_8cpp.html#ab41bfb32486a28473a80fe6e2a50ce29">dump_sym_cb</a></div><div class="ttdeci">static BOOL CALLBACK dump_sym_cb(SYMBOL_INFOW *sym, ULONG size, PVOID userContext)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01655">wdbg_sym.cpp:1655</a></div></div>
<div class="ttc" id="winit_8h_html"><div class="ttname"><a href="winit_8h.html">winit.h</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ab38ba6042973776a8d5bf353c4fe8875"><div class="ttname"><a href="wdbg__sym_8cpp.html#ab38ba6042973776a8d5bf353c4fe8875">SUPPRESS_HANDLE</a></div><div class="ttdeci">#define SUPPRESS_HANDLE(name)</div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ac0129ede9da42ce9e3e9f8f9147369c2"><div class="ttname"><a href="wdbg__sym_8cpp.html#ac0129ede9da42ce9e3e9f8f9147369c2">wdbg_sym_WriteMinidump</a></div><div class="ttdeci">void wdbg_sym_WriteMinidump(EXCEPTION_POINTERS *exception_pointers)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01755">wdbg_sym.cpp:1755</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_acbc4f3e510a83eba4dfa39774c6f1c85"><div class="ttname"><a href="wdbg__sym_8cpp.html#acbc4f3e510a83eba4dfa39774c6f1c85">DumpFuncFromTypeTag</a></div><div class="ttdeci">static DumpFunc DumpFuncFromTypeTag(DWORD typeTag)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01594">wdbg_sym.cpp:1594</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a916c7ea777a1114dc11ddda0134dcb22"><div class="ttname"><a href="wdbg__sym_8cpp.html#a916c7ea777a1114dc11ddda0134dcb22">dump_sym_unknown</a></div><div class="ttdeci">static Status dump_sym_unknown(DWORD type_id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01577">wdbg_sym.cpp:1577</a></div></div>
<div class="ttc" id="classWinScopedLock_html"><div class="ttname"><a href="classWinScopedLock.html">WinScopedLock</a></div><div class="ttdef"><b>Definition:</b> <a href="wutil_8h_source.html#l00092">wutil.h:92</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ace3d1803d3e67865bf600d34b50328c5"><div class="ttname"><a href="wdbg__sym_8cpp.html#ace3d1803d3e67865bf600d34b50328c5">out</a></div><div class="ttdeci">static void out(const wchar_t *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00419">wdbg_sym.cpp:419</a></div></div>
<div class="ttc" id="namespaceERR_html_a8fc260f86982d7bcac870392a253628e"><div class="ttname"><a href="namespaceERR.html#a8fc260f86982d7bcac870392a253628e">ERR::STL_CNT_INVALID</a></div><div class="ttdeci">const Status STL_CNT_INVALID</div><div class="ttdef"><b>Definition:</b> <a href="debug__stl_8h_source.html#l00036">debug_stl.h:36</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a8fe27a758e5185b8a41672442ec346fa"><div class="ttname"><a href="wdbg__sym_8cpp.html#a8fe27a758e5185b8a41672442ec346fa">dump_sym_array</a></div><div class="ttdeci">static Status dump_sym_array(DWORD type_id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00829">wdbg_sym.cpp:829</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ac6aecc85b5a7eefb63f60fb331fccb49"><div class="ttname"><a href="wdbg__sym_8cpp.html#ac6aecc85b5a7eefb63f60fb331fccb49">udt_get_child_type</a></div><div class="ttdeci">static Status udt_get_child_type(const wchar_t *child_name, ULONG numChildren, const DWORD *children, const DumpState &amp;state, DWORD *el_type_id, size_t *el_size)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01240">wdbg_sym.cpp:1240</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ac8756c41e015d4f81b5766e721edc573"><div class="ttname"><a href="wdbg__sym_8cpp.html#ac8756c41e015d4f81b5766e721edc573">maxLevel</a></div><div class="ttdeci">static const size_t maxLevel</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00369">wdbg_sym.cpp:369</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a15dc8f220a123c13e66421b91fcdc3e2"><div class="ttname"><a href="wdbg__sym_8cpp.html#a15dc8f220a123c13e66421b91fcdc3e2">out_have_warned_of_limit</a></div><div class="ttdeci">static bool out_have_warned_of_limit</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00408">wdbg_sym.cpp:408</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526ad49f3758e70cf56d6995beedd04131ac"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ad49f3758e70cf56d6995beedd04131ac">btBool</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00087">dbghelp.h:87</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a620fa6f2abd5528b3614f3b9c4635bf1"><div class="ttname"><a href="wdbg__sym_8cpp.html#a620fa6f2abd5528b3614f3b9c4635bf1">udt_dump_std</a></div><div class="ttdeci">static Status udt_dump_std(const wchar_t *type_name, const u8 *p, size_t size, DumpState &amp;state, ULONG numChildren, const DWORD *children)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01274">wdbg_sym.cpp:1274</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a464412b524d145a2c26a6d62874e5d49"><div class="ttname"><a href="wdbg__sym_8cpp.html#a464412b524d145a2c26a6d62874e5d49">maxIndirection</a></div><div class="ttdeci">static const size_t maxIndirection</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00368">wdbg_sym.cpp:368</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a7d9afd213aa60dd94a1755ab4db6fd64"><div class="ttname"><a href="wdbg__sym_8cpp.html#a7d9afd213aa60dd94a1755ab4db6fd64">ResolveSymbol_lk</a></div><div class="ttdeci">static Status ResolveSymbol_lk(void *ptr_of_interest, wchar_t *sym_name, wchar_t *file, int *line)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00187">wdbg_sym.cpp:187</a></div></div>
<div class="ttc" id="dbghelp_8h_html_ace34b43f7a85070c2f233cbb13e362bfa6603206b61dfcc7d63a0e72985569329"><div class="ttname"><a href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfa6603206b61dfcc7d63a0e72985569329">DataIsStaticMember</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00109">dbghelp.h:109</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a54a44b67847f9c02f71d2322e20a5207"><div class="ttname"><a href="wdbg__sym_8cpp.html#a54a44b67847f9c02f71d2322e20a5207">UNINDENT</a></div><div class="ttdeci">#define UNINDENT</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00505">wdbg_sym.cpp:505</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a96576fe814022390bc67b1fcc1cec9dc"><div class="ttname"><a href="wdbg__sym_8cpp.html#a96576fe814022390bc67b1fcc1cec9dc">out_latch_pos</a></div><div class="ttdeci">static void out_latch_pos()</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00480">wdbg_sym.cpp:480</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a0ede3facab58825705963b78bbc28e41"><div class="ttname"><a href="wdbg__sym_8cpp.html#a0ede3facab58825705963b78bbc28e41">udt_dump_normal</a></div><div class="ttdeci">static Status udt_dump_normal(const wchar_t *type_name, const u8 *p, size_t size, DumpState state, ULONG numChildren, const DWORD *children)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01443">wdbg_sym.cpp:1443</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526ac6c6e7b6f7b4e3ec4854d87771d66ed8"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ac6c6e7b6f7b4e3ec4854d87771d66ed8">btDate</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00091">dbghelp.h:91</a></div></div>
<div class="ttc" id="dbghelp_8h_html_a31770db1d6bbe3122e1c3f78470f3e5b"><div class="ttname"><a href="dbghelp_8h.html#a31770db1d6bbe3122e1c3f78470f3e5b">dbghelp_ImportFunctions</a></div><div class="ttdeci">void dbghelp_ImportFunctions()</div></div>
<div class="ttc" id="structDumpState_html_a53311be3eba46351db225754b118cee1"><div class="ttname"><a href="structDumpState.html#a53311be3eba46351db225754b118cee1">DumpState::DumpState</a></div><div class="ttdeci">DumpState(uintptr_t moduleBase, LPSTACKFRAME64 stackFrame)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00378">wdbg_sym.cpp:378</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a7de5190aea14ad66ada43514c2bd48ca"><div class="ttname"><a href="wdbg__sym_8cpp.html#a7de5190aea14ad66ada43514c2bd48ca">out_latched_pos</a></div><div class="ttdeci">static wchar_t * out_latched_pos</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00407">wdbg_sym.cpp:407</a></div></div>
<div class="ttc" id="namespaceERR_html_a154a7ed5da86ee631b2f75f2d5c41c16"><div class="ttname"><a href="namespaceERR.html#a154a7ed5da86ee631b2f75f2d5c41c16">ERR::SYM_CHILD_NOT_FOUND</a></div><div class="ttdeci">const Status SYM_CHILD_NOT_FOUND</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00407">debug.h:407</a></div></div>
<div class="ttc" id="h__mgr_8cpp_html_a4688f25e9a88b40c4f52c69323d68c0f"><div class="ttname"><a href="h__mgr_8cpp.html#a4688f25e9a88b40c4f52c69323d68c0f">initState</a></div><div class="ttdeci">static ModuleInitState initState</div><div class="ttdef"><b>Definition:</b> <a href="h__mgr_8cpp_source.html#l00742">h_mgr.cpp:742</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526a7c06ab11284b9cd2f76df42e7bebfb38"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a7c06ab11284b9cd2f76df42e7bebfb38">btULong</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00089">dbghelp.h:89</a></div></div>
<div class="ttc" id="dbghelp_8h_html_ace34b43f7a85070c2f233cbb13e362bfabf5e18782dfdb2264f25fdb53e958664"><div class="ttname"><a href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfabf5e18782dfdb2264f25fdb53e958664">DataIsObjectPtr</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00105">dbghelp.h:105</a></div></div>
<div class="ttc" id="secure__crt_8h_html_a16ed5e57e11dce2157187d74e662cdd7"><div class="ttname"><a href="secure__crt_8h.html#a16ed5e57e11dce2157187d74e662cdd7">swprintf_s</a></div><div class="ttdeci">int swprintf_s(wchar_t *buf, size_t max_chars, const wchar_t *fmt,...) WPRINTF_ARGS(3)</div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_aa9ba7077a86a1c78e63bc6349a09cf98"><div class="ttname"><a href="wdbg__sym_8cpp.html#aa9ba7077a86a1c78e63bc6349a09cf98">DetermineSymbolAddress</a></div><div class="ttdeci">static Status DetermineSymbolAddress(DWORD id, const SYMBOL_INFOW *sym, const DumpState &amp;state, const u8 **pp)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00793">wdbg_sym.cpp:793</a></div></div>
<div class="ttc" id="dbghelp_8h_html_ace34b43f7a85070c2f233cbb13e362bfaad96ff0f53b5dc26c0cacd4f5db839a5"><div class="ttname"><a href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfaad96ff0f53b5dc26c0cacd4f5db839a5">DataIsMember</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00108">dbghelp.h:108</a></div></div>
<div class="ttc" id="namespaceINFO_html_a19222f05a0d3a10909e544e64566b120"><div class="ttname"><a href="namespaceINFO.html#a19222f05a0d3a10909e544e64566b120">INFO::CANNOT_HANDLE</a></div><div class="ttdeci">const Status CANNOT_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00396">status.h:396</a></div></div>
<div class="ttc" id="wgl_8h_html_a050c65e107f0c828f856a231f4b4e788"><div class="ttname"><a href="wgl_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a></div><div class="ttdeci">int BOOL</div><div class="ttdef"><b>Definition:</b> <a href="wgl_8h_source.html#l00051">wgl.h:51</a></div></div>
<div class="ttc" id="debug__stl_8cpp_html_ac74b36240b7afc24cee30f62defbfd62"><div class="ttname"><a href="debug__stl_8cpp.html#ac74b36240b7afc24cee30f62defbfd62">debug_stl_simplify_name</a></div><div class="ttdeci">wchar_t * debug_stl_simplify_name(wchar_t *name)</div><div class="ttdoc">reduce complicated STL symbol names to human-readable form. </div><div class="ttdef"><b>Definition:</b> <a href="debug__stl_8cpp_source.html#l00080">debug_stl.cpp:80</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ac89176dc7e6070d6dd1db0e28718c04fa686234c1e4246d231f77e419541dcdd6"><div class="ttname"><a href="wdbg__sym_8cpp.html#ac89176dc7e6070d6dd1db0e28718c04fa686234c1e4246d231f77e419541dcdd6">CV_REG_EBP</a></div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00555">wdbg_sym.cpp:555</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_aa3b10793a01a95be6cc327e4930ca85b"><div class="ttname"><a href="wdbg__sym_8cpp.html#aa3b10793a01a95be6cc327e4930ca85b">hProcess</a></div><div class="ttdeci">static HANDLE hProcess</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00060">wdbg_sym.cpp:60</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a6ab3aa1a116bef649bd5b64fad9460df"><div class="ttname"><a href="wdbg__sym_8cpp.html#a6ab3aa1a116bef649bd5b64fad9460df">dump_sym_base_type</a></div><div class="ttdeci">static Status dump_sym_base_type(DWORD type_id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00870">wdbg_sym.cpp:870</a></div></div>
<div class="ttc" id="byte__order_8cpp_html_a235418105f2dcb6f549d3b61536e2fb8"><div class="ttname"><a href="byte__order_8cpp.html#a235418105f2dcb6f549d3b61536e2fb8">movsx_le64</a></div><div class="ttdeci">i64 movsx_le64(const u8 *p, size_t size_bytes)</div><div class="ttdoc">sign-extend &amp;lt;size&amp;gt; (truncated to 8) bytes of little-endian data to i64, starting at address &amp;lt;p&amp;gt; (need...</div><div class="ttdef"><b>Definition:</b> <a href="byte__order_8cpp_source.html#l00190">byte_order.cpp:190</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_adead724c570fb0326b5f42075c81c382"><div class="ttname"><a href="wdbg__sym_8cpp.html#adead724c570fb0326b5f42075c81c382">wdbg_sym_Init</a></div><div class="ttdeci">static Status wdbg_sym_Init()</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00048">wdbg_sym.cpp:48</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a370cced58fb8db25dc924ed1fe9f5366"><div class="ttname"><a href="wdbg__sym_8cpp.html#a370cced58fb8db25dc924ed1fe9f5366">seq_determine_formatting</a></div><div class="ttdeci">static void seq_determine_formatting(size_t el_size, size_t el_count, bool *fits_on_one_line, size_t *num_elements_to_show)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00627">wdbg_sym.cpp:627</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a4a2ada02fca67170819882727e955fd8"><div class="ttname"><a href="wdbg__sym_8cpp.html#a4a2ada02fca67170819882727e955fd8">ShouldSkipSymbol</a></div><div class="ttdeci">static bool ShouldSkipSymbol(const wchar_t *name)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01644">wdbg_sym.cpp:1644</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a9816493ae2ad878d19da1aeb98c74943"><div class="ttname"><a href="wdbg__sym_8cpp.html#a9816493ae2ad878d19da1aeb98c74943">dump_sym_function_type</a></div><div class="ttdeci">static Status dump_sym_function_type(DWORD type_id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01115">wdbg_sym.cpp:1115</a></div></div>
<div class="ttc" id="code__annotation_8h_html_ab198d3720ba4ffbe006bc88095210798"><div class="ttname"><a href="code__annotation_8h.html#ab198d3720ba4ffbe006bc88095210798">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(name)</div><div class="ttdef"><b>Definition:</b> <a href="code__annotation_8h_source.html#l00355">code_annotation.h:355</a></div></div>
<div class="ttc" id="secure__crt_8h_html_a69996e159a04a5106429a47c52739bab"><div class="ttname"><a href="secure__crt_8h.html#a69996e159a04a5106429a47c52739bab">wcscpy_s</a></div><div class="ttdeci">int wcscpy_s(wchar_t *dst, size_t max_dst_chars, const wchar_t *src)</div></div>
<div class="ttc" id="structTI__FINDCHILDREN__PARAMS2_html_ae4f6a0b25d35dd6c5520b494f441d6ed"><div class="ttname"><a href="structTI__FINDCHILDREN__PARAMS2.html#ae4f6a0b25d35dd6c5520b494f441d6ed">TI_FINDCHILDREN_PARAMS2::p</a></div><div class="ttdeci">TI_FINDCHILDREN_PARAMS p</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00178">wdbg_sym.cpp:178</a></div></div>
<div class="ttc" id="namespaceERR_html_a083e998a5b5fc9733ea54a58d12ed160"><div class="ttname"><a href="namespaceERR.html#a083e998a5b5fc9733ea54a58d12ed160">ERR::SYM_UNRETRIEVABLE_STATIC</a></div><div class="ttdeci">const Status SYM_UNRETRIEVABLE_STATIC</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00402">debug.h:402</a></div></div>
<div class="ttc" id="structHINSTANCE_____html"><div class="ttname"><a href="structHINSTANCE____.html">HINSTANCE__</a></div><div class="ttdef"><b>Definition:</b> <a href="wxwidgets_8h_source.html#l00035">wxwidgets.h:35</a></div></div>
<div class="ttc" id="wdbg__sym_8h_html_ac342f8c2c6f43157ef56efe8b6172fd3"><div class="ttname"><a href="wdbg__sym_8h.html#ac342f8c2c6f43157ef56efe8b6172fd3">StackFrameCallback</a></div><div class="ttdeci">Status(* StackFrameCallback)(const _tagSTACKFRAME64 *frame, uintptr_t cbData)</div><div class="ttdoc">called for each stack frame found by wdbg_sym_WalkStack. </div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8h_source.html#l00043">wdbg_sym.h:43</a></div></div>
<div class="ttc" id="namespaceERR_html_a9d89eb5a3f5f9ea9cf642bae872c7476"><div class="ttname"><a href="namespaceERR.html#a9d89eb5a3f5f9ea9cf642bae872c7476">ERR::NOT_SUPPORTED</a></div><div class="ttdeci">const Status NOT_SUPPORTED</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00429">status.h:429</a></div></div>
<div class="ttc" id="structDumpState_html_a133a7854a44e0985d9e03ba36be78fc8"><div class="ttname"><a href="structDumpState.html#a133a7854a44e0985d9e03ba36be78fc8">DumpState::moduleBase</a></div><div class="ttdeci">uintptr_t moduleBase</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00375">wdbg_sym.cpp:375</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a25612e5f62861a33c1d1caa84151cd1d"><div class="ttname"><a href="wdbg__sym_8cpp.html#a25612e5f62861a33c1d1caa84151cd1d">IsRelativeToFramePointer</a></div><div class="ttdeci">static bool IsRelativeToFramePointer(DWORD flags, DWORD reg)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00764">wdbg_sym.cpp:764</a></div></div>
<div class="ttc" id="structTI__FINDCHILDREN__PARAMS2_html"><div class="ttname"><a href="structTI__FINDCHILDREN__PARAMS2.html">TI_FINDCHILDREN_PARAMS2</a></div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00169">wdbg_sym.cpp:169</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526add8226f5758099a1441724364e5993f6"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526add8226f5758099a1441724364e5993f6">btInt</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00083">dbghelp.h:83</a></div></div>
<div class="ttc" id="debug_8h_html_a1aef1d3bf364aa378256cad076825548"><div class="ttname"><a href="debug_8h.html#a1aef1d3bf364aa378256cad076825548">debug_CaptureContext</a></div><div class="ttdeci">LIB_API Status debug_CaptureContext(void *context)</div><div class="ttdef"><b>Definition:</b> <a href="udbg_8cpp_source.html#l00042">udbg.cpp:42</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a48bed3427f3cee2013008e23d73bed8f"><div class="ttname"><a href="wdbg__sym_8cpp.html#a48bed3427f3cee2013008e23d73bed8f">sym_init</a></div><div class="ttdeci">static void sym_init()</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00107">wdbg_sym.cpp:107</a></div></div>
<div class="ttc" id="namespaceERR_html_a01bf84993640ee84e262526265801397"><div class="ttname"><a href="namespaceERR.html#a01bf84993640ee84e262526265801397">ERR::SYM_UNRETRIEVABLE</a></div><div class="ttdeci">const Status SYM_UNRETRIEVABLE</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00403">debug.h:403</a></div></div>
<div class="ttc" id="debug_8h_html_afb70bbb6de1ca63ed5eed1390510cb71"><div class="ttname"><a href="debug_8h.html#afb70bbb6de1ca63ed5eed1390510cb71">ENSURE</a></div><div class="ttdeci">#define ENSURE(expr)</div><div class="ttdoc">ensure the expression &amp;lt;expr&amp;gt; evaluates to non-zero. </div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00282">debug.h:282</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526a9b23f8704866c0e75b3471a5f2f5a93b"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a9b23f8704866c0e75b3471a5f2f5a93b">btChar</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00081">dbghelp.h:81</a></div></div>
<div class="ttc" id="debug__stl_8cpp_html_a1d853e3ae31191c185aa3046e967d433"><div class="ttname"><a href="debug__stl_8cpp.html#a1d853e3ae31191c185aa3046e967d433">debug_stl_get_container_info</a></div><div class="ttdeci">Status debug_stl_get_container_info(const wchar_t *type_name, const u8 *p, size_t size, size_t el_size, size_t *el_count, DebugStlIterator *el_iterator, void *it_mem)</div><div class="ttdoc">prepare to enumerate the elements of arbitrarily typed STL containers. </div><div class="ttdef"><b>Definition:</b> <a href="debug__stl_8cpp_source.html#l00549">debug_stl.cpp:549</a></div></div>
<div class="ttc" id="wgl_8h_html_ad48a1ae177f90ad8a0ccc92481c664a7"><div class="ttname"><a href="wgl_8h.html#ad48a1ae177f90ad8a0ccc92481c664a7">CALLBACK</a></div><div class="ttdeci">#define CALLBACK</div><div class="ttdef"><b>Definition:</b> <a href="wgl_8h_source.html#l00039">wgl.h:39</a></div></div>
<div class="ttc" id="module__init_8h_html_a0622302b481431be62f9460f2cf5260e"><div class="ttname"><a href="module__init_8h.html#a0622302b481431be62f9460f2cf5260e">ModuleInitState</a></div><div class="ttdeci">intptr_t ModuleInitState</div><div class="ttdoc">initialization state of a module (class, source file, etc.) must be initialized to zero (e...</div><div class="ttdef"><b>Definition:</b> <a href="module__init_8h_source.html#l00035">module_init.h:35</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a1b244be82630635e4e3e68b26fa65296"><div class="ttname"><a href="wdbg__sym_8cpp.html#a1b244be82630635e4e3e68b26fa65296">udt_fits_on_one_line</a></div><div class="ttdeci">static bool udt_fits_on_one_line(const wchar_t *type_name, size_t child_count, size_t total_size)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01411">wdbg_sym.cpp:1411</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a165b7154a3ea7cec30c03485d6f1b3ab"><div class="ttname"><a href="wdbg__sym_8cpp.html#a165b7154a3ea7cec30c03485d6f1b3ab">dump_sym_base_class</a></div><div class="ttdeci">static Status dump_sym_base_class(DWORD type_id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01006">wdbg_sym.cpp:1006</a></div></div>
<div class="ttc" id="debug_8h_html_a3acd24c57882345e6ea84a5ed699678d"><div class="ttname"><a href="debug_8h.html#a3acd24c57882345e6ea84a5ed699678d">debug_IsPointerBogus</a></div><div class="ttdeci">LIB_API int debug_IsPointerBogus(const void *p)</div><div class="ttdoc">check if a pointer appears to be totally invalid. </div><div class="ttdef"><b>Definition:</b> <a href="udbg_8cpp_source.html#l00114">udbg.cpp:114</a></div></div>
<div class="ttc" id="namespaceERR_html_a7478f054dfe7f5aa3527458fb30af48e"><div class="ttname"><a href="namespaceERR.html#a7478f054dfe7f5aa3527458fb30af48e">ERR::SYM_NO_STACK_FRAMES_FOUND</a></div><div class="ttdeci">const Status SYM_NO_STACK_FRAMES_FOUND</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00401">debug.h:401</a></div></div>
<div class="ttc" id="winit_8h_html_ae7c11fb727e567abb6dc5bfed7715f51"><div class="ttname"><a href="winit_8h.html#ae7c11fb727e567abb6dc5bfed7715f51">WINIT_REGISTER_CRITICAL_INIT</a></div><div class="ttdeci">#define WINIT_REGISTER_CRITICAL_INIT(func)</div><div class="ttdef"><b>Definition:</b> <a href="winit_8h_source.html#l00136">winit.h:136</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_aaa4cd71d64c26935548a01da5e52ba88"><div class="ttname"><a href="wdbg__sym_8cpp.html#aaa4cd71d64c26935548a01da5e52ba88">dump_sym_typedef</a></div><div class="ttdeci">static Status dump_sym_typedef(DWORD type_id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01226">wdbg_sym.cpp:1226</a></div></div>
<div class="ttc" id="debug__stl_8h_html"><div class="ttname"><a href="debug__stl_8h.html">debug_stl.h</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a32debd8aeab652900d7c04699d58b89b"><div class="ttname"><a href="wdbg__sym_8cpp.html#a32debd8aeab652900d7c04699d58b89b">dump_string</a></div><div class="ttdeci">static Status dump_string(const u8 *p, size_t el_size)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00593">wdbg_sym.cpp:593</a></div></div>
<div class="ttc" id="classPath_html"><div class="ttname"><a href="classPath.html">Path</a></div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00075">path.h:75</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a1f85fd8c8e3ecc9bf9d03c751609f124"><div class="ttname"><a href="wdbg__sym_8cpp.html#a1f85fd8c8e3ecc9bf9d03c751609f124">dump_sym_pointer</a></div><div class="ttdeci">static Status dump_sym_pointer(DWORD type_id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01183">wdbg_sym.cpp:1183</a></div></div>
<div class="ttc" id="wgl_8h_html_aa8c0374618b33785ccb02f74bcfebc46"><div class="ttname"><a href="wgl_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a></div><div class="ttdeci">void * HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="wgl_8h_source.html#l00062">wgl.h:62</a></div></div>
<div class="ttc" id="structTI__FINDCHILDREN__PARAMS2_html_a9114c0e997e6854c6a88482620b97ef6"><div class="ttname"><a href="structTI__FINDCHILDREN__PARAMS2.html#a9114c0e997e6854c6a88482620b97ef6">TI_FINDCHILDREN_PARAMS2::maxChildren</a></div><div class="ttdeci">static const DWORD maxChildren</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00177">wdbg_sym.cpp:177</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526ac1c585ea4212c17f949b7d730a5e8001"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ac1c585ea4212c17f949b7d730a5e8001">btBit</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00094">dbghelp.h:94</a></div></div>
<div class="ttc" id="namespaceERR_html_a92b5d1c7c656cb1e28be649f1c4e5f1d"><div class="ttname"><a href="namespaceERR.html#a92b5d1c7c656cb1e28be649f1c4e5f1d">ERR::REENTERED</a></div><div class="ttdeci">const Status REENTERED</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00412">status.h:412</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a0e7abe4493965d414a749ac84cc7e0ea"><div class="ttname"><a href="wdbg__sym_8cpp.html#a0e7abe4493965d414a749ac84cc7e0ea">ptr_reset_visited</a></div><div class="ttdeci">static void ptr_reset_visited()</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01146">wdbg_sym.cpp:1146</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526ae97aff1b319f95719407a49daa6d3161"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ae97aff1b319f95719407a49daa6d3161">btCurrency</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00090">dbghelp.h:90</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ae734fac31ae23656ddc1f01464d37866"><div class="ttname"><a href="wdbg__sym_8cpp.html#ae734fac31ae23656ddc1f01464d37866">dump_array</a></div><div class="ttdeci">static Status dump_array(const u8 *p, size_t el_count, DWORD el_type_id, size_t el_size, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00724">wdbg_sym.cpp:724</a></div></div>
<div class="ttc" id="wgl_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="wgl_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="wgl_8h_source.html#l00056">wgl.h:56</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526ac3dbdf6b8d103138e3318c38073f7b97"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ac3dbdf6b8d103138e3318c38073f7b97">btNoType</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00079">dbghelp.h:79</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a5cf84adc578b2b5ab6460c135f481e58"><div class="ttname"><a href="wdbg__sym_8cpp.html#a5cf84adc578b2b5ab6460c135f481e58">PopulateImageStackFrame</a></div><div class="ttdeci">static IMAGEHLP_STACK_FRAME PopulateImageStackFrame(const STACKFRAME64 &amp;sf)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00134">wdbg_sym.cpp:134</a></div></div>
<div class="ttc" id="debug_8h_html_a5cedd52204506f8b491f5d9a7c8a2c34"><div class="ttname"><a href="debug_8h.html#a5cedd52204506f8b491f5d9a7c8a2c34">DEBUG_FILE_CHARS</a></div><div class="ttdeci">static const size_t DEBUG_FILE_CHARS</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00429">debug.h:429</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a1ddb8d9d0eb680abdd5b5cc7b9ee8b37"><div class="ttname"><a href="wdbg__sym_8cpp.html#a1ddb8d9d0eb680abdd5b5cc7b9ee8b37">DumpFunc</a></div><div class="ttdeci">Status(* DumpFunc)(DWORD typeId, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01592">wdbg_sym.cpp:1592</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_aede03f1783dbca279cf77f4fd9978622"><div class="ttname"><a href="wdbg__sym_8cpp.html#aede03f1783dbca279cf77f4fd9978622">out_pos</a></div><div class="ttdeci">static wchar_t * out_pos</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00388">wdbg_sym.cpp:388</a></div></div>
<div class="ttc" id="wgl_8h_html_a7927e087749615dae3114cc27b91c86d"><div class="ttname"><a href="wgl_8h.html#a7927e087749615dae3114cc27b91c86d">VOID</a></div><div class="ttdeci">void VOID</div><div class="ttdef"><b>Definition:</b> <a href="wgl_8h_source.html#l00049">wgl.h:49</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a43f9c01b0ec7f2febb22915bbe63a29c"><div class="ttname"><a href="wdbg__sym_8cpp.html#a43f9c01b0ec7f2febb22915bbe63a29c">ptr_already_visited</a></div><div class="ttdeci">static bool ptr_already_visited(const u8 *p)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01151">wdbg_sym.cpp:1151</a></div></div>
<div class="ttc" id="namespaceERR_html_a2ce109bbb63a0f7506eefb40c30ca2d6"><div class="ttname"><a href="namespaceERR.html#a2ce109bbb63a0f7506eefb40c30ca2d6">ERR::SYM_TYPE_INFO_UNAVAILABLE</a></div><div class="ttdeci">const Status SYM_TYPE_INFO_UNAVAILABLE</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00404">debug.h:404</a></div></div>
<div class="ttc" id="debug_8h_html_a2b922e2b75796f969bf1ce5285b4dd50"><div class="ttname"><a href="debug_8h.html#a2b922e2b75796f969bf1ce5285b4dd50">debug_GetCaller</a></div><div class="ttdeci">LIB_API void * debug_GetCaller(void *context, const wchar_t *lastFuncToSkip)</div><div class="ttdoc">return the caller of a certain function on the call stack. </div><div class="ttdef"><b>Definition:</b> <a href="bdbg_8cpp_source.html#l00038">bdbg.cpp:38</a></div></div>
<div class="ttc" id="structDumpState_html_a990f52391ca7cfb340dded928477deaa"><div class="ttname"><a href="structDumpState.html#a990f52391ca7cfb340dded928477deaa">DumpState::level</a></div><div class="ttdeci">size_t level</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00373">wdbg_sym.cpp:373</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_aba12521da29d1bb11fe5718fdcea9b73"><div class="ttname"><a href="wdbg__sym_8cpp.html#aba12521da29d1bb11fe5718fdcea9b73">visited</a></div><div class="ttdeci">static const u8 * visited[maxVisited]</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01143">wdbg_sym.cpp:1143</a></div></div>
<div class="ttc" id="status_8h_html_af86dce5ae46a850945a95cfbdcaacd9c"><div class="ttname"><a href="status_8h.html#af86dce5ae46a850945a95cfbdcaacd9c">Status</a></div><div class="ttdeci">i64 Status</div><div class="ttdoc">Error handling system. </div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00171">status.h:171</a></div></div>
<div class="ttc" id="debug_8h_html_a736a83614247147ed4c43459013b3a81"><div class="ttname"><a href="debug_8h.html#a736a83614247147ed4c43459013b3a81">debug_break</a></div><div class="ttdeci">void debug_break()</div><div class="ttdoc">trigger a breakpoint when reached/&amp;quot;called&amp;quot;. </div><div class="ttdef"><b>Definition:</b> <a href="udbg_8cpp_source.html#l00048">udbg.cpp:48</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a89bf3f21a1f66adf0967e70f783d5146"><div class="ttname"><a href="wdbg__sym_8cpp.html#a89bf3f21a1f66adf0967e70f783d5146">dump_sym_vtable</a></div><div class="ttdeci">static Status dump_sym_vtable(DWORD type_id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01567">wdbg_sym.cpp:1567</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ae31bd0a2c2879e97a99736d7e3f9b474"><div class="ttname"><a href="wdbg__sym_8cpp.html#ae31bd0a2c2879e97a99736d7e3f9b474">dump_sym_udt</a></div><div class="ttdeci">static Status dump_sym_udt(DWORD type_id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01521">wdbg_sym.cpp:1521</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ac356b342113e6c3d89d84e2047ab6981"><div class="ttname"><a href="wdbg__sym_8cpp.html#ac356b342113e6c3d89d84e2047ab6981">AppendCharacterIfPrintable</a></div><div class="ttdeci">static void AppendCharacterIfPrintable(u64 data)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00859">wdbg_sym.cpp:859</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526a425d00b8975d8d8250fc7d878a2224ab"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a425d00b8975d8d8250fc7d878a2224ab">btUInt</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00084">dbghelp.h:84</a></div></div>
<div class="ttc" id="wutil_8h_html"><div class="ttname"><a href="wutil_8h.html">wutil.h</a></div></div>
<div class="ttc" id="debug__stl_8h_html_ada20ee7c665d4923ed75e01e8db9e6fa"><div class="ttname"><a href="debug__stl_8h.html#ada20ee7c665d4923ed75e01e8db9e6fa">DEBUG_STL_MAX_ITERATOR_SIZE</a></div><div class="ttdeci">const size_t DEBUG_STL_MAX_ITERATOR_SIZE</div><div class="ttdoc">no STL iterator is larger than this; see below. </div><div class="ttdef"><b>Definition:</b> <a href="debug__stl_8h_source.html#l00063">debug_stl.h:63</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a562b839da4d7fd94123555678d7731c1"><div class="ttname"><a href="wdbg__sym_8cpp.html#a562b839da4d7fd94123555678d7731c1">array_iterator</a></div><div class="ttdeci">static const u8 * array_iterator(void *internal, size_t el_size)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00715">wdbg_sym.cpp:715</a></div></div>
<div class="ttc" id="cpu_8h_html"><div class="ttname"><a href="cpu_8h.html">cpu.h</a></div></div>
<div class="ttc" id="wposix__types_8h_html_af10f4c58d91a6fa30ccc8a19d0ecbf48"><div class="ttname"><a href="wposix__types_8h.html#af10f4c58d91a6fa30ccc8a19d0ecbf48">ssize_t</a></div><div class="ttdeci">intptr_t ssize_t</div><div class="ttdef"><b>Definition:</b> <a href="wposix__types_8h_source.html#l00082">wposix_types.h:82</a></div></div>
<div class="ttc" id="debug_8h_html_aefb9baa9a06d990a0f1c4a5415f53fef"><div class="ttname"><a href="debug_8h.html#aefb9baa9a06d990a0f1c4a5415f53fef">DEBUG_WARN_ERR</a></div><div class="ttdeci">#define DEBUG_WARN_ERR(status)</div><div class="ttdoc">display the error dialog with text corresponding to the given error code. </div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00331">debug.h:331</a></div></div>
<div class="ttc" id="structTI__FINDCHILDREN__PARAMS2_html_adefc3494432f526f3981f878be0dde10"><div class="ttname"><a href="structTI__FINDCHILDREN__PARAMS2.html#adefc3494432f526f3981f878be0dde10">TI_FINDCHILDREN_PARAMS2::childrenStorage</a></div><div class="ttdeci">DWORD childrenStorage[maxChildren-1]</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00179">wdbg_sym.cpp:179</a></div></div>
<div class="ttc" id="dbghelp_8h_html_ace34b43f7a85070c2f233cbb13e362bfa3157bbb0d66cc4bc0ed83c406f168b75"><div class="ttname"><a href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfa3157bbb0d66cc4bc0ed83c406f168b75">DataIsUnknown</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00101">dbghelp.h:101</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526af227727df84cd9c4731d00bf548af774"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526af227727df84cd9c4731d00bf548af774">btFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00085">dbghelp.h:85</a></div></div>
<div class="ttc" id="types_8h_html_a969c7c1ebb4f70581e040a3034b14ee0"><div class="ttname"><a href="types_8h.html#a969c7c1ebb4f70581e040a3034b14ee0">u64</a></div><div class="ttdeci">#define u64</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00042">types.h:42</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_aaeb34a49eebebc3a8eabcf1ec151cf69"><div class="ttname"><a href="wdbg__sym_8cpp.html#aaeb34a49eebebc3a8eabcf1ec151cf69">numVisited</a></div><div class="ttdeci">static size_t numVisited</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01144">wdbg_sym.cpp:1144</a></div></div>
<div class="ttc" id="dbghelp_8h_html"><div class="ttname"><a href="dbghelp_8h.html">dbghelp.h</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a0065a4b1c997cc9a058f923bdc7c67d6"><div class="ttname"><a href="wdbg__sym_8cpp.html#a0065a4b1c997cc9a058f923bdc7c67d6">dump_error</a></div><div class="ttdeci">static void dump_error(Status err)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00560">wdbg_sym.cpp:560</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a457869114e41520fd7b4058caea2d13b"><div class="ttname"><a href="wdbg__sym_8cpp.html#a457869114e41520fd7b4058caea2d13b">dump_sym_enum</a></div><div class="ttdeci">static Status dump_sym_enum(DWORD type_id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01049">wdbg_sym.cpp:1049</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a8a549554e5f5b8248745ddbffce2314f"><div class="ttname"><a href="wdbg__sym_8cpp.html#a8a549554e5f5b8248745ddbffce2314f">out_init</a></div><div class="ttdeci">static void out_init(wchar_t *buf, size_t max_chars)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00410">wdbg_sym.cpp:410</a></div></div>
<div class="ttc" id="dbghelp_8h_html_ace34b43f7a85070c2f233cbb13e362bfa4b96c675dc4859521127b63697f1a304"><div class="ttname"><a href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfa4b96c675dc4859521127b63697f1a304">DataIsLocal</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00102">dbghelp.h:102</a></div></div>
<div class="ttc" id="namespaceINFO_html_a24f9efb658615bcc13e076c5518f3c4c"><div class="ttname"><a href="namespaceINFO.html#a24f9efb658615bcc13e076c5518f3c4c">INFO::SKIPPED</a></div><div class="ttdeci">const Status SKIPPED</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00392">status.h:392</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526a08e6f9a73dcb061bc8c3ceed8c533397"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a08e6f9a73dcb061bc8c3ceed8c533397">btVariant</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00092">dbghelp.h:92</a></div></div>
<div class="ttc" id="types_8h_html_aa777e5139adfca31612ec04bc2b26845"><div class="ttname"><a href="types_8h.html#aa777e5139adfca31612ec04bc2b26845">i64</a></div><div class="ttdeci">#define i64</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00037">types.h:37</a></div></div>
<div class="ttc" id="module__init_8h_html"><div class="ttname"><a href="module__init_8h.html">module_init.h</a></div></div>
<div class="ttc" id="wgl_8h_html_a9026fbe0621f8d881c7bc984a03c8b06"><div class="ttname"><a href="wgl_8h.html#a9026fbe0621f8d881c7bc984a03c8b06">wchar_t</a></div><div class="ttdeci">unsigned short wchar_t</div><div class="ttdef"><b>Definition:</b> <a href="wgl_8h_source.html#l00078">wgl.h:78</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ab569e94c1f264179ab3227f3b9d51b47"><div class="ttname"><a href="wdbg__sym_8cpp.html#ab569e94c1f264179ab3227f3b9d51b47">maxVisited</a></div><div class="ttdeci">static const size_t maxVisited</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01142">wdbg_sym.cpp:1142</a></div></div>
<div class="ttc" id="debug__stl_8h_html_a8477a1a5b8cf8f0369145b5dca97551a"><div class="ttname"><a href="debug__stl_8h.html#a8477a1a5b8cf8f0369145b5dca97551a">DebugStlIterator</a></div><div class="ttdeci">const u8 *(* DebugStlIterator)(void *internal, size_t el_size)</div><div class="ttdoc">abstraction of all STL iterators used by debug_stl. </div><div class="ttdef"><b>Definition:</b> <a href="debug__stl_8h_source.html#l00058">debug_stl.h:58</a></div></div>
<div class="ttc" id="namespaceERR_html_a9bf1f8e51c0fe47e2387d1ddc796eaac"><div class="ttname"><a href="namespaceERR.html#a9bf1f8e51c0fe47e2387d1ddc796eaac">ERR::SYM_INTERNAL_ERROR</a></div><div class="ttdeci">const Status SYM_INTERNAL_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00405">debug.h:405</a></div></div>
<div class="ttc" id="arm_8cpp_html_af649a1e2cad1d11f6a61c4a8326b6e0d"><div class="ttname"><a href="arm_8cpp.html#af649a1e2cad1d11f6a61c4a8326b6e0d">cpu_CAS</a></div><div class="ttdeci">bool cpu_CAS(volatile intptr_t *location, intptr_t expected, intptr_t newValue)</div><div class="ttdoc">atomic &amp;quot;compare and swap&amp;quot;. </div><div class="ttdef"><b>Definition:</b> <a href="arm_8cpp_source.html#l00036">arm.cpp:36</a></div></div>
<div class="ttc" id="status_8cpp_html_a8e3dc27c96846a93945c5a290de65e63"><div class="ttname"><a href="status_8cpp.html#a8e3dc27c96846a93945c5a290de65e63">StatusDescription</a></div><div class="ttdeci">wchar_t * StatusDescription(Status status, wchar_t *buf, size_t max_chars)</div><div class="ttdoc">generate textual description of a Status. </div><div class="ttdef"><b>Definition:</b> <a href="status_8cpp_source.html#l00079">status.cpp:79</a></div></div>
<div class="ttc" id="status_8h_html_a04818077363c6001aa31db08b02dc3df"><div class="ttname"><a href="status_8h.html#a04818077363c6001aa31db08b02dc3df">WARN_IF_FALSE</a></div><div class="ttdeci">#define WARN_IF_FALSE(expression)</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00360">status.h:360</a></div></div>
<div class="ttc" id="namespaceERR_html_a08badff5681fbce8cebd56abd61c3165"><div class="ttname"><a href="namespaceERR.html#a08badff5681fbce8cebd56abd61c3165">ERR::STL_CNT_UNKNOWN</a></div><div class="ttdeci">const Status STL_CNT_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="debug__stl_8h_source.html#l00033">debug_stl.h:33</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a375b9c3836d38112b167885bd69ecaee"><div class="ttname"><a href="wdbg__sym_8cpp.html#a375b9c3836d38112b167885bd69ecaee">dump_sym</a></div><div class="ttdeci">static Status dump_sym(DWORD id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01628">wdbg_sym.cpp:1628</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_abc2aa3c4d810a462bacfff6a7a54ab26"><div class="ttname"><a href="wdbg__sym_8cpp.html#abc2aa3c4d810a462bacfff6a7a54ab26">dump_sym_data</a></div><div class="ttdeci">static Status dump_sym_data(DWORD id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01025">wdbg_sym.cpp:1025</a></div></div>
<div class="ttc" id="structDumpState_html_a949ed74cc3ce3b9c293100b079904eee"><div class="ttname"><a href="structDumpState.html#a949ed74cc3ce3b9c293100b079904eee">DumpState::stackFrame</a></div><div class="ttdeci">LPSTACKFRAME64 stackFrame</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00376">wdbg_sym.cpp:376</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a6b1926d066b58afb5cf8a7495535c270"><div class="ttname"><a href="wdbg__sym_8cpp.html#a6b1926d066b58afb5cf8a7495535c270">dump_sym_function</a></div><div class="ttdeci">static Status dump_sym_function(DWORD type_id, const u8 *p, DumpState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l01107">wdbg_sym.cpp:1107</a></div></div>
<div class="ttc" id="path_8cpp_html_a1328a51c51c4653410ef160d679247d1"><div class="ttname"><a href="path_8cpp.html#a1328a51c51c4653410ef160d679247d1">path_name_only</a></div><div class="ttdeci">const wchar_t * path_name_only(const wchar_t *path)</div><div class="ttdoc">Get the path component of a path. </div><div class="ttdef"><b>Definition:</b> <a href="path_8cpp_source.html#l00085">path.cpp:85</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526a28fb64a8f6457e9d125ce3c58f0d9f45"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526a28fb64a8f6457e9d125ce3c58f0d9f45">btBCD</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00086">dbghelp.h:86</a></div></div>
<div class="ttc" id="dbghelp_8h_html_ace34b43f7a85070c2f233cbb13e362bfad00151bfd9df40ccb917b378ca4386dd"><div class="ttname"><a href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfad00151bfd9df40ccb917b378ca4386dd">DataIsConstant</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00110">dbghelp.h:110</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_afd688fd7cefd4245d9015034d9bf3f19"><div class="ttname"><a href="wdbg__sym_8cpp.html#afd688fd7cefd4245d9015034d9bf3f19">CallStackWalk</a></div><div class="ttdeci">static Status CallStackWalk(STACKFRAME64 &amp;sf, CONTEXT &amp;context)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00284">wdbg_sym.cpp:284</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ac89176dc7e6070d6dd1db0e28718c04fabe0f75c145fdcd4edc7e752ef9dcd16d"><div class="ttname"><a href="wdbg__sym_8cpp.html#ac89176dc7e6070d6dd1db0e28718c04fabe0f75c145fdcd4edc7e752ef9dcd16d">CV_AMD64_RBP</a></div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00556">wdbg_sym.cpp:556</a></div></div>
<div class="ttc" id="debug_8h_html_afcfc83007fe96240611f738a68accddb"><div class="ttname"><a href="debug_8h.html#afcfc83007fe96240611f738a68accddb">DEBUG_DISPLAY_ERROR</a></div><div class="ttdeci">#define DEBUG_DISPLAY_ERROR(description)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00197">debug.h:197</a></div></div>
<div class="ttc" id="status_8h_html_ad237abf41862df027a05bec9f8687afa"><div class="ttname"><a href="status_8h.html#ad237abf41862df027a05bec9f8687afa">WARN_RETURN</a></div><div class="ttdeci">#define WARN_RETURN(status)</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00255">status.h:255</a></div></div>
<div class="ttc" id="debug_8h_html_abf28d06b314fec40b16b0014fc0f18f8"><div class="ttname"><a href="debug_8h.html#abf28d06b314fec40b16b0014fc0f18f8">DEBUG_CONTEXT_SIZE</a></div><div class="ttdeci">static const size_t DEBUG_CONTEXT_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00451">debug.h:451</a></div></div>
<div class="ttc" id="namespaceERR_html_a61559cb9d273fe4bce52a390cf38bd90"><div class="ttname"><a href="namespaceERR.html#a61559cb9d273fe4bce52a390cf38bd90">ERR::FAIL</a></div><div class="ttdeci">const Status FAIL</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00406">status.h:406</a></div></div>
<div class="ttc" id="structDumpState_html_a49cfedd2070f80d4cb049517e05c0a91"><div class="ttname"><a href="structDumpState.html#a49cfedd2070f80d4cb049517e05c0a91">DumpState::indirection</a></div><div class="ttdeci">size_t indirection</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00374">wdbg_sym.cpp:374</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_aa76d463f1c26ddcf9a23a46276c09c1d"><div class="ttname"><a href="wdbg__sym_8cpp.html#aa76d463f1c26ddcf9a23a46276c09c1d">out_check_limit</a></div><div class="ttdeci">static Status out_check_limit()</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00488">wdbg_sym.cpp:488</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a502b06aa5ad25116c775d201326bad52"><div class="ttname"><a href="wdbg__sym_8cpp.html#a502b06aa5ad25116c775d201326bad52">INDENT</a></div><div class="ttdeci">#define INDENT</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00504">wdbg_sym.cpp:504</a></div></div>
<div class="ttc" id="debug_8h_html_ae2b6c180baa3eb86ed20bcb7cb7becee"><div class="ttname"><a href="debug_8h.html#ae2b6c180baa3eb86ed20bcb7cb7becee">debug_ResolveSymbol</a></div><div class="ttdeci">LIB_API Status debug_ResolveSymbol(void *ptr_of_interest, wchar_t *sym_name, wchar_t *file, int *line)</div><div class="ttdoc">read and return symbol information for the given address. </div><div class="ttdef"><b>Definition:</b> <a href="bdbg_8cpp_source.html#l00099">bdbg.cpp:99</a></div></div>
<div class="ttc" id="app__hooks_8cpp_html_a506559359e2f126dcafa2d9b29eee135"><div class="ttname"><a href="app__hooks_8cpp.html#a506559359e2f126dcafa2d9b29eee135">ah_get_log_dir</a></div><div class="ttdeci">const OsPath &amp; ah_get_log_dir()</div><div class="ttdoc">return path to directory into which crash dumps should be written. </div><div class="ttdef"><b>Definition:</b> <a href="app__hooks_8cpp_source.html#l00151">app_hooks.cpp:151</a></div></div>
<div class="ttc" id="namespaceERR_html_a8113d32e08ddff16fce8257ba0549391"><div class="ttname"><a href="namespaceERR.html#a8113d32e08ddff16fce8257ba0549391">ERR::SYM_NESTING_LIMIT</a></div><div class="ttdeci">const Status SYM_NESTING_LIMIT</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00409">debug.h:409</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_acc42dc5717e4c52096f4bd2bbe2df58d"><div class="ttname"><a href="wdbg__sym_8cpp.html#acc42dc5717e4c52096f4bd2bbe2df58d">IsUnretrievable</a></div><div class="ttdeci">static bool IsUnretrievable(DWORD flags)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00775">wdbg_sym.cpp:775</a></div></div>
<div class="ttc" id="code__annotation_8h_html_a9c6e95e4137db09c2a6f8b69b32fd73f"><div class="ttname"><a href="code__annotation_8h.html#a9c6e95e4137db09c2a6f8b69b32fd73f">cassert</a></div><div class="ttdeci">#define cassert(expr)</div><div class="ttdoc">Compile-time assertion. </div><div class="ttdef"><b>Definition:</b> <a href="code__annotation_8h_source.html#l00193">code_annotation.h:193</a></div></div>
<div class="ttc" id="structTI__FINDCHILDREN__PARAMS2_html_a634353e8c6967ba6d533aaf8f5406928"><div class="ttname"><a href="structTI__FINDCHILDREN__PARAMS2.html#a634353e8c6967ba6d533aaf8f5406928">TI_FINDCHILDREN_PARAMS2::TI_FINDCHILDREN_PARAMS2</a></div><div class="ttdeci">TI_FINDCHILDREN_PARAMS2(DWORD numChildren)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00171">wdbg_sym.cpp:171</a></div></div>
<div class="ttc" id="namespaceERR_html_ab1b34580fe91b832f31479d5b4e47ecd"><div class="ttname"><a href="namespaceERR.html#ab1b34580fe91b832f31479d5b4e47ecd">ERR::SYM_SINGLE_SYMBOL_LIMIT</a></div><div class="ttdeci">const Status SYM_SINGLE_SYMBOL_LIMIT</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00412">debug.h:412</a></div></div>
<div class="ttc" id="wdbg_8h_html_a09e2322cf38d1c7c00b1434d896d450d"><div class="ttname"><a href="wdbg_8h.html#a09e2322cf38d1c7c00b1434d896d450d">wdbg_assert</a></div><div class="ttdeci">#define wdbg_assert(expr)</div><div class="ttdoc">similar to ENSURE but safe to use during critical init or while under the heap or dbghelp locks...</div><div class="ttdef"><b>Definition:</b> <a href="wdbg_8h_source.html#l00043">wdbg.h:43</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526ad21dd2fec96e57eff6ff7c03dcff1e68"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526ad21dd2fec96e57eff6ff7c03dcff1e68">btComplex</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00093">dbghelp.h:93</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a3a1e0e825b68c02515c082ec6a89c358"><div class="ttname"><a href="wdbg__sym_8cpp.html#a3a1e0e825b68c02515c082ec6a89c358">is_string</a></div><div class="ttdeci">static bool is_string(const u8 *p, size_t stride)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00513">wdbg_sym.cpp:513</a></div></div>
<div class="ttc" id="app__hooks_8h_html"><div class="ttname"><a href="app__hooks_8h.html">app_hooks.h</a></div></div>
<div class="ttc" id="structDumpState_html"><div class="ttname"><a href="structDumpState.html">DumpState</a></div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00371">wdbg_sym.cpp:371</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_ada8f84681eb7c984d7f7cb15d3f7cdac"><div class="ttname"><a href="wdbg__sym_8cpp.html#ada8f84681eb7c984d7f7cb15d3f7cdac">machine</a></div><div class="ttdeci">static WORD machine</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00063">wdbg_sym.cpp:63</a></div></div>
<div class="ttc" id="module__init_8cpp_html_ae682d0c308c233bfc98bac095d96fd3c"><div class="ttname"><a href="module__init_8cpp.html#ae682d0c308c233bfc98bac095d96fd3c">ModuleInit</a></div><div class="ttdeci">Status ModuleInit(volatile ModuleInitState *initState, Status(*init)())</div><div class="ttdoc">calls a user-defined init function if initState is zero. </div><div class="ttdef"><b>Definition:</b> <a href="module__init_8cpp_source.html#l00040">module_init.cpp:40</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_aa30d585fb92afa388aa5a7fabd8382c0"><div class="ttname"><a href="wdbg__sym_8cpp.html#aa30d585fb92afa388aa5a7fabd8382c0">PopulateStackFrame</a></div><div class="ttdeci">static STACKFRAME64 PopulateStackFrame(CONTEXT &amp;context)</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00114">wdbg_sym.cpp:114</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a05359c64383951b6808f62637734a495"><div class="ttname"><a href="wdbg__sym_8cpp.html#a05359c64383951b6808f62637734a495">out_chars_left</a></div><div class="ttdeci">static size_t out_chars_left</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00387">wdbg_sym.cpp:387</a></div></div>
<div class="ttc" id="wdbg__sym_8cpp_html_a37aba301aa1332a23061438a6752633d"><div class="ttname"><a href="wdbg__sym_8cpp.html#a37aba301aa1332a23061438a6752633d">InitDbghelp</a></div><div class="ttdeci">static Status InitDbghelp()</div><div class="ttdef"><b>Definition:</b> <a href="wdbg__sym_8cpp_source.html#l00065">wdbg_sym.cpp:65</a></div></div>
<div class="ttc" id="wutil_8h_html_acdbb88f878fa68cfc03cedca3d988bf7"><div class="ttname"><a href="wutil_8h.html#acdbb88f878fa68cfc03cedca3d988bf7">WUTIL_IMPORT_KERNEL32</a></div><div class="ttdeci">#define WUTIL_IMPORT_KERNEL32(procName, varName)</div><div class="ttdef"><b>Definition:</b> <a href="wutil_8h_source.html#l00063">wutil.h:63</a></div></div>
<div class="ttc" id="byte__order_8cpp_html_a488f656adcce6f50d896d4ef3b2c2238"><div class="ttname"><a href="byte__order_8cpp.html#a488f656adcce6f50d896d4ef3b2c2238">movzx_le64</a></div><div class="ttdeci">u64 movzx_le64(const u8 *p, size_t size_bytes)</div><div class="ttdoc">see write_be16 </div><div class="ttdef"><b>Definition:</b> <a href="byte__order_8cpp_source.html#l00148">byte_order.cpp:148</a></div></div>
<div class="ttc" id="dbghelp_8h_html_af0ea7a682b4d48afbc37a32234271526af1a861dbf80e81561363604629189804"><div class="ttname"><a href="dbghelp_8h.html#af0ea7a682b4d48afbc37a32234271526af1a861dbf80e81561363604629189804">btWChar</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00082">dbghelp.h:82</a></div></div>
<div class="ttc" id="dbghelp_8h_html_ace34b43f7a85070c2f233cbb13e362bfae1d71e110f4fc21f57e44b0f9265cff8"><div class="ttname"><a href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfae1d71e110f4fc21f57e44b0f9265cff8">DataIsFileStatic</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00106">dbghelp.h:106</a></div></div>
<div class="ttc" id="dbghelp_8h_html_ace34b43f7a85070c2f233cbb13e362bfaa3f51b9fc8340e1aefe320dfc751091c"><div class="ttname"><a href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfaa3f51b9fc8340e1aefe320dfc751091c">DataIsStaticLocal</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00103">dbghelp.h:103</a></div></div>
<div class="ttc" id="debug_8cpp_html_ab660871a1133ed786b46769c052a812b"><div class="ttname"><a href="debug_8cpp.html#ab660871a1133ed786b46769c052a812b">debug_printf</a></div><div class="ttdeci">void debug_printf(const wchar_t *fmt,...)</div><div class="ttdoc">write a formatted string to the debug channel, subject to filtering (see below). </div><div class="ttdef"><b>Definition:</b> <a href="debug_8cpp_source.html#l00142">debug.cpp:142</a></div></div>
<div class="ttc" id="Loader_8cpp_html_ac50fed53208cdb84ab2d14a9dcb80e02"><div class="ttname"><a href="Loader_8cpp.html#ac50fed53208cdb84ab2d14a9dcb80e02">state</a></div><div class="ttdeci">static enum @41 state</div></div>
<div class="ttc" id="os__path_8h_html_a987d2bcb1552dec6c391a92281b10038"><div class="ttname"><a href="os__path_8h.html#a987d2bcb1552dec6c391a92281b10038">OsString</a></div><div class="ttdeci">static std::string OsString(const OsPath &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="os__path_8h_source.html#l00042">os_path.h:42</a></div></div>
<div class="ttc" id="debug_8h_html_a631c7038fbcac5aeb5901610b8610924"><div class="ttname"><a href="debug_8h.html#a631c7038fbcac5aeb5901610b8610924">debug_DumpStack</a></div><div class="ttdeci">LIB_API Status debug_DumpStack(wchar_t *buf, size_t maxChars, void *context, const wchar_t *lastFuncToSkip)</div><div class="ttdoc">write a complete stack trace (including values of local variables) into the specified buffer...</div><div class="ttdef"><b>Definition:</b> <a href="bdbg_8cpp_source.html#l00052">bdbg.cpp:52</a></div></div>
<div class="ttc" id="status_8h_html_a22caba86ad92480f925337156573125a"><div class="ttname"><a href="status_8h.html#a22caba86ad92480f925337156573125a">RETURN_STATUS_IF_ERR</a></div><div class="ttdeci">#define RETURN_STATUS_IF_ERR(expression)</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00276">status.h:276</a></div></div>
<div class="ttc" id="dbghelp_8h_html_ace34b43f7a85070c2f233cbb13e362bfaffec5f2aae03730e7de65988215e8141"><div class="ttname"><a href="dbghelp_8h.html#ace34b43f7a85070c2f233cbb13e362bfaffec5f2aae03730e7de65988215e8141">DataIsParam</a></div><div class="ttdef"><b>Definition:</b> <a href="dbghelp_8h_source.html#l00104">dbghelp.h:104</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 14 2013 00:58:07 for Pyrogenesis by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
