<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Pyrogenesis: CTextureManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Pyrogenesis
   &#160;<span id="projectnumber">13997</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classCTextureManager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CTextureManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Texture manager with asynchronous loading and automatic DDS conversion/compression.  
 <a href="classCTextureManager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="TextureManager_8h_source.html">TextureManager.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aeac8d3e1b0ba766fa4453cc226865a22"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTextureManager.html#aeac8d3e1b0ba766fa4453cc226865a22">CTextureManager</a> (<a class="el" href="vfs_8h.html#ab95a3e282dd075d1413c6058cf9b7f2f">PIVFS</a> vfs, bool highQuality, bool disableGL)</td></tr>
<tr class="memdesc:aeac8d3e1b0ba766fa4453cc226865a22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct texture manager.  <a href="#aeac8d3e1b0ba766fa4453cc226865a22">More...</a><br/></td></tr>
<tr class="separator:aeac8d3e1b0ba766fa4453cc226865a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5c22a96bc762785bd6487344080c927"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTextureManager.html#ad5c22a96bc762785bd6487344080c927">~CTextureManager</a> ()</td></tr>
<tr class="separator:ad5c22a96bc762785bd6487344080c927"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a3777c662f2ce88f495a964f7af7c77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Texture_8h.html#a2f8ff2b44a461041ed979fe77f309f90">CTexturePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTextureManager.html#a3a3777c662f2ce88f495a964f7af7c77">CreateTexture</a> (const <a class="el" href="classCTextureProperties.html">CTextureProperties</a> &amp;props)</td></tr>
<tr class="memdesc:a3a3777c662f2ce88f495a964f7af7c77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a texture with the given GL properties.  <a href="#a3a3777c662f2ce88f495a964f7af7c77">More...</a><br/></td></tr>
<tr class="separator:a3a3777c662f2ce88f495a964f7af7c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e47a8ac9207d6b9868606d72a1af508"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Texture_8h.html#a2f8ff2b44a461041ed979fe77f309f90">CTexturePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTextureManager.html#a2e47a8ac9207d6b9868606d72a1af508">GetErrorTexture</a> ()</td></tr>
<tr class="memdesc:a2e47a8ac9207d6b9868606d72a1af508"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a magenta texture.  <a href="#a2e47a8ac9207d6b9868606d72a1af508">More...</a><br/></td></tr>
<tr class="separator:a2e47a8ac9207d6b9868606d72a1af508"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9234532bf212837bf8abbbb39f9e538b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTextureManager.html#a9234532bf212837bf8abbbb39f9e538b">MakeProgress</a> ()</td></tr>
<tr class="memdesc:a9234532bf212837bf8abbbb39f9e538b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Work on asynchronous texture loading operations, if any.  <a href="#a9234532bf212837bf8abbbb39f9e538b">More...</a><br/></td></tr>
<tr class="separator:a9234532bf212837bf8abbbb39f9e538b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fdf5eb27e6422d220a150edd4acaec8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTextureManager.html#a1fdf5eb27e6422d220a150edd4acaec8">GenerateCachedTexture</a> (const <a class="el" href="vfs__path_8h.html#ae0bdf903216d033386c804c90a379c13">VfsPath</a> &amp;path, <a class="el" href="vfs__path_8h.html#ae0bdf903216d033386c804c90a379c13">VfsPath</a> &amp;outputPath)</td></tr>
<tr class="memdesc:a1fdf5eb27e6422d220a150edd4acaec8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronously converts and compresses and saves the texture, and returns the output path (minus a "cache/" prefix).  <a href="#a1fdf5eb27e6422d220a150edd4acaec8">More...</a><br/></td></tr>
<tr class="separator:a1fdf5eb27e6422d220a150edd4acaec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a110a38df36973a47837f3a1396d9ac20"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTextureManager.html#a110a38df36973a47837f3a1396d9ac20">NONCOPYABLE</a> (<a class="el" href="classCTextureManager.html">CTextureManager</a>)</td></tr>
<tr class="separator:a110a38df36973a47837f3a1396d9ac20"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a092f9a58d6884e572787181ae2f6be51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCTextureManagerImpl.html">CTextureManagerImpl</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCTextureManager.html#a092f9a58d6884e572787181ae2f6be51">m</a></td></tr>
<tr class="separator:a092f9a58d6884e572787181ae2f6be51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Texture manager with asynchronous loading and automatic DDS conversion/compression. </p>
<p>Input textures can be any format. They will be converted to DDS using settings defined in files named "texture.xml", in the same directory as the texture and in its parent directories. See <a class="el" href="classCTextureConverter.html" title="Texture conversion helper class. ">CTextureConverter</a> for the XML syntax. The DDS file will be cached for faster loading in the future.</p>
<p>Typically the graphics code will initialise many textures at the start of the game, mostly for off-screen objects, by calling <a class="el" href="classCTextureManager.html#a3a3777c662f2ce88f495a964f7af7c77" title="Create a texture with the given GL properties. ">CreateTexture()</a>. Loading texture data may be very slow (especially if it needs to be converted to DDS), and we don't want the game to become unresponsive. CreateTexture therefore returns an object immediately, without loading the texture. If the object is never used then the data will never be loaded.</p>
<p>Typically, the renderer will call <a class="el" href="classCTexture.html#abd5780d599b2cf2593c64806aa18d22f" title="Bind the texture to the given GL texture unit. ">CTexture::Bind()</a> when it wants to use the texture. This will trigger the loading of the texture data. If it can be loaded quickly (i.e. there is already a cached DDS version), then it will be loaded before the function returns, and the texture can be rendered as normal.</p>
<p>If loading will take a long time, then Bind() binds a default placeholder texture and starts loading the texture in the background. It will use the correct texture when the renderer next calls Bind() after the load has finished.</p>
<p>It is also possible to prefetch textures which are not being rendered yet, but are expected to be rendered soon (e.g. for off-screen terrain tiles). These will be loaded in the background, when there are no higher-priority textures to load.</p>
<p>The same texture file can be safely loaded multiple times with different GL parameters (but this should be avoided whenever possible, as it wastes VRAM).</p>
<p>For release packages, DDS files can be precached by appending ".dds" to their name, which will be used instead of doing runtime conversion. This means most players should never experience the slow asynchronous conversion behaviour. These cache files will typically be packed into an archive for faster loading; if no archive cache is available then the source file will be converted and stored as a loose cache file on the user's disk. </p>

<p>Definition at line <a class="el" href="TextureManager_8h_source.html#l00071">71</a> of file <a class="el" href="TextureManager_8h_source.html">TextureManager.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aeac8d3e1b0ba766fa4453cc226865a22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CTextureManager::CTextureManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#ab95a3e282dd075d1413c6058cf9b7f2f">PIVFS</a>&#160;</td>
          <td class="paramname"><em>vfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>highQuality</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>disableGL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct texture manager. </p>
<p>vfs must be the <a class="el" href="classVFS.html">VFS</a> instance used for all textures loaded from this object. highQuality is slower and intended for batch-conversion modes. disableGL is intended for tests, and will disable all GL uploads. </p>

<p>Definition at line <a class="el" href="TextureManager_8cpp_source.html#l00615">615</a> of file <a class="el" href="TextureManager_8cpp_source.html">TextureManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad5c22a96bc762785bd6487344080c927"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CTextureManager::~CTextureManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="TextureManager_8cpp_source.html#l00620">620</a> of file <a class="el" href="TextureManager_8cpp_source.html">TextureManager.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3a3777c662f2ce88f495a964f7af7c77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Texture_8h.html#a2f8ff2b44a461041ed979fe77f309f90">CTexturePtr</a> CTextureManager::CreateTexture </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCTextureProperties.html">CTextureProperties</a> &amp;&#160;</td>
          <td class="paramname"><em>props</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a texture with the given GL properties. </p>
<p>The texture data will not be loaded immediately. </p>

<p>Definition at line <a class="el" href="TextureManager_8cpp_source.html#l00625">625</a> of file <a class="el" href="TextureManager_8cpp_source.html">TextureManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1fdf5eb27e6422d220a150edd4acaec8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CTextureManager::GenerateCachedTexture </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="vfs__path_8h.html#ae0bdf903216d033386c804c90a379c13">VfsPath</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vfs__path_8h.html#ae0bdf903216d033386c804c90a379c13">VfsPath</a> &amp;&#160;</td>
          <td class="paramname"><em>outputPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronously converts and compresses and saves the texture, and returns the output path (minus a "cache/" prefix). </p>
<p>This is intended for pre-caching textures in release archives. </p>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

<p>Definition at line <a class="el" href="TextureManager_8cpp_source.html#l00640">640</a> of file <a class="el" href="TextureManager_8cpp_source.html">TextureManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2e47a8ac9207d6b9868606d72a1af508"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Texture_8h.html#a2f8ff2b44a461041ed979fe77f309f90">CTexturePtr</a> CTextureManager::GetErrorTexture </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a magenta texture. </p>
<p>Use this for highlighting errors (e.g. missing terrain textures). </p>

<p>Definition at line <a class="el" href="TextureManager_8cpp_source.html#l00630">630</a> of file <a class="el" href="TextureManager_8cpp_source.html">TextureManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9234532bf212837bf8abbbb39f9e538b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CTextureManager::MakeProgress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Work on asynchronous texture loading operations, if any. </p>
<p>Returns true if it did any work. The caller should typically loop this per frame until it returns false or exceeds the allocated time for this frame. </p>

<p>Definition at line <a class="el" href="TextureManager_8cpp_source.html#l00635">635</a> of file <a class="el" href="TextureManager_8cpp_source.html">TextureManager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a110a38df36973a47837f3a1396d9ac20"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CTextureManager::NONCOPYABLE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCTextureManager.html">CTextureManager</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a092f9a58d6884e572787181ae2f6be51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCTextureManagerImpl.html">CTextureManagerImpl</a>* CTextureManager::m</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="TextureManager_8h_source.html#l00115">115</a> of file <a class="el" href="TextureManager_8h_source.html">TextureManager.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/sathyam/0ad.svn/source/graphics/<a class="el" href="TextureManager_8h_source.html">TextureManager.h</a></li>
<li>/home/sathyam/0ad.svn/source/graphics/<a class="el" href="TextureManager_8cpp_source.html">TextureManager.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 14 2013 00:58:12 for Pyrogenesis by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
