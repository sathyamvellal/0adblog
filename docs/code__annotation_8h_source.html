<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Pyrogenesis: /home/sathyam/0ad.svn/source/lib/code_annotation.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Pyrogenesis
   &#160;<span id="projectnumber">13997</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_e9f938b6a0a3145773b24039556c08b4.html">lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">code_annotation.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="code__annotation_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Copyright (c) 2013 Wildfire Games</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * a copy of this software and associated documentation files (the</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * &quot;Software&quot;), to deal in the Software without restriction, including</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * without limitation the rights to use, copy, modify, merge, publish,</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * distribute, sublicense, and/or sell copies of the Software, and to</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * permit persons to whom the Software is furnished to do so, subject to</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the following conditions:</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * The above copyright notice and this permission notice shall be included</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * in all copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * macros for code annotation.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#ifndef INCLUDED_CODE_ANNOTATION</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define INCLUDED_CODE_ANNOTATION</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="compiler_8h.html">lib/sysdep/compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="arch_8h.html">lib/sysdep/arch.h</a>&quot;</span>    <span class="comment">// ARCH_AMD64</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * mark a function parameter as unused and avoid</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * the corresponding compiler warning.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * wrap around the parameter name, e.g. void f(int UNUSED(x))</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> **/</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a3e5bd53e9de4078ded1bf077b019a131">   38</a></span>&#160;<span class="preprocessor">#define UNUSED(param)</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * mark a function local variable or parameter as unused and avoid</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> * the corresponding compiler warning.</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> * note that UNUSED is not applicable to variable definitions that</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> * involve initialization, nor is it sufficient in cases where</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> * an argument is unused only in certain situations.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> * example: void f(int x) { ASSERT(x == 0); UNUSED2(x); }</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> * this asserts in debug builds and avoids warnings in release.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> **/</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#if HAVE_C99 &amp;&amp; GCC_VERSION // _Pragma from C99, unused from GCC</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define UNUSED2(param) _Pragma(&quot;unused &quot; #param)</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#elif ICC_VERSION</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor"></span><span class="comment">// ICC 12 still doesn&#39;t recognize pragma unused, casting to void</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// isn&#39;t sufficient, and self-assignment doesn&#39;t work for references.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor"># define UNUSED2(param) do{ if(&amp;param) {} } while(false)</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a4cca7d44107cc04a580b7391717942b6">   56</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define UNUSED2(param) ((void)(param))</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> * indicate a function will not throw any synchronous exceptions,</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> * thus hopefully generating smaller and more efficient code.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> * must be placed BEFORE return types because &quot;The [VC++] compiler</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> * ignores, without warning, any __declspec keywords placed after *&quot;.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> * such syntax is apparently also legal in GCC, per the example</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> * &quot;__attribute__((noreturn)) void d0 (void)&quot;.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> * example:</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> * NOTHROW_DECLARE void function();</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> * NOTHROW_DEFINE void function() {}</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> **/</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#if GCC_VERSION &gt;= 303</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define NOTHROW_DECLARE __attribute__((nothrow))</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define NOTHROW_DEFINE // not supported for definitions</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#elif MSC_VERSION</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor"></span><span class="comment">// Kevin Frei, 2006-03-23: &quot;I work on the Visual C++ compiler team,</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// and agree completely with Paul Parks: don&#39;t use throw(), because</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">// there&#39;s a chance that we&#39;ll eventually implement it according to the standard&quot;.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor"># define NOTHROW_DECLARE __declspec(nothrow)</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define NOTHROW_DEFINE __declspec(nothrow)</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor"></span><span class="comment">// don&#39;t use throw() because it might result in ADDITIONAL checks</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">// (the standard mandates calling unexpected())</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a84893b7f1dee2ecbfcc0e8371435d38b">   85</a></span>&#160;<span class="preprocessor"># define NOTHROW_DECLARE</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#ae03af0447f17bc712d0d93d89bfb9093">   86</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define NOTHROW_DEFINE</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> * &quot;unreachable code&quot; helpers</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> * unreachable lines of code are often the source or symptom of subtle bugs.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> * they are flagged by compiler warnings; however, the opposite problem -</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> * erroneously reaching certain spots (e.g. due to missing return statement)</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> * is worse and not detected automatically.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> * to defend against this, the programmer can annotate their code to</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> * indicate to humans that a particular spot should never be reached.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> * however, that isn&#39;t much help; better is a sentinel that raises an</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> * error if if it is actually reached. hence, the UNREACHABLE macro.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> * ironically, if the code guarded by UNREACHABLE works as it should,</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> * compilers may flag the macro&#39;s code as unreachable. this would</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> * distract from genuine warnings, which is unacceptable.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"> * even worse, compilers differ in their code checking: GCC only complains if</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"> * non-void functions end without returning a value (i.e. missing return</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"> * statement), while VC checks if lines are unreachable (e.g. if they are</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"> * preceded by a return on all paths).</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"> * the implementation below enables optimization and automated checking</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"> * without raising warnings.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"> **/</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#define UNREACHABLE // actually defined below.. this is for</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># undef UNREACHABLE // CppDoc&#39;s benefit only.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">// this macro should not generate any fallback code; it is merely the</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">// compiler-specific backend for UNREACHABLE.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">// #define it to nothing if the compiler doesn&#39;t support such a hint.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#define HAVE_ASSUME_UNREACHABLE 1</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#if MSC_VERSION &amp;&amp; !ICC_VERSION // (ICC ignores this)</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define ASSUME_UNREACHABLE __assume(0)</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#elif GCC_VERSION &gt;= 450</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define ASSUME_UNREACHABLE __builtin_unreachable()</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#ae55235e3d5f9e697f8dba005e736c13b">  127</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define ASSUME_UNREACHABLE</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># undef HAVE_ASSUME_UNREACHABLE</span></div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a57ed885577d3b443fda836ae050f8f12">  129</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define HAVE_ASSUME_UNREACHABLE 0</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">// compiler supports ASSUME_UNREACHABLE =&gt; allow it to assume the code is</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">// never reached (improves optimization at the cost of undefined behavior</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">// if the annotation turns out to be incorrect).</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#if HAVE_ASSUME_UNREACHABLE &amp;&amp; !CONFIG_ENABLE_CHECKS</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define UNREACHABLE ASSUME_UNREACHABLE</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor"></span><span class="comment">// otherwise (or if CONFIG_ENABLE_CHECKS is set), add a user-visible</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">// warning if the code is reached. note that abort() fails to stop</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// ICC from warning about the lack of a return statement, so we</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">// use an infinite loop instead.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a3af99897b60119951af8961dbd52dd3f">  142</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define UNREACHABLE\</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">    STMT(\</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">        DEBUG_WARN_ERR(ERR::LOGIC); </span><span class="comment">/* hit supposedly unreachable code */</span><span class="preprocessor">\</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">        for(;;){};\</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">    )</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">convenient specialization of UNREACHABLE for switch statements whose</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">default can never be reached. example usage:</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">int x;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">switch(x % 2)</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">    case 0: break;</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">    case 1: break;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">    NODEFAULT;</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">}</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">**/</span></div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a6a2a0df46438610827b2b2c13a6109e8">  160</a></span>&#160;<span class="preprocessor">#define NODEFAULT default: UNREACHABLE</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">// generate a symbol containing the line number of the macro invocation.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">// used to give a unique name (per file) to types made by cassert.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">// we can&#39;t prepend __FILE__ to make it globally unique - the filename</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">// may be enclosed in quotes. PASTE3_HIDDEN__ is needed to make sure</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">// __LINE__ is expanded correctly.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a7f07790ae7e4876970b3a158c691e625">  168</a></span>&#160;<span class="preprocessor">#define PASTE3_HIDDEN__(a, b, c) a ## b ## c</span></div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#aabcf8db63efe6a31361152e7588a5bd9">  169</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define PASTE3__(a, b, c) PASTE3_HIDDEN__(a, b, c)</span></div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#ad58665cccf5bf5bb9bd9d63b48599303">  170</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define UID__  PASTE3__(LINE_, __LINE__, _)</span></div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a182cef4b773629a8ab3ff94ddfcc3f57">  171</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define UID2__ PASTE3__(LINE_, __LINE__, _2)</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">// cassert</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">// Silence warnings about unused local typedefs</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#if GCC_VERSION &gt;= 408</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define UNUSED_ATTRIBUTE __attribute__((unused))</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#ac299675b1818286fa1dff07e3e383b21">  181</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define UNUSED_ATTRIBUTE</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"> * Compile-time assertion. Causes a compile error if the expression</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"> * evaluates to zero/false.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"> * No runtime overhead; may be used anywhere, including file scope.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"> * Especially useful for testing sizeof types.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"> * @param expr Expression that is expected to evaluate to non-zero at compile-time.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> **/</span></div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a9c6e95e4137db09c2a6f8b69b32fd73f">  193</a></span>&#160;<span class="preprocessor">#define cassert(expr) typedef static_assert_&lt;(expr)&gt;::type UID__ UNUSED_ATTRIBUTE</span></div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="structstatic__assert__.html">  194</a></span>&#160;<span class="preprocessor"></span><span class="keyword">template</span>&lt;<span class="keywordtype">bool</span>&gt; <span class="keyword">struct </span><a class="code" href="structstatic__assert__.html">static_assert_</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="structstatic__assert___3_01true_01_4.html">  195</a></span>&#160;<span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span><a class="code" href="structstatic__assert__.html">static_assert_</a>&lt;true&gt;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;{</div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="structstatic__assert___3_01true_01_4.html#a564fd29f5efd05b6c0b2df43811c1343">  197</a></span>&#160;    <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="structstatic__assert___3_01true_01_4.html#a564fd29f5efd05b6c0b2df43811c1343">type</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;};</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> * @copydoc cassert(expr)</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment"> * This version must be used if expr uses a dependent type (e.g. depends on</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"> * a template parameter).</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"> **/</span></div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#aea7a016a542f9c099a95b0bf653f7cc3">  206</a></span>&#160;<span class="preprocessor">#define cassert_dependent(expr) typedef typename static_assert_&lt;(expr)&gt;::type UID__ UNUSED_ATTRIBUTE</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"> * @copydoc cassert(expr)</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"> * This version has a less helpful error message, but redefinition doesn&#39;t</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"> * trigger warnings.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"> **/</span></div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#ac120ddd40e40cdb11c95d5c841973b52">  214</a></span>&#160;<span class="preprocessor">#define cassert2(expr) extern char CASSERT_FAILURE[1][(expr)]</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">// indicate a class is noncopyable (usually due to const or reference members).</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">// example:</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">// class C {</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">//   NONCOPYABLE(C);</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">// public: // etc.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">// };</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">// this is preferable to inheritance from boost::noncopyable because it</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">// avoids ICC 11 W4 warnings about non-virtual dtors and suppression of</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">// the copy assignment operator.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a042add0fa4835a4fc72fffcfcbd02b5a">  226</a></span>&#160;<span class="preprocessor">#define NONCOPYABLE(className)\</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="preprocessor">private:\</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">    className(const className&amp;);\</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">    const className&amp; operator=(const className&amp;)</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#if ICC_VERSION</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define ASSUME_ALIGNED(ptr, multiple) __assume_aligned(ptr, multiple)</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a7d65ec821ddd014f4a5ab74f9aa67fc2">  234</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define ASSUME_ALIGNED(ptr, multiple)</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">// annotate printf-style functions for compile-time type checking.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">// fmtpos is the index of the format argument, counting from 1 or</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// (if it&#39;s a non-static class function) 2; the &#39;...&#39; is assumed</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">// to come directly after it.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">#if GCC_VERSION</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define PRINTF_ARGS(fmtpos) __attribute__ ((format (printf, fmtpos, fmtpos+1)))</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define VPRINTF_ARGS(fmtpos) __attribute__ ((format (printf, fmtpos, 0)))</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># if CONFIG_DEHYDRA</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#  define WPRINTF_ARGS(fmtpos) __attribute__ ((user(&quot;format, w, printf, &quot; #fmtpos &quot;, +1&quot;)))</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># else</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#  define WPRINTF_ARGS(fmtpos) </span><span class="comment">/* not currently supported in GCC */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># endif</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define VWPRINTF_ARGS(fmtpos) </span><span class="comment">/* not currently supported in GCC */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a7ca03218a4f8ff34342715e32b349040">  251</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define PRINTF_ARGS(fmtpos)</span></div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#aa287414f4b1daf191e837527350ba818">  252</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define VPRINTF_ARGS(fmtpos)</span></div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a3dc292783c98f84d8783765c835fb9ab">  253</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define WPRINTF_ARGS(fmtpos)</span></div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a9358885c23249bb593666c6482f3efc0">  254</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define VWPRINTF_ARGS(fmtpos)</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor"></span><span class="comment">// TODO: support _Printf_format_string_ for VC9+</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">// annotate vararg functions that expect to end with an explicit NULL</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">#if GCC_VERSION</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define SENTINEL_ARG __attribute__ ((sentinel))</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#ae64a158e61510722a60a4cb5cd4ac2c5">  262</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define SENTINEL_ARG</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment"> * prevent the compiler from reordering loads or stores across this point.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment"> **/</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">#if ICC_VERSION</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define COMPILER_FENCE __memory_barrier()</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#elif MSC_VERSION</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># include &lt;intrin.h&gt;</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor"># pragma intrinsic(_ReadWriteBarrier)</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define COMPILER_FENCE _ReadWriteBarrier()</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#elif GCC_VERSION</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define COMPILER_FENCE asm volatile(&quot;&quot; : : : &quot;memory&quot;)</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#af184f5a1532e268202ac01e1cfca93c5">  277</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define COMPILER_FENCE</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">// try to define _W64, if not already done</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">// (this is useful for catching pointer size bugs)</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">#ifndef _W64</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># if MSC_VERSION</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#  define _W64 __w64</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># elif GCC_VERSION</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#  define _W64 __attribute__((mode (__pointer__)))</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># else</span></div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a3730e9bd68460c3bea497352ee69b9ae">  289</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#  define _W64</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># endif</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">// C99-like restrict (non-standard in C++, but widely supported in various forms).</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">// May be used on pointers. May also be used on member functions to indicate</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">// that &#39;this&#39; is unaliased (e.g. &quot;void C::m() RESTRICT { ... }&quot;).</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">// Must not be used on references - GCC supports that but VC doesn&#39;t.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">// We call this &quot;RESTRICT&quot; to avoid conflicts with VC&#39;s __declspec(restrict),</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">// and because it&#39;s not really the same as C99&#39;s restrict.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">// To be safe and satisfy the compilers&#39; stated requirements: an object accessed</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">// by a restricted pointer must not be accessed by any other pointer within the</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">// lifetime of the restricted pointer, if the object is modified.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">// To maximise the chance of optimisation, any pointers that could potentially</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">// alias with the restricted one should be marked as restricted too.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">// It would probably be a good idea to write test cases for any code that uses</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">// this in an even very slightly unclear way, in case it causes obscure problems</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">// in a rare compiler due to differing semantics.</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">// .. GCC</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">#if GCC_VERSION</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define RESTRICT __restrict__</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor"></span><span class="comment">// .. VC8 provides __restrict</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">#elif MSC_VERSION &gt;= 1400</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define RESTRICT __restrict</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor"></span><span class="comment">// .. ICC supports the keyword &#39;restrict&#39; when run with the /Qrestrict option,</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">//    but it always also supports __restrict__ or __restrict to be compatible</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">//    with GCC/MSVC, so we&#39;ll use the underscored version. One of {GCC,MSC}_VERSION</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">//    should have been defined in addition to ICC_VERSION, so we should be using</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">//    one of the above cases (unless it&#39;s an old VS7.1-emulating ICC).</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">#elif ICC_VERSION</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># error ICC_VERSION defined without either GCC_VERSION or an adequate MSC_VERSION</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor"></span><span class="comment">// .. unsupported; remove it from code</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#aae3356b63849abbe8789dd41648ee90a">  328</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define RESTRICT</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">// number of array elements</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="preprocessor">#if GCC_VERSION</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">// The function trick below does not work in GCC. Instead use the old fashioned</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">// divide-by-sizeof-element. This causes problems when the argument to</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">// ARRAY_SIZE is a pointer and not an array, but we will catch those when we</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">// compile on something other than GCC.</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="preprocessor">#define ARRAY_SIZE(name) (sizeof(name) / (sizeof((name)[0])))</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">// (function taking a reference to an array and returning a pointer to</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">// an array of characters. it&#39;s only declared and never defined; we just</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">// need it to determine n, the size of the array that was passed.)</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keywordtype">size_t</span> n&gt; char (*<a class="code" href="code__annotation_8h.html#a4b71cb7a04b751f3a78311c068e8f1f0">ArraySizeDeducer</a>(<a class="code" href="secure__crt_8cpp.html#adfa3c5f81bdc5013584a4fb1c3e3be8b">T</a> (&amp;)[n]))[n];</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">// (although requiring C++, this method is much better than the standard</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">// sizeof(name) / sizeof(name[0]) because it doesn&#39;t compile when a</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">// pointer is passed, which can easily happen under maintenance.)</span></div>
<div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#ab198d3720ba4ffbe006bc88095210798">  355</a></span>&#160;<span class="preprocessor">#define ARRAY_SIZE(name) (sizeof(*ArraySizeDeducer(name)))</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor">#endif // GCC_VERSION</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">// C99-style __func__</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">// .. newer GCC already have it</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="preprocessor">#if GCC_VERSION &gt;= 300</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor"></span><span class="comment">// nothing need be done</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">// .. old GCC and MSVC have __FUNCTION__</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="preprocessor">#elif GCC_VERSION &gt;= 200 || MSC_VERSION</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define __func__ __FUNCTION__</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="preprocessor"></span><span class="comment">// .. unsupported</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a7d6e1cf1a8d53f38471e9e9db3faf740">  368</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define __func__ &quot;(unknown)&quot;</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">// extern &quot;C&quot;, but does the right thing in pure-C mode</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">#if defined(__cplusplus)</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define EXTERN_C extern &quot;C&quot;</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#abbaccfbed35b945162c27ef6d3748e77">  376</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define EXTERN_C extern</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">#if MSC_VERSION</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define INLINE __forceinline</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">  383</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define INLINE inline</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">#if MSC_VERSION</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define CALL_CONV __cdecl</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a66285a1fe575693f5f275b212891222e">  390</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define CALL_CONV</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#if MSC_VERSION &amp;&amp; !ARCH_AMD64</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define DECORATED_NAME(name) _##name</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a834bcff78728e29c3d54b6034d1daf7f">  397</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define DECORATED_NAME(name) name</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">// workaround for preprocessor limitation: macro args aren&#39;t expanded</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">// before being pasted.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#ae23de1be80b8a216e70ebb7178646769">  403</a></span>&#160;<span class="preprocessor">#define STRINGIZE2(id) # id</span></div>
<div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a9d19764a539df4bd3626ff1136504521">  404</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define STRINGIZE(id) STRINGIZE2(id)</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">// for widening non-literals (e.g. __FILE__)</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">// note: C99 says __func__ is a magic *variable*, and GCC doesn&#39;t allow</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">// widening it via preprocessor.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#ad36399393da65b6f3b338cccfa4bb831">  409</a></span>&#160;<span class="preprocessor">#define WIDEN2(x) L ## x</span></div>
<div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a91d933cd369a295f1299a8eec2f6ef60">  410</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define WIDEN(x) WIDEN2(x)</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">// C++0x rvalue references (required for UniqueRange)</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment"> * expands to the type `rvalue reference to T&#39;; used in function</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"> * parameter declarations. for example, UniqueRange&#39;s move ctor is:</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"> * UniqueRange(RVALUE_REF(UniqueRange) rvalue) { ... }</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment"> **/</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="preprocessor">#define RVALUE_REF(T) T&amp;&amp;</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"> * convert an rvalue to an lvalue</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"> **/</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="preprocessor">#define LVALUE(rvalue) rvalue   // in C++0x, a named rvalue reference is already an lvalue</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"> * convert anything (lvalue or rvalue) to an rvalue</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"> **/</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="preprocessor">#define RVALUE(lvalue) std::move(lvalue)</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="preprocessor">#if !HAVE_CPP0X // partial emulation</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">// lvalue references are wrapped in this class, which is the</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">// actual argument passed to the &quot;move ctor&quot; etc.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="classRValue.html">  439</a></span>&#160;<span class="keyword">class </span><a class="code" href="classRValue.html">RValue</a></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="classRValue.html#a640ee10e414f29c95e6932cea18c96b3">  442</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="classRValue.html#a640ee10e414f29c95e6932cea18c96b3">RValue</a>(<a class="code" href="secure__crt_8cpp.html#adfa3c5f81bdc5013584a4fb1c3e3be8b">T</a>&amp; <a class="code" href="classRValue.html#a2e34be9f61f7bc8b6f411db388dc302d">lvalue</a>): lvalue(lvalue) {}</div>
<div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="classRValue.html#a1c57aa7e01500237c45bc0c189b9f2ae">  443</a></span>&#160;    <a class="code" href="secure__crt_8cpp.html#adfa3c5f81bdc5013584a4fb1c3e3be8b">T</a>&amp; <a class="code" href="classRValue.html#a1c57aa7e01500237c45bc0c189b9f2ae">LValue</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classRValue.html#a2e34be9f61f7bc8b6f411db388dc302d">lvalue</a>; }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// (avoid &quot;assignment operator could not be generated&quot; warning)</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keyword">const</span> <a class="code" href="classRValue.html">RValue</a>&amp; <a class="code" href="classRValue.html#a139a4d6c5a3bebf37812caf787c798d0">operator=</a>(<span class="keyword">const</span> <a class="code" href="classRValue.html">RValue</a>&amp;);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="classRValue.html#a2e34be9f61f7bc8b6f411db388dc302d">  449</a></span>&#160;    <a class="code" href="secure__crt_8cpp.html#adfa3c5f81bdc5013584a4fb1c3e3be8b">T</a>&amp; <a class="code" href="classRValue.html#a2e34be9f61f7bc8b6f411db388dc302d">lvalue</a>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;};</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">// (to deduce T automatically, we need function templates)</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00455"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a27ff4047a84f13843f76ecf754349c29">  455</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classRValue.html">RValue&lt;T&gt;</a> <a class="code" href="code__annotation_8h.html#a27ff4047a84f13843f76ecf754349c29">ToRValue</a>(<a class="code" href="secure__crt_8cpp.html#adfa3c5f81bdc5013584a4fb1c3e3be8b">T</a>&amp; lvalue)</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;{</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRValue.html">RValue&lt;T&gt;</a>(lvalue);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;}</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a5e11a32508c4a0594829f77b10d1c84e">  461</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classRValue.html">RValue&lt;T&gt;</a> <a class="code" href="code__annotation_8h.html#a27ff4047a84f13843f76ecf754349c29">ToRValue</a>(<span class="keyword">const</span> <a class="code" href="secure__crt_8cpp.html#adfa3c5f81bdc5013584a4fb1c3e3be8b">T</a>&amp; lvalue)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;{</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRValue.html">RValue&lt;T&gt;</a>((<a class="code" href="secure__crt_8cpp.html#adfa3c5f81bdc5013584a4fb1c3e3be8b">T</a>&amp;)lvalue);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#ae909fd32b19fa3351c2a30e741557e73">  467</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classRValue.html">RValue&lt;T&gt;</a> <a class="code" href="code__annotation_8h.html#a27ff4047a84f13843f76ecf754349c29">ToRValue</a>(<span class="keyword">const</span> <a class="code" href="classRValue.html">RValue&lt;T&gt;</a>&amp; rvalue)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRValue.html">RValue&lt;T&gt;</a>(rvalue.<a class="code" href="classRValue.html#a1c57aa7e01500237c45bc0c189b9f2ae">LValue</a>());</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="preprocessor">#undef RVALUE_REF</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#undef LVALUE</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#undef RVALUE</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a6a4c67cd092d999b2990cfdf48a3bd28">  476</a></span>&#160;<span class="preprocessor">#define RVALUE_REF(T) const RValue&lt;T&gt;&amp;</span></div>
<div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#a800c17c76d196a0dadf60c93d8afb3a0">  477</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define LVALUE(rvalue) rvalue.LValue()</span></div>
<div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="code__annotation_8h.html#acbad965e5562263dabe949c5b0b6185d">  478</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define RVALUE(lvalue) ToRValue(lvalue)</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="preprocessor">#endif  // #if !HAVE_CPP0X</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="preprocessor">#endif  // #ifndef INCLUDED_CODE_ANNOTATION</span></div>
<div class="ttc" id="classRValue_html"><div class="ttname"><a href="classRValue.html">RValue</a></div><div class="ttdef"><b>Definition:</b> <a href="code__annotation_8h_source.html#l00439">code_annotation.h:439</a></div></div>
<div class="ttc" id="classRValue_html_a2e34be9f61f7bc8b6f411db388dc302d"><div class="ttname"><a href="classRValue.html#a2e34be9f61f7bc8b6f411db388dc302d">RValue::lvalue</a></div><div class="ttdeci">T &amp; lvalue</div><div class="ttdef"><b>Definition:</b> <a href="code__annotation_8h_source.html#l00449">code_annotation.h:449</a></div></div>
<div class="ttc" id="classRValue_html_a640ee10e414f29c95e6932cea18c96b3"><div class="ttname"><a href="classRValue.html#a640ee10e414f29c95e6932cea18c96b3">RValue::RValue</a></div><div class="ttdeci">RValue(T &amp;lvalue)</div><div class="ttdef"><b>Definition:</b> <a href="code__annotation_8h_source.html#l00442">code_annotation.h:442</a></div></div>
<div class="ttc" id="classRValue_html_a139a4d6c5a3bebf37812caf787c798d0"><div class="ttname"><a href="classRValue.html#a139a4d6c5a3bebf37812caf787c798d0">RValue::operator=</a></div><div class="ttdeci">const RValue &amp; operator=(const RValue &amp;)</div></div>
<div class="ttc" id="compiler_8h_html"><div class="ttname"><a href="compiler_8h.html">compiler.h</a></div></div>
<div class="ttc" id="structstatic__assert___3_01true_01_4_html_a564fd29f5efd05b6c0b2df43811c1343"><div class="ttname"><a href="structstatic__assert___3_01true_01_4.html#a564fd29f5efd05b6c0b2df43811c1343">static_assert_&lt; true &gt;::type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> <a href="code__annotation_8h_source.html#l00197">code_annotation.h:197</a></div></div>
<div class="ttc" id="secure__crt_8cpp_html_adfa3c5f81bdc5013584a4fb1c3e3be8b"><div class="ttname"><a href="secure__crt_8cpp.html#adfa3c5f81bdc5013584a4fb1c3e3be8b">T</a></div><div class="ttdeci">#define T(string_literal)</div><div class="ttdef"><b>Definition:</b> <a href="secure__crt_8cpp_source.html#l00070">secure_crt.cpp:70</a></div></div>
<div class="ttc" id="code__annotation_8h_html_a4b71cb7a04b751f3a78311c068e8f1f0"><div class="ttname"><a href="code__annotation_8h.html#a4b71cb7a04b751f3a78311c068e8f1f0">ArraySizeDeducer</a></div><div class="ttdeci">char(* ArraySizeDeducer(T(&amp;)[n]))[n]</div></div>
<div class="ttc" id="arch_8h_html"><div class="ttname"><a href="arch_8h.html">arch.h</a></div></div>
<div class="ttc" id="structstatic__assert___html"><div class="ttname"><a href="structstatic__assert__.html">static_assert_</a></div><div class="ttdef"><b>Definition:</b> <a href="code__annotation_8h_source.html#l00194">code_annotation.h:194</a></div></div>
<div class="ttc" id="code__annotation_8h_html_a27ff4047a84f13843f76ecf754349c29"><div class="ttname"><a href="code__annotation_8h.html#a27ff4047a84f13843f76ecf754349c29">ToRValue</a></div><div class="ttdeci">static RValue&lt; T &gt; ToRValue(T &amp;lvalue)</div><div class="ttdef"><b>Definition:</b> <a href="code__annotation_8h_source.html#l00455">code_annotation.h:455</a></div></div>
<div class="ttc" id="classRValue_html_a1c57aa7e01500237c45bc0c189b9f2ae"><div class="ttname"><a href="classRValue.html#a1c57aa7e01500237c45bc0c189b9f2ae">RValue::LValue</a></div><div class="ttdeci">T &amp; LValue() const </div><div class="ttdef"><b>Definition:</b> <a href="code__annotation_8h_source.html#l00443">code_annotation.h:443</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 14 2013 00:58:07 for Pyrogenesis by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
